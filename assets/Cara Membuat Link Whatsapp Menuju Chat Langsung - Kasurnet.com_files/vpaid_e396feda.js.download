!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).getVPAIDAd=t()}}(function(){return function t(e,n,i){function r(o,s){if(!n[o]){if(!e[o]){var _="function"==typeof require&&require;if(!s&&_)return _(o,!0);if(a)return a(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[o]={exports:{}};e[o][0].call(l.exports,function(t){var n=e[o][1][t];return r(n||t)},l,l.exports,t,e,n,i)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(t,e,n){e.exports={SWF_VERSION:15,TARGET_PLAYER:"23.0"}},{}],2:[function(t,e,n){e.exports={MAX_WRAPPERS:10,VAST_TIMEOUT:3e3,WRAPPER_CHAIN_TIMEOUT:5e3,VPAID_SCRIPT_TIMEOUT:5e3,VPAID_FINAL_EVENT_TIMEOUT:1e3,JSON_TIMEOUT:2e4,SSC_TIMEOUT:2e4,BROADCAST_VAST_REQUEST_TIMEOUT:1e3,APPNEXUS_TIMEOUT:3e3,OPENX_TIMEOUT:3e3,RUBICON_TIMEOUT:3e3,TELARIA_TIMEOUT:3e3,IMA_TIMEOUT:5e3,MAX_BROADCAST_TIMEOUT:5e3}},{}],3:[function(t,e,n){e.exports={adNetworkId:"926608",partner:"springserve"}},{}],4:[function(t,e,n){e.exports={moatPartnerCode:"yellowhammerflashint188671193078"}},{}],5:[function(t,e,n){e.exports={url:"s.update.morgdog.springserve.com/2/465673/analytics.js",dt:"4656731475874383737000"}},{}],6:[function(t,e,n){var i=t("./_getNative")(t("./_root"),"DataView");e.exports=i},{"./_getNative":87,"./_root":128}],7:[function(t,e,n){var i=t("./_hashClear"),r=t("./_hashDelete"),a=t("./_hashGet"),o=t("./_hashHas"),s=t("./_hashSet");function _(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}_.prototype.clear=i,_.prototype.delete=r,_.prototype.get=a,_.prototype.has=o,_.prototype.set=s,e.exports=_},{"./_hashClear":94,"./_hashDelete":95,"./_hashGet":96,"./_hashHas":97,"./_hashSet":98}],8:[function(t,e,n){var i=t("./_listCacheClear"),r=t("./_listCacheDelete"),a=t("./_listCacheGet"),o=t("./_listCacheHas"),s=t("./_listCacheSet");function _(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}_.prototype.clear=i,_.prototype.delete=r,_.prototype.get=a,_.prototype.has=o,_.prototype.set=s,e.exports=_},{"./_listCacheClear":107,"./_listCacheDelete":108,"./_listCacheGet":109,"./_listCacheHas":110,"./_listCacheSet":111}],9:[function(t,e,n){var i=t("./_getNative")(t("./_root"),"Map");e.exports=i},{"./_getNative":87,"./_root":128}],10:[function(t,e,n){var i=t("./_mapCacheClear"),r=t("./_mapCacheDelete"),a=t("./_mapCacheGet"),o=t("./_mapCacheHas"),s=t("./_mapCacheSet");function _(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}_.prototype.clear=i,_.prototype.delete=r,_.prototype.get=a,_.prototype.has=o,_.prototype.set=s,e.exports=_},{"./_mapCacheClear":112,"./_mapCacheDelete":113,"./_mapCacheGet":114,"./_mapCacheHas":115,"./_mapCacheSet":116}],11:[function(t,e,n){var i=t("./_getNative")(t("./_root"),"Promise");e.exports=i},{"./_getNative":87,"./_root":128}],12:[function(t,e,n){var i=t("./_getNative")(t("./_root"),"Set");e.exports=i},{"./_getNative":87,"./_root":128}],13:[function(t,e,n){var i=t("./_MapCache"),r=t("./_setCacheAdd"),a=t("./_setCacheHas");function o(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new i;++e<n;)this.add(t[e])}o.prototype.add=o.prototype.push=r,o.prototype.has=a,e.exports=o},{"./_MapCache":10,"./_setCacheAdd":129,"./_setCacheHas":130}],14:[function(t,e,n){var i=t("./_ListCache"),r=t("./_stackClear"),a=t("./_stackDelete"),o=t("./_stackGet"),s=t("./_stackHas"),_=t("./_stackSet");function u(t){var e=this.__data__=new i(t);this.size=e.size}u.prototype.clear=r,u.prototype.delete=a,u.prototype.get=o,u.prototype.has=s,u.prototype.set=_,e.exports=u},{"./_ListCache":8,"./_stackClear":134,"./_stackDelete":135,"./_stackGet":136,"./_stackHas":137,"./_stackSet":138}],15:[function(t,e,n){var i=t("./_root").Symbol;e.exports=i},{"./_root":128}],16:[function(t,e,n){var i=t("./_root").Uint8Array;e.exports=i},{"./_root":128}],17:[function(t,e,n){var i=t("./_getNative")(t("./_root"),"WeakMap");e.exports=i},{"./_getNative":87,"./_root":128}],18:[function(t,e,n){e.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},{}],19:[function(t,e,n){e.exports=function(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););return t}},{}],20:[function(t,e,n){e.exports=function(t,e){for(var n=-1,i=null==t?0:t.length,r=0,a=[];++n<i;){var o=t[n];e(o,n,t)&&(a[r++]=o)}return a}},{}],21:[function(t,e,n){var i=t("./_baseTimes"),r=t("./isArguments"),a=t("./isArray"),o=t("./isBuffer"),s=t("./_isIndex"),_=t("./isTypedArray"),u=Object.prototype.hasOwnProperty;e.exports=function(t,e){var n=a(t),l=!n&&r(t),c=!n&&!l&&o(t),d=!n&&!l&&!c&&_(t),h=n||l||c||d,f=h?i(t.length,String):[],p=f.length;for(var E in t)!e&&!u.call(t,E)||h&&("length"==E||c&&("offset"==E||"parent"==E)||d&&("buffer"==E||"byteLength"==E||"byteOffset"==E)||s(E,p))||f.push(E);return f}},{"./_baseTimes":63,"./_isIndex":100,"./isArguments":159,"./isArray":160,"./isBuffer":163,"./isTypedArray":175}],22:[function(t,e,n){e.exports=function(t,e){for(var n=-1,i=null==t?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}},{}],23:[function(t,e,n){e.exports=function(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}},{}],24:[function(t,e,n){e.exports=function(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}},{}],25:[function(t,e,n){var i=t("./_baseAssignValue"),r=t("./eq"),a=Object.prototype.hasOwnProperty;e.exports=function(t,e,n){var o=t[e];a.call(t,e)&&r(o,n)&&(void 0!==n||e in t)||i(t,e,n)}},{"./_baseAssignValue":27,"./eq":147}],26:[function(t,e,n){var i=t("./eq");e.exports=function(t,e){for(var n=t.length;n--;)if(i(t[n][0],e))return n;return-1}},{"./eq":147}],27:[function(t,e,n){var i=t("./_defineProperty");e.exports=function(t,e,n){"__proto__"==e&&i?i(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},{"./_defineProperty":78}],28:[function(t,e,n){var i=t("./_baseForOwn"),r=t("./_createBaseEach")(i);e.exports=r},{"./_baseForOwn":34,"./_createBaseEach":74}],29:[function(t,e,n){var i=t("./isSymbol");e.exports=function(t,e,n){for(var r=-1,a=t.length;++r<a;){var o=t[r],s=e(o);if(null!=s&&(void 0===_?s==s&&!i(s):n(s,_)))var _=s,u=o}return u}},{"./isSymbol":174}],30:[function(t,e,n){var i=t("./_baseEach");e.exports=function(t,e){var n=[];return i(t,function(t,i,r){e(t,i,r)&&n.push(t)}),n}},{"./_baseEach":28}],31:[function(t,e,n){e.exports=function(t,e,n,i){for(var r=t.length,a=n+(i?1:-1);i?a--:++a<r;)if(e(t[a],a,t))return a;return-1}},{}],32:[function(t,e,n){var i=t("./_arrayPush"),r=t("./_isFlattenable");e.exports=function t(e,n,a,o,s){var _=-1,u=e.length;for(a||(a=r),s||(s=[]);++_<u;){var l=e[_];n>0&&a(l)?n>1?t(l,n-1,a,o,s):i(s,l):o||(s[s.length]=l)}return s}},{"./_arrayPush":23,"./_isFlattenable":99}],33:[function(t,e,n){var i=t("./_createBaseFor")();e.exports=i},{"./_createBaseFor":75}],34:[function(t,e,n){var i=t("./_baseFor"),r=t("./keys");e.exports=function(t,e){return t&&i(t,e,r)}},{"./_baseFor":33,"./keys":177}],35:[function(t,e,n){var i=t("./_castPath"),r=t("./_toKey");e.exports=function(t,e){for(var n=0,a=(e=i(e,t)).length;null!=t&&n<a;)t=t[r(e[n++])];return n&&n==a?t:void 0}},{"./_castPath":70,"./_toKey":141}],36:[function(t,e,n){var i=t("./_arrayPush"),r=t("./isArray");e.exports=function(t,e,n){var a=e(t);return r(t)?a:i(a,n(t))}},{"./_arrayPush":23,"./isArray":160}],37:[function(t,e,n){var i=t("./_Symbol"),r=t("./_getRawTag"),a=t("./_objectToString"),o="[object Null]",s="[object Undefined]",_=i?i.toStringTag:void 0;e.exports=function(t){return null==t?void 0===t?s:o:_&&_ in Object(t)?r(t):a(t)}},{"./_Symbol":15,"./_getRawTag":89,"./_objectToString":124}],38:[function(t,e,n){e.exports=function(t,e){return t>e}},{}],39:[function(t,e,n){e.exports=function(t,e){return null!=t&&e in Object(t)}},{}],40:[function(t,e,n){var i=t("./_baseFindIndex"),r=t("./_baseIsNaN"),a=t("./_strictIndexOf");e.exports=function(t,e,n){return e==e?a(t,e,n):i(t,r,n)}},{"./_baseFindIndex":31,"./_baseIsNaN":45,"./_strictIndexOf":139}],41:[function(t,e,n){var i=t("./_baseGetTag"),r=t("./isObjectLike"),a="[object Arguments]";e.exports=function(t){return r(t)&&i(t)==a}},{"./_baseGetTag":37,"./isObjectLike":171}],42:[function(t,e,n){var i=t("./_baseIsEqualDeep"),r=t("./isObjectLike");e.exports=function t(e,n,a,o,s){return e===n||(null==e||null==n||!r(e)&&!r(n)?e!=e&&n!=n:i(e,n,a,o,t,s))}},{"./_baseIsEqualDeep":43,"./isObjectLike":171}],43:[function(t,e,n){var i=t("./_Stack"),r=t("./_equalArrays"),a=t("./_equalByTag"),o=t("./_equalObjects"),s=t("./_getTag"),_=t("./isArray"),u=t("./isBuffer"),l=t("./isTypedArray"),c=1,d="[object Arguments]",h="[object Array]",f="[object Object]",p=Object.prototype.hasOwnProperty;e.exports=function(t,e,n,E,A,v){var R=_(t),O=_(e),S=R?h:s(t),y=O?h:s(e),T=(S=S==d?f:S)==f,g=(y=y==d?f:y)==f,m=S==y;if(m&&u(t)){if(!u(e))return!1;R=!0,T=!1}if(m&&!T)return v||(v=new i),R||l(t)?r(t,e,n,E,A,v):a(t,e,S,n,E,A,v);if(!(n&c)){var I=T&&p.call(t,"__wrapped__"),b=g&&p.call(e,"__wrapped__");if(I||b){var P=I?t.value():t,D=b?e.value():e;return v||(v=new i),A(P,D,n,E,v)}}return!!m&&(v||(v=new i),o(t,e,n,E,A,v))}},{"./_Stack":14,"./_equalArrays":79,"./_equalByTag":80,"./_equalObjects":81,"./_getTag":91,"./isArray":160,"./isBuffer":163,"./isTypedArray":175}],44:[function(t,e,n){var i=t("./_Stack"),r=t("./_baseIsEqual"),a=1,o=2;e.exports=function(t,e,n,s){var _=n.length,u=_,l=!s;if(null==t)return!u;for(t=Object(t);_--;){var c=n[_];if(l&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++_<u;){var d=(c=n[_])[0],h=t[d],f=c[1];if(l&&c[2]){if(void 0===h&&!(d in t))return!1}else{var p=new i;if(s)var E=s(h,f,d,t,e,p);if(!(void 0===E?r(f,h,a|o,s,p):E))return!1}}return!0}},{"./_Stack":14,"./_baseIsEqual":42}],45:[function(t,e,n){e.exports=function(t){return t!=t}},{}],46:[function(t,e,n){var i=t("./isFunction"),r=t("./_isMasked"),a=t("./isObject"),o=t("./_toSource"),s=/^\[object .+?Constructor\]$/,_=Function.prototype,u=Object.prototype,l=_.toString,c=u.hasOwnProperty,d=RegExp("^"+l.call(c).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(t){return!(!a(t)||r(t))&&(i(t)?d:s).test(o(t))}},{"./_isMasked":104,"./_toSource":142,"./isFunction":165,"./isObject":170}],47:[function(t,e,n){var i=t("./_baseGetTag"),r=t("./isLength"),a=t("./isObjectLike"),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,e.exports=function(t){return a(t)&&r(t.length)&&!!o[i(t)]}},{"./_baseGetTag":37,"./isLength":167,"./isObjectLike":171}],48:[function(t,e,n){var i=t("./_baseMatches"),r=t("./_baseMatchesProperty"),a=t("./identity"),o=t("./isArray"),s=t("./property");e.exports=function(t){return"function"==typeof t?t:null==t?a:"object"==typeof t?o(t)?r(t[0],t[1]):i(t):s(t)}},{"./_baseMatches":52,"./_baseMatchesProperty":53,"./identity":156,"./isArray":160,"./property":186}],49:[function(t,e,n){var i=t("./_isPrototype"),r=t("./_nativeKeys"),a=Object.prototype.hasOwnProperty;e.exports=function(t){if(!i(t))return r(t);var e=[];for(var n in Object(t))a.call(t,n)&&"constructor"!=n&&e.push(n);return e}},{"./_isPrototype":105,"./_nativeKeys":121}],50:[function(t,e,n){var i=t("./isObject"),r=t("./_isPrototype"),a=t("./_nativeKeysIn"),o=Object.prototype.hasOwnProperty;e.exports=function(t){if(!i(t))return a(t);var e=r(t),n=[];for(var s in t)("constructor"!=s||!e&&o.call(t,s))&&n.push(s);return n}},{"./_isPrototype":105,"./_nativeKeysIn":122,"./isObject":170}],51:[function(t,e,n){var i=t("./_baseEach"),r=t("./isArrayLike");e.exports=function(t,e){var n=-1,a=r(t)?Array(t.length):[];return i(t,function(t,i,r){a[++n]=e(t,i,r)}),a}},{"./_baseEach":28,"./isArrayLike":161}],52:[function(t,e,n){var i=t("./_baseIsMatch"),r=t("./_getMatchData"),a=t("./_matchesStrictComparable");e.exports=function(t){var e=r(t);return 1==e.length&&e[0][2]?a(e[0][0],e[0][1]):function(n){return n===t||i(n,t,e)}}},{"./_baseIsMatch":44,"./_getMatchData":86,"./_matchesStrictComparable":118}],53:[function(t,e,n){var i=t("./_baseIsEqual"),r=t("./get"),a=t("./hasIn"),o=t("./_isKey"),s=t("./_isStrictComparable"),_=t("./_matchesStrictComparable"),u=t("./_toKey"),l=1,c=2;e.exports=function(t,e){return o(t)&&s(e)?_(u(t),e):function(n){var o=r(n,t);return void 0===o&&o===e?a(n,t):i(e,o,l|c)}}},{"./_baseIsEqual":42,"./_isKey":102,"./_isStrictComparable":106,"./_matchesStrictComparable":118,"./_toKey":141,"./get":154,"./hasIn":155}],54:[function(t,e,n){var i=t("./_basePickBy"),r=t("./hasIn");e.exports=function(t,e){return i(t,e,function(e,n){return r(t,n)})}},{"./_basePickBy":55,"./hasIn":155}],55:[function(t,e,n){var i=t("./_baseGet"),r=t("./_baseSet"),a=t("./_castPath");e.exports=function(t,e,n){for(var o=-1,s=e.length,_={};++o<s;){var u=e[o],l=i(t,u);n(l,u)&&r(_,a(u,t),l)}return _}},{"./_baseGet":35,"./_baseSet":60,"./_castPath":70}],56:[function(t,e,n){e.exports=function(t){return function(e){return null==e?void 0:e[t]}}},{}],57:[function(t,e,n){var i=t("./_baseGet");e.exports=function(t){return function(e){return i(e,t)}}},{"./_baseGet":35}],58:[function(t,e,n){var i=t("./_baseUnset"),r=t("./_isIndex"),a=Array.prototype.splice;e.exports=function(t,e){for(var n=t?e.length:0,o=n-1;n--;){var s=e[n];if(n==o||s!==_){var _=s;r(s)?a.call(t,s,1):i(t,s)}}return t}},{"./_baseUnset":66,"./_isIndex":100}],59:[function(t,e,n){var i=t("./identity"),r=t("./_overRest"),a=t("./_setToString");e.exports=function(t,e){return a(r(t,e,i),t+"")}},{"./_overRest":126,"./_setToString":132,"./identity":156}],60:[function(t,e,n){var i=t("./_assignValue"),r=t("./_castPath"),a=t("./_isIndex"),o=t("./isObject"),s=t("./_toKey");e.exports=function(t,e,n,_){if(!o(t))return t;for(var u=-1,l=(e=r(e,t)).length,c=l-1,d=t;null!=d&&++u<l;){var h=s(e[u]),f=n;if(u!=c){var p=d[h];void 0===(f=_?_(p,h,d):void 0)&&(f=o(p)?p:a(e[u+1])?[]:{})}i(d,h,f),d=d[h]}return t}},{"./_assignValue":25,"./_castPath":70,"./_isIndex":100,"./_toKey":141,"./isObject":170}],61:[function(t,e,n){var i=t("./constant"),r=t("./_defineProperty"),a=t("./identity"),o=r?function(t,e){return r(t,"toString",{configurable:!0,enumerable:!1,value:i(e),writable:!0})}:a;e.exports=o},{"./_defineProperty":78,"./constant":145,"./identity":156}],62:[function(t,e,n){e.exports=function(t,e,n){var i=-1,r=t.length;e<0&&(e=-e>r?0:r+e),(n=n>r?r:n)<0&&(n+=r),r=e>n?0:n-e>>>0,e>>>=0;for(var a=Array(r);++i<r;)a[i]=t[i+e];return a}},{}],63:[function(t,e,n){e.exports=function(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}},{}],64:[function(t,e,n){var i=t("./_Symbol"),r=t("./_arrayMap"),a=t("./isArray"),o=t("./isSymbol"),s=1/0,_=i?i.prototype:void 0,u=_?_.toString:void 0;e.exports=function t(e){if("string"==typeof e)return e;if(a(e))return r(e,t)+"";if(o(e))return u?u.call(e):"";var n=e+"";return"0"==n&&1/e==-s?"-0":n}},{"./_Symbol":15,"./_arrayMap":22,"./isArray":160,"./isSymbol":174}],65:[function(t,e,n){e.exports=function(t){return function(e){return t(e)}}},{}],66:[function(t,e,n){var i=t("./_castPath"),r=t("./last"),a=t("./_parent"),o=t("./_toKey");e.exports=function(t,e){return e=i(e,t),null==(t=a(t,e))||delete t[o(r(e))]}},{"./_castPath":70,"./_parent":127,"./_toKey":141,"./last":179}],67:[function(t,e,n){var i=t("./_arrayMap");e.exports=function(t,e){return i(e,function(e){return t[e]})}},{"./_arrayMap":22}],68:[function(t,e,n){e.exports=function(t,e){return t.has(e)}},{}],69:[function(t,e,n){var i=t("./identity");e.exports=function(t){return"function"==typeof t?t:i}},{"./identity":156}],70:[function(t,e,n){var i=t("./isArray"),r=t("./_isKey"),a=t("./_stringToPath"),o=t("./toString");e.exports=function(t,e){return i(t)?t:r(t,e)?[t]:a(o(t))}},{"./_isKey":102,"./_stringToPath":140,"./isArray":160,"./toString":193}],71:[function(t,e,n){var i=t("./_assignValue"),r=t("./_baseAssignValue");e.exports=function(t,e,n,a){var o=!n;n||(n={});for(var s=-1,_=e.length;++s<_;){var u=e[s],l=a?a(n[u],t[u],u,n,t):void 0;void 0===l&&(l=t[u]),o?r(n,u,l):i(n,u,l)}return n}},{"./_assignValue":25,"./_baseAssignValue":27}],72:[function(t,e,n){var i=t("./_root")["__core-js_shared__"];e.exports=i},{"./_root":128}],73:[function(t,e,n){var i=t("./_baseRest"),r=t("./_isIterateeCall");e.exports=function(t){return i(function(e,n){var i=-1,a=n.length,o=a>1?n[a-1]:void 0,s=a>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(a--,o):void 0,s&&r(n[0],n[1],s)&&(o=a<3?void 0:o,a=1),e=Object(e);++i<a;){var _=n[i];_&&t(e,_,i,o)}return e})}},{"./_baseRest":59,"./_isIterateeCall":101}],74:[function(t,e,n){var i=t("./isArrayLike");e.exports=function(t,e){return function(n,r){if(null==n)return n;if(!i(n))return t(n,r);for(var a=n.length,o=e?a:-1,s=Object(n);(e?o--:++o<a)&&!1!==r(s[o],o,s););return n}}},{"./isArrayLike":161}],75:[function(t,e,n){e.exports=function(t){return function(e,n,i){for(var r=-1,a=Object(e),o=i(e),s=o.length;s--;){var _=o[t?s:++r];if(!1===n(a[_],_,a))break}return e}}},{}],76:[function(t,e,n){var i=t("./_baseIteratee"),r=t("./isArrayLike"),a=t("./keys");e.exports=function(t){return function(e,n,o){var s=Object(e);if(!r(e)){var _=i(n,3);e=a(e),n=function(t){return _(s[t],t,s)}}var u=t(e,n,o);return u>-1?s[_?e[u]:u]:void 0}}},{"./_baseIteratee":48,"./isArrayLike":161,"./keys":177}],77:[function(t,e,n){var i=t("./eq"),r=Object.prototype,a=r.hasOwnProperty;e.exports=function(t,e,n,o){return void 0===t||i(t,r[n])&&!a.call(o,n)?e:t}},{"./eq":147}],78:[function(t,e,n){var i=t("./_getNative"),r=function(){try{var t=i(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();e.exports=r},{"./_getNative":87}],79:[function(t,e,n){var i=t("./_SetCache"),r=t("./_arraySome"),a=t("./_cacheHas"),o=1,s=2;e.exports=function(t,e,n,_,u,l){var c=n&o,d=t.length,h=e.length;if(d!=h&&!(c&&h>d))return!1;var f=l.get(t);if(f&&l.get(e))return f==e;var p=-1,E=!0,A=n&s?new i:void 0;for(l.set(t,e),l.set(e,t);++p<d;){var v=t[p],R=e[p];if(_)var O=c?_(R,v,p,e,t,l):_(v,R,p,t,e,l);if(void 0!==O){if(O)continue;E=!1;break}if(A){if(!r(e,function(t,e){if(!a(A,e)&&(v===t||u(v,t,n,_,l)))return A.push(e)})){E=!1;break}}else if(v!==R&&!u(v,R,n,_,l)){E=!1;break}}return l.delete(t),l.delete(e),E}},{"./_SetCache":13,"./_arraySome":24,"./_cacheHas":68}],80:[function(t,e,n){var i=t("./_Symbol"),r=t("./_Uint8Array"),a=t("./eq"),o=t("./_equalArrays"),s=t("./_mapToArray"),_=t("./_setToArray"),u=1,l=2,c="[object Boolean]",d="[object Date]",h="[object Error]",f="[object Map]",p="[object Number]",E="[object RegExp]",A="[object Set]",v="[object String]",R="[object Symbol]",O="[object ArrayBuffer]",S="[object DataView]",y=i?i.prototype:void 0,T=y?y.valueOf:void 0;e.exports=function(t,e,n,i,y,g,m){switch(n){case S:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case O:return!(t.byteLength!=e.byteLength||!g(new r(t),new r(e)));case c:case d:case p:return a(+t,+e);case h:return t.name==e.name&&t.message==e.message;case E:case v:return t==e+"";case f:var I=s;case A:var b=i&u;if(I||(I=_),t.size!=e.size&&!b)return!1;var P=m.get(t);if(P)return P==e;i|=l,m.set(t,e);var D=o(I(t),I(e),i,y,g,m);return m.delete(t),D;case R:if(T)return T.call(t)==T.call(e)}return!1}},{"./_Symbol":15,"./_Uint8Array":16,"./_equalArrays":79,"./_mapToArray":117,"./_setToArray":131,"./eq":147}],81:[function(t,e,n){var i=t("./_getAllKeys"),r=1,a=Object.prototype.hasOwnProperty;e.exports=function(t,e,n,o,s,_){var u=n&r,l=i(t),c=l.length;if(c!=i(e).length&&!u)return!1;for(var d=c;d--;){var h=l[d];if(!(u?h in e:a.call(e,h)))return!1}var f=_.get(t);if(f&&_.get(e))return f==e;var p=!0;_.set(t,e),_.set(e,t);for(var E=u;++d<c;){var A=t[h=l[d]],v=e[h];if(o)var R=u?o(v,A,h,e,t,_):o(A,v,h,t,e,_);if(!(void 0===R?A===v||s(A,v,n,o,_):R)){p=!1;break}E||(E="constructor"==h)}if(p&&!E){var O=t.constructor,S=e.constructor;O!=S&&"constructor"in t&&"constructor"in e&&!("function"==typeof O&&O instanceof O&&"function"==typeof S&&S instanceof S)&&(p=!1)}return _.delete(t),_.delete(e),p}},{"./_getAllKeys":84}],82:[function(t,e,n){var i=t("./flatten"),r=t("./_overRest"),a=t("./_setToString");e.exports=function(t){return a(r(t,void 0,i),t+"")}},{"./_overRest":126,"./_setToString":132,"./flatten":152}],83:[function(t,e,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],84:[function(t,e,n){var i=t("./_baseGetAllKeys"),r=t("./_getSymbols"),a=t("./keys");e.exports=function(t){return i(t,a,r)}},{"./_baseGetAllKeys":36,"./_getSymbols":90,"./keys":177}],85:[function(t,e,n){var i=t("./_isKeyable");e.exports=function(t,e){var n=t.__data__;return i(e)?n["string"==typeof e?"string":"hash"]:n.map}},{"./_isKeyable":103}],86:[function(t,e,n){var i=t("./_isStrictComparable"),r=t("./keys");e.exports=function(t){for(var e=r(t),n=e.length;n--;){var a=e[n],o=t[a];e[n]=[a,o,i(o)]}return e}},{"./_isStrictComparable":106,"./keys":177}],87:[function(t,e,n){var i=t("./_baseIsNative"),r=t("./_getValue");e.exports=function(t,e){var n=r(t,e);return i(n)?n:void 0}},{"./_baseIsNative":46,"./_getValue":92}],88:[function(t,e,n){var i=t("./_overArg")(Object.getPrototypeOf,Object);e.exports=i},{"./_overArg":125}],89:[function(t,e,n){var i=t("./_Symbol"),r=Object.prototype,a=r.hasOwnProperty,o=r.toString,s=i?i.toStringTag:void 0;e.exports=function(t){var e=a.call(t,s),n=t[s];try{t[s]=void 0;var i=!0}catch(t){}var r=o.call(t);return i&&(e?t[s]=n:delete t[s]),r}},{"./_Symbol":15}],90:[function(t,e,n){var i=t("./_arrayFilter"),r=t("./stubArray"),a=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols,s=o?function(t){return null==t?[]:(t=Object(t),i(o(t),function(e){return a.call(t,e)}))}:r;e.exports=s},{"./_arrayFilter":20,"./stubArray":188}],91:[function(t,e,n){var i=t("./_DataView"),r=t("./_Map"),a=t("./_Promise"),o=t("./_Set"),s=t("./_WeakMap"),_=t("./_baseGetTag"),u=t("./_toSource"),l="[object Promise]",c="[object WeakMap]",d="[object DataView]",h=u(i),f=u(r),p=u(a),E=u(o),A=u(s),v=_;(i&&v(new i(new ArrayBuffer(1)))!=d||r&&"[object Map]"!=v(new r)||a&&v(a.resolve())!=l||o&&"[object Set]"!=v(new o)||s&&v(new s)!=c)&&(v=function(t){var e=_(t),n="[object Object]"==e?t.constructor:void 0,i=n?u(n):"";if(i)switch(i){case h:return d;case f:return"[object Map]";case p:return l;case E:return"[object Set]";case A:return c}return e}),e.exports=v},{"./_DataView":6,"./_Map":9,"./_Promise":11,"./_Set":12,"./_WeakMap":17,"./_baseGetTag":37,"./_toSource":142}],92:[function(t,e,n){e.exports=function(t,e){return null==t?void 0:t[e]}},{}],93:[function(t,e,n){var i=t("./_castPath"),r=t("./isArguments"),a=t("./isArray"),o=t("./_isIndex"),s=t("./isLength"),_=t("./_toKey");e.exports=function(t,e,n){for(var u=-1,l=(e=i(e,t)).length,c=!1;++u<l;){var d=_(e[u]);if(!(c=null!=t&&n(t,d)))break;t=t[d]}return c||++u!=l?c:!!(l=null==t?0:t.length)&&s(l)&&o(d,l)&&(a(t)||r(t))}},{"./_castPath":70,"./_isIndex":100,"./_toKey":141,"./isArguments":159,"./isArray":160,"./isLength":167}],94:[function(t,e,n){var i=t("./_nativeCreate");e.exports=function(){this.__data__=i?i(null):{},this.size=0}},{"./_nativeCreate":120}],95:[function(t,e,n){e.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},{}],96:[function(t,e,n){var i=t("./_nativeCreate"),r="__lodash_hash_undefined__",a=Object.prototype.hasOwnProperty;e.exports=function(t){var e=this.__data__;if(i){var n=e[t];return n===r?void 0:n}return a.call(e,t)?e[t]:void 0}},{"./_nativeCreate":120}],97:[function(t,e,n){var i=t("./_nativeCreate"),r=Object.prototype.hasOwnProperty;e.exports=function(t){var e=this.__data__;return i?void 0!==e[t]:r.call(e,t)}},{"./_nativeCreate":120}],98:[function(t,e,n){var i=t("./_nativeCreate"),r="__lodash_hash_undefined__";e.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=i&&void 0===e?r:e,this}},{"./_nativeCreate":120}],99:[function(t,e,n){var i=t("./_Symbol"),r=t("./isArguments"),a=t("./isArray"),o=i?i.isConcatSpreadable:void 0;e.exports=function(t){return a(t)||r(t)||!!(o&&t&&t[o])}},{"./_Symbol":15,"./isArguments":159,"./isArray":160}],100:[function(t,e,n){var i=9007199254740991,r=/^(?:0|[1-9]\d*)$/;e.exports=function(t,e){return!!(e=null==e?i:e)&&("number"==typeof t||r.test(t))&&t>-1&&t%1==0&&t<e}},{}],101:[function(t,e,n){var i=t("./eq"),r=t("./isArrayLike"),a=t("./_isIndex"),o=t("./isObject");e.exports=function(t,e,n){if(!o(n))return!1;var s=typeof e;return!!("number"==s?r(n)&&a(e,n.length):"string"==s&&e in n)&&i(n[e],t)}},{"./_isIndex":100,"./eq":147,"./isArrayLike":161,"./isObject":170}],102:[function(t,e,n){var i=t("./isArray"),r=t("./isSymbol"),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;e.exports=function(t,e){if(i(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!r(t))||o.test(t)||!a.test(t)||null!=e&&t in Object(e)}},{"./isArray":160,"./isSymbol":174}],103:[function(t,e,n){e.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},{}],104:[function(t,e,n){var i,r=t("./_coreJsData"),a=(i=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"";e.exports=function(t){return!!a&&a in t}},{"./_coreJsData":72}],105:[function(t,e,n){var i=Object.prototype;e.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||i)}},{}],106:[function(t,e,n){var i=t("./isObject");e.exports=function(t){return t==t&&!i(t)}},{"./isObject":170}],107:[function(t,e,n){e.exports=function(){this.__data__=[],this.size=0}},{}],108:[function(t,e,n){var i=t("./_assocIndexOf"),r=Array.prototype.splice;e.exports=function(t){var e=this.__data__,n=i(e,t);return!(n<0||(n==e.length-1?e.pop():r.call(e,n,1),--this.size,0))}},{"./_assocIndexOf":26}],109:[function(t,e,n){var i=t("./_assocIndexOf");e.exports=function(t){var e=this.__data__,n=i(e,t);return n<0?void 0:e[n][1]}},{"./_assocIndexOf":26}],110:[function(t,e,n){var i=t("./_assocIndexOf");e.exports=function(t){return i(this.__data__,t)>-1}},{"./_assocIndexOf":26}],111:[function(t,e,n){var i=t("./_assocIndexOf");e.exports=function(t,e){var n=this.__data__,r=i(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}},{"./_assocIndexOf":26}],112:[function(t,e,n){var i=t("./_Hash"),r=t("./_ListCache"),a=t("./_Map");e.exports=function(){this.size=0,this.__data__={hash:new i,map:new(a||r),string:new i}}},{"./_Hash":7,"./_ListCache":8,"./_Map":9}],113:[function(t,e,n){var i=t("./_getMapData");e.exports=function(t){var e=i(this,t).delete(t);return this.size-=e?1:0,e}},{"./_getMapData":85}],114:[function(t,e,n){var i=t("./_getMapData");e.exports=function(t){return i(this,t).get(t)}},{"./_getMapData":85}],115:[function(t,e,n){var i=t("./_getMapData");e.exports=function(t){return i(this,t).has(t)}},{"./_getMapData":85}],116:[function(t,e,n){var i=t("./_getMapData");e.exports=function(t,e){var n=i(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}},{"./_getMapData":85}],117:[function(t,e,n){e.exports=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t,i){n[++e]=[i,t]}),n}},{}],118:[function(t,e,n){e.exports=function(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}}},{}],119:[function(t,e,n){var i=t("./memoize"),r=500;e.exports=function(t){var e=i(t,function(t){return n.size===r&&n.clear(),t}),n=e.cache;return e}},{"./memoize":183}],120:[function(t,e,n){var i=t("./_getNative")(Object,"create");e.exports=i},{"./_getNative":87}],121:[function(t,e,n){var i=t("./_overArg")(Object.keys,Object);e.exports=i},{"./_overArg":125}],122:[function(t,e,n){e.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},{}],123:[function(t,e,n){var i=t("./_freeGlobal"),r="object"==typeof n&&n&&!n.nodeType&&n,a=r&&"object"==typeof e&&e&&!e.nodeType&&e,o=a&&a.exports===r&&i.process,s=function(){try{return o&&o.binding&&o.binding("util")}catch(t){}}();e.exports=s},{"./_freeGlobal":83}],124:[function(t,e,n){var i=Object.prototype.toString;e.exports=function(t){return i.call(t)}},{}],125:[function(t,e,n){e.exports=function(t,e){return function(n){return t(e(n))}}},{}],126:[function(t,e,n){var i=t("./_apply"),r=Math.max;e.exports=function(t,e,n){return e=r(void 0===e?t.length-1:e,0),function(){for(var a=arguments,o=-1,s=r(a.length-e,0),_=Array(s);++o<s;)_[o]=a[e+o];o=-1;for(var u=Array(e+1);++o<e;)u[o]=a[o];return u[e]=n(_),i(t,this,u)}}},{"./_apply":18}],127:[function(t,e,n){var i=t("./_baseGet"),r=t("./_baseSlice");e.exports=function(t,e){return e.length<2?t:i(t,r(e,0,-1))}},{"./_baseGet":35,"./_baseSlice":62}],128:[function(t,e,n){var i=t("./_freeGlobal"),r="object"==typeof self&&self&&self.Object===Object&&self,a=i||r||Function("return this")();e.exports=a},{"./_freeGlobal":83}],129:[function(t,e,n){var i="__lodash_hash_undefined__";e.exports=function(t){return this.__data__.set(t,i),this}},{}],130:[function(t,e,n){e.exports=function(t){return this.__data__.has(t)}},{}],131:[function(t,e,n){e.exports=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}},{}],132:[function(t,e,n){var i=t("./_baseSetToString"),r=t("./_shortOut")(i);e.exports=r},{"./_baseSetToString":61,"./_shortOut":133}],133:[function(t,e,n){var i=800,r=16,a=Date.now;e.exports=function(t){var e=0,n=0;return function(){var o=a(),s=r-(o-n);if(n=o,s>0){if(++e>=i)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}},{}],134:[function(t,e,n){var i=t("./_ListCache");e.exports=function(){this.__data__=new i,this.size=0}},{"./_ListCache":8}],135:[function(t,e,n){e.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},{}],136:[function(t,e,n){e.exports=function(t){return this.__data__.get(t)}},{}],137:[function(t,e,n){e.exports=function(t){return this.__data__.has(t)}},{}],138:[function(t,e,n){var i=t("./_ListCache"),r=t("./_Map"),a=t("./_MapCache"),o=200;e.exports=function(t,e){var n=this.__data__;if(n instanceof i){var s=n.__data__;if(!r||s.length<o-1)return s.push([t,e]),this.size=++n.size,this;n=this.__data__=new a(s)}return n.set(t,e),this.size=n.size,this}},{"./_ListCache":8,"./_Map":9,"./_MapCache":10}],139:[function(t,e,n){e.exports=function(t,e,n){for(var i=n-1,r=t.length;++i<r;)if(t[i]===e)return i;return-1}},{}],140:[function(t,e,n){var i=/^\./,r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,o=t("./_memoizeCapped")(function(t){var e=[];return i.test(t)&&e.push(""),t.replace(r,function(t,n,i,r){e.push(i?r.replace(a,"$1"):n||t)}),e});e.exports=o},{"./_memoizeCapped":119}],141:[function(t,e,n){var i=t("./isSymbol"),r=1/0;e.exports=function(t){if("string"==typeof t||i(t))return t;var e=t+"";return"0"==e&&1/t==-r?"-0":e}},{"./isSymbol":174}],142:[function(t,e,n){var i=Function.prototype.toString;e.exports=function(t){if(null!=t){try{return i.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},{}],143:[function(t,e,n){var i=t("./_copyObject"),r=t("./_createAssigner"),a=t("./keysIn"),o=r(function(t,e){i(e,a(e),t)});e.exports=o},{"./_copyObject":71,"./_createAssigner":73,"./keysIn":178}],144:[function(t,e,n){var i=t("./_copyObject"),r=t("./_createAssigner"),a=t("./keysIn"),o=r(function(t,e,n,r){i(e,a(e),t,r)});e.exports=o},{"./_copyObject":71,"./_createAssigner":73,"./keysIn":178}],145:[function(t,e,n){e.exports=function(t){return function(){return t}}},{}],146:[function(t,e,n){var i=t("./_apply"),r=t("./assignInWith"),a=t("./_baseRest"),o=t("./_customDefaultsAssignIn"),s=a(function(t){return t.push(void 0,o),i(r,void 0,t)});e.exports=s},{"./_apply":18,"./_baseRest":59,"./_customDefaultsAssignIn":77,"./assignInWith":144}],147:[function(t,e,n){e.exports=function(t,e){return t===e||t!=t&&e!=e}},{}],148:[function(t,e,n){e.exports=t("./assignIn")},{"./assignIn":143}],149:[function(t,e,n){var i=t("./_arrayFilter"),r=t("./_baseFilter"),a=t("./_baseIteratee"),o=t("./isArray");e.exports=function(t,e){return(o(t)?i:r)(t,a(e,3))}},{"./_arrayFilter":20,"./_baseFilter":30,"./_baseIteratee":48,"./isArray":160}],150:[function(t,e,n){var i=t("./_createFind")(t("./findIndex"));e.exports=i},{"./_createFind":76,"./findIndex":151}],151:[function(t,e,n){var i=t("./_baseFindIndex"),r=t("./_baseIteratee"),a=t("./toInteger"),o=Math.max;e.exports=function(t,e,n){var s=null==t?0:t.length;if(!s)return-1;var _=null==n?0:a(n);return _<0&&(_=o(s+_,0)),i(t,r(e,3),_)}},{"./_baseFindIndex":31,"./_baseIteratee":48,"./toInteger":191}],152:[function(t,e,n){var i=t("./_baseFlatten");e.exports=function(t){return null!=t&&t.length?i(t,1):[]}},{"./_baseFlatten":32}],153:[function(t,e,n){var i=t("./_arrayEach"),r=t("./_baseEach"),a=t("./_castFunction"),o=t("./isArray");e.exports=function(t,e){return(o(t)?i:r)(t,a(e))}},{"./_arrayEach":19,"./_baseEach":28,"./_castFunction":69,"./isArray":160}],154:[function(t,e,n){var i=t("./_baseGet");e.exports=function(t,e,n){var r=null==t?void 0:i(t,e);return void 0===r?n:r}},{"./_baseGet":35}],155:[function(t,e,n){var i=t("./_baseHasIn"),r=t("./_hasPath");e.exports=function(t,e){return null!=t&&r(t,e,i)}},{"./_baseHasIn":39,"./_hasPath":93}],156:[function(t,e,n){e.exports=function(t){return t}},{}],157:[function(t,e,n){var i=t("./_baseIndexOf"),r=t("./isArrayLike"),a=t("./isString"),o=t("./toInteger"),s=t("./values"),_=Math.max;e.exports=function(t,e,n,u){t=r(t)?t:s(t),n=n&&!u?o(n):0;var l=t.length;return n<0&&(n=_(l+n,0)),a(t)?n<=l&&t.indexOf(e,n)>-1:!!l&&i(t,e,n)>-1}},{"./_baseIndexOf":40,"./isArrayLike":161,"./isString":173,"./toInteger":191,"./values":194}],158:[function(t,e,n){var i=t("./_baseIndexOf"),r=t("./toInteger"),a=Math.max;e.exports=function(t,e,n){var o=null==t?0:t.length;if(!o)return-1;var s=null==n?0:r(n);return s<0&&(s=a(o+s,0)),i(t,e,s)}},{"./_baseIndexOf":40,"./toInteger":191}],159:[function(t,e,n){var i=t("./_baseIsArguments"),r=t("./isObjectLike"),a=Object.prototype,o=a.hasOwnProperty,s=a.propertyIsEnumerable,_=i(function(){return arguments}())?i:function(t){return r(t)&&o.call(t,"callee")&&!s.call(t,"callee")};e.exports=_},{"./_baseIsArguments":41,"./isObjectLike":171}],160:[function(t,e,n){var i=Array.isArray;e.exports=i},{}],161:[function(t,e,n){var i=t("./isFunction"),r=t("./isLength");e.exports=function(t){return null!=t&&r(t.length)&&!i(t)}},{"./isFunction":165,"./isLength":167}],162:[function(t,e,n){var i=t("./_baseGetTag"),r=t("./isObjectLike"),a="[object Boolean]";e.exports=function(t){return!0===t||!1===t||r(t)&&i(t)==a}},{"./_baseGetTag":37,"./isObjectLike":171}],163:[function(t,e,n){var i=t("./_root"),r=t("./stubFalse"),a="object"==typeof n&&n&&!n.nodeType&&n,o=a&&"object"==typeof e&&e&&!e.nodeType&&e,s=o&&o.exports===a?i.Buffer:void 0,_=(s?s.isBuffer:void 0)||r;e.exports=_},{"./_root":128,"./stubFalse":189}],164:[function(t,e,n){var i=t("./isObjectLike"),r=t("./isPlainObject");e.exports=function(t){return i(t)&&1===t.nodeType&&!r(t)}},{"./isObjectLike":171,"./isPlainObject":172}],165:[function(t,e,n){var i=t("./_baseGetTag"),r=t("./isObject"),a="[object AsyncFunction]",o="[object Function]",s="[object GeneratorFunction]",_="[object Proxy]";e.exports=function(t){if(!r(t))return!1;var e=i(t);return e==o||e==s||e==a||e==_}},{"./_baseGetTag":37,"./isObject":170}],166:[function(t,e,n){var i=t("./toInteger");e.exports=function(t){return"number"==typeof t&&t==i(t)}},{"./toInteger":191}],167:[function(t,e,n){var i=9007199254740991;e.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=i}},{}],168:[function(t,e,n){var i=t("./isNumber");e.exports=function(t){return i(t)&&t!=+t}},{"./isNumber":169}],169:[function(t,e,n){var i=t("./_baseGetTag"),r=t("./isObjectLike"),a="[object Number]";e.exports=function(t){return"number"==typeof t||r(t)&&i(t)==a}},{"./_baseGetTag":37,"./isObjectLike":171}],170:[function(t,e,n){e.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},{}],171:[function(t,e,n){e.exports=function(t){return null!=t&&"object"==typeof t}},{}],172:[function(t,e,n){var i=t("./_baseGetTag"),r=t("./_getPrototype"),a=t("./isObjectLike"),o="[object Object]",s=Function.prototype,_=Object.prototype,u=s.toString,l=_.hasOwnProperty,c=u.call(Object);e.exports=function(t){if(!a(t)||i(t)!=o)return!1;var e=r(t);if(null===e)return!0;var n=l.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&u.call(n)==c}},{"./_baseGetTag":37,"./_getPrototype":88,"./isObjectLike":171}],173:[function(t,e,n){var i=t("./_baseGetTag"),r=t("./isArray"),a=t("./isObjectLike"),o="[object String]";e.exports=function(t){return"string"==typeof t||!r(t)&&a(t)&&i(t)==o}},{"./_baseGetTag":37,"./isArray":160,"./isObjectLike":171}],174:[function(t,e,n){var i=t("./_baseGetTag"),r=t("./isObjectLike"),a="[object Symbol]";e.exports=function(t){return"symbol"==typeof t||r(t)&&i(t)==a}},{"./_baseGetTag":37,"./isObjectLike":171}],175:[function(t,e,n){var i=t("./_baseIsTypedArray"),r=t("./_baseUnary"),a=t("./_nodeUtil"),o=a&&a.isTypedArray,s=o?r(o):i;e.exports=s},{"./_baseIsTypedArray":47,"./_baseUnary":65,"./_nodeUtil":123}],176:[function(t,e,n){var i=Array.prototype.join;e.exports=function(t,e){return null==t?"":i.call(t,e)}},{}],177:[function(t,e,n){var i=t("./_arrayLikeKeys"),r=t("./_baseKeys"),a=t("./isArrayLike");e.exports=function(t){return a(t)?i(t):r(t)}},{"./_arrayLikeKeys":21,"./_baseKeys":49,"./isArrayLike":161}],178:[function(t,e,n){var i=t("./_arrayLikeKeys"),r=t("./_baseKeysIn"),a=t("./isArrayLike");e.exports=function(t){return a(t)?i(t,!0):r(t)}},{"./_arrayLikeKeys":21,"./_baseKeysIn":50,"./isArrayLike":161}],179:[function(t,e,n){e.exports=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}},{}],180:[function(t,e,n){var i=t("./_arrayMap"),r=t("./_baseIteratee"),a=t("./_baseMap"),o=t("./isArray");e.exports=function(t,e){return(o(t)?i:a)(t,r(e,3))}},{"./_arrayMap":22,"./_baseIteratee":48,"./_baseMap":51,"./isArray":160}],181:[function(t,e,n){var i=t("./_baseAssignValue"),r=t("./_baseForOwn"),a=t("./_baseIteratee");e.exports=function(t,e){var n={};return e=a(e,3),r(t,function(t,r,a){i(n,r,e(t,r,a))}),n}},{"./_baseAssignValue":27,"./_baseForOwn":34,"./_baseIteratee":48}],182:[function(t,e,n){var i=t("./_baseExtremum"),r=t("./_baseGt"),a=t("./identity");e.exports=function(t){return t&&t.length?i(t,a,r):void 0}},{"./_baseExtremum":29,"./_baseGt":38,"./identity":156}],183:[function(t,e,n){var i=t("./_MapCache"),r="Expected a function";function a(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(r);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],a=n.cache;if(a.has(r))return a.get(r);var o=t.apply(this,i);return n.cache=a.set(r,o)||a,o};return n.cache=new(a.Cache||i),n}a.Cache=i,e.exports=a},{"./_MapCache":10}],184:[function(t,e,n){var i=t("./_root");e.exports=function(){return i.Date.now()}},{"./_root":128}],185:[function(t,e,n){var i=t("./_basePick"),r=t("./_flatRest")(function(t,e){return null==t?{}:i(t,e)});e.exports=r},{"./_basePick":54,"./_flatRest":82}],186:[function(t,e,n){var i=t("./_baseProperty"),r=t("./_basePropertyDeep"),a=t("./_isKey"),o=t("./_toKey");e.exports=function(t){return a(t)?i(o(t)):r(t)}},{"./_baseProperty":56,"./_basePropertyDeep":57,"./_isKey":102,"./_toKey":141}],187:[function(t,e,n){var i=t("./_baseIteratee"),r=t("./_basePullAt");e.exports=function(t,e){var n=[];if(!t||!t.length)return n;var a=-1,o=[],s=t.length;for(e=i(e,3);++a<s;){var _=t[a];e(_,a,t)&&(n.push(_),o.push(a))}return r(t,o),n}},{"./_baseIteratee":48,"./_basePullAt":58}],188:[function(t,e,n){e.exports=function(){return[]}},{}],189:[function(t,e,n){e.exports=function(){return!1}},{}],190:[function(t,e,n){var i=t("./toNumber"),r=1/0,a=1.7976931348623157e308;e.exports=function(t){return t?(t=i(t))===r||t===-r?(t<0?-1:1)*a:t==t?t:0:0===t?t:0}},{"./toNumber":192}],191:[function(t,e,n){var i=t("./toFinite");e.exports=function(t){var e=i(t),n=e%1;return e==e?n?e-n:e:0}},{"./toFinite":190}],192:[function(t,e,n){var i=t("./isObject"),r=t("./isSymbol"),a=NaN,o=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,_=/^0b[01]+$/i,u=/^0o[0-7]+$/i,l=parseInt;e.exports=function(t){if("number"==typeof t)return t;if(r(t))return a;if(i(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=i(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(o,"");var n=_.test(t);return n||u.test(t)?l(t.slice(2),n?2:8):s.test(t)?a:+t}},{"./isObject":170,"./isSymbol":174}],193:[function(t,e,n){var i=t("./_baseToString");e.exports=function(t){return null==t?"":i(t)}},{"./_baseToString":64}],194:[function(t,e,n){var i=t("./_baseValues"),r=t("./keys");e.exports=function(t){return null==t?[]:i(t,r(t))}},{"./_baseValues":67,"./keys":177}],195:[function(t,e,n){(function(t){var e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},n="undefined"!=typeof window&&window===this?this:void 0!==t&&null!=t?t:this;function i(){i=function(){},n.Symbol||(n.Symbol=a)}var r=0;function a(t){return"jscomp_symbol_"+(t||"")+r++}function o(){i();var t=n.Symbol.iterator;t||(t=n.Symbol.iterator=n.Symbol("iterator")),"function"!=typeof Array.prototype[t]&&e(Array.prototype,t,{configurable:!0,writable:!0,value:function(){return s(this)}}),o=function(){}}function s(t){var e,i=0;return e=function(){return i<t.length?{done:!1,value:t[i++]}:{done:!0}},o(),(e={next:e})[n.Symbol.iterator]=function(){return this},e}function _(t){o();var e=t[Symbol.iterator];return e?e.call(t):s(t)}for(var u=n,l=["Promise"],c=0;c<l.length-1;c++){var d=l[c];d in u||(u[d]={}),u=u[d]}var h=l[l.length-1],f=u[h],p=function(){function t(t){this.c=0,this.h=void 0,this.b=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function e(){this.b=null}function i(e){return e instanceof t?e:new t(function(t){t(e)})}if(f)return f;e.prototype.c=function(t){this.b||(this.b=[],this.g()),this.b.push(t)},e.prototype.g=function(){var t=this;this.f(function(){t.i()})};var r=n.setTimeout;e.prototype.f=function(t){r(t,0)},e.prototype.i=function(){for(;this.b&&this.b.length;){var t=this.b;this.b=[];for(var e=0;e<t.length;++e){var n=t[e];delete t[e];try{n()}catch(t){this.h(t)}}}this.b=null},e.prototype.h=function(t){this.f(function(){throw t})},t.prototype.f=function(){function t(t){return function(i){n||(n=!0,t.call(e,i))}}var e=this,n=!1;return{resolve:t(this.v),reject:t(this.g)}},t.prototype.v=function(e){if(e===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.w(e);else{t:switch(typeof e){case"object":var n=null!=e;break t;case"function":n=!0;break t;default:n=!1}n?this.s(e):this.i(e)}},t.prototype.s=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.A(e,t):this.i(t)},t.prototype.g=function(t){this.l(2,t)},t.prototype.i=function(t){this.l(1,t)},t.prototype.l=function(t,e){if(0!=this.c)throw Error("Cannot settle("+t+", "+e|"): Promise already settled in state"+this.c);this.c=t,this.h=e,this.o()},t.prototype.o=function(){if(this.b){for(var t=this.b,e=0;e<t.length;++e)t[e].call(),t[e]=null;this.b=null}};var a=new e;return t.prototype.w=function(t){var e=this.f();t.j(e.resolve,e.reject)},t.prototype.A=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},t.prototype.then=function(e,n){function i(t,e){return"function"==typeof t?function(e){try{r(t(e))}catch(t){a(t)}}:e}var r,a,o=new t(function(t,e){r=t,a=e});return this.j(i(e,r),i(n,a)),o},t.prototype.catch=function(t){return this.then(void 0,t)},t.prototype.j=function(t,e){function n(){switch(i.c){case 1:t(i.h);break;case 2:e(i.h);break;default:throw Error("Unexpected state: "+i.c)}}var i=this;this.b?this.b.push(function(){a.c(n)}):a.c(n)},t.resolve=i,t.reject=function(e){return new t(function(t,n){n(e)})},t.race=function(e){return new t(function(t,n){for(var r=_(e),a=r.next();!a.done;a=r.next())i(a.value).j(t,n)})},t.all=function(e){var n=_(e),r=n.next();return r.done?i([]):new t(function(t,e){function a(e){return function(n){o[e]=n,--s||t(o)}}var o=[],s=0;do{o.push(void 0),s++,i(r.value).j(a(o.length-1),e),r=n.next()}while(!r.done)})},t}();p!=f&&null!=p&&e(u,h,{configurable:!0,writable:!0,value:p}),function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={B:i,m:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.m=!0,r.exports}var n={};e.i=t,e.f=n,e.b=function(t,n){e.c(t)||Object.defineProperty(t,"a",{configurable:!1,enumerable:!0,get:n})},e.g=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.b(n,n),n},e.c=function(t){return Object.prototype.hasOwnProperty.call(t,"a")},e.h="",e(e.l=0)}([function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),t=n(1),!window.oath&&(window.oath={}),window.oath.viewability=t.a},function(t,e,n){var i=n(2),r=n(3);e.a=new Promise(function(t,e){Object(i.a)(r.a.u).then(function(){t(new window.oath.viewabilitySDK)}).catch(function(t){e(t)})})},function(t,e){var n=[];e.a=function(t){return-1!==n.indexOf(t)?Promise.resolve():new Promise(function(e,i){var r=document.getElementsByTagName("head")[0],a=document.createElement("script");a.type="text/javascript",a.src=t,a.async=!0,a.onload=a.onreadystatechange=function(){this.readyState&&"complete"!==this.readyState||(a.onload=a.onreadystatechange=null,n.push(t),e())},a.onerror=a.onabort=i,r.appendChild(a)})}},function(t,e){e.a={u:"https://cdn-ssl.vidible.tv/prod/client-utils/js/oath-viewability-sdk.js"}}])}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],196:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};n.default=function(t,e){var n,r,a,o,s,_,u="undefined",l="object",c="application/x-shockwave-flash",d="SWFObjectExprInst",h="onreadystatechange",f=navigator,p=!1,E=[],A=[],v=[],R=[],O=!1,S=!1,y=!0,T=!1,g=function(){var n=i(t.getElementById)!==u&&i(t.getElementsByTagName)!==u&&i(t.createElement)!==u,r=f.userAgent.toLowerCase(),a=f.platform.toLowerCase(),o=/win/.test(a||r),s=/mac/.test(a||r),_=!!/webkit/.test(r)&&parseFloat(r.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),d="Microsoft Internet Explorer"===f.appName,h=[0,0,0],E=null;if(i(f.plugins)!==u&&i(f.plugins["Shockwave Flash"])===l)(E=f.plugins["Shockwave Flash"].description)&&i(f.mimeTypes)!==u&&f.mimeTypes[c]&&f.mimeTypes[c].enabledPlugin&&(p=!0,d=!1,E=E.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),h[0]=F(E.replace(/^(.*)\..*$/,"$1")),h[1]=F(E.replace(/^.*\.(.*)\s.*$/,"$1")),h[2]=/[a-zA-Z]/.test(E)?F(E.replace(/^.*[a-zA-Z]+(.*)$/,"$1")):0);else if(i(e.ActiveXObject)!==u)try{var A=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");A&&(E=A.GetVariable("$version"))&&(d=!0,E=E.split(" ")[1].split(","),h=[F(E[0]),F(E[1]),F(E[2])])}catch(t){}return{w3:n,pv:h,wk:_,ie:d,win:o,mac:s}}();g.w3&&((i(t.readyState)!==u&&("complete"===t.readyState||"interactive"===t.readyState)||i(t.readyState)===u&&(t.getElementsByTagName("body")[0]||t.body))&&m(),O||(i(t.addEventListener)!==u&&t.addEventListener("DOMContentLoaded",m,!1),g.ie&&(t.attachEvent(h,function e(){"complete"===t.readyState&&(t.detachEvent(h,e),m())}),e==top&&function e(){if(!O){try{t.documentElement.doScroll("left")}catch(t){return void setTimeout(e,0)}m()}}()),g.wk&&function e(){O||(/loaded|complete/.test(t.readyState)?m():setTimeout(e,0))}()));function m(){if(!O&&document.getElementsByTagName("body")[0]){try{var e,n=U("span");n.style.display="none",(e=t.getElementsByTagName("body")[0].appendChild(n)).parentNode.removeChild(e),e=null,n=null}catch(t){return}O=!0;for(var i=E.length,r=0;r<i;r++)E[r]()}}function I(t){O?t():E[E.length]=t}function b(){var t=A.length;if(t>0)for(var e=0;e<t;e++){var n=A[e].id,r=A[e].callbackFn,a={success:!1,id:n};if(g.pv[0]>0){var o=x(n);if(o)if(!B(A[e].swfVersion)||g.wk&&g.wk<312)if(A[e].expressInstall&&D()){var s={};s.data=A[e].expressInstall,s.width=o.getAttribute("width")||"0",s.height=o.getAttribute("height")||"0",o.getAttribute("class")&&(s.styleclass=o.getAttribute("class")),o.getAttribute("align")&&(s.align=o.getAttribute("align"));for(var _={},l=o.getElementsByTagName("param"),c=l.length,d=0;d<c;d++)"movie"!==l[d].getAttribute("name").toLowerCase()&&(_[l[d].getAttribute("name")]=l[d].getAttribute("value"));V(s,_,n,r)}else N(o),r&&r(a);else W(n,!0),r&&(a.success=!0,a.ref=P(n),a.id=n,r(a))}else if(W(n,!0),r){var h=P(n);h&&i(h.SetVariable)!==u&&(a.success=!0,a.ref=h,a.id=h.id),r(a)}}}function P(t){var e=null,n=x(t);return n&&"OBJECT"===n.nodeName.toUpperCase()&&(e=i(n.SetVariable)!==u?n:n.getElementsByTagName(l)[0]||n),e}function D(){return!S&&B("6.0.65")&&(g.win||g.mac)&&!(g.wk&&g.wk<312)}function V(s,_,l,c){var h=x(l);if(l=j(l),S=!0,a=c||null,o={success:!1,id:l},h){"OBJECT"===h.nodeName.toUpperCase()?(n=C(h),r=null):(n=h,r=l),s.id=d,(i(s.width)===u||!/%$/.test(s.width)&&F(s.width)<310)&&(s.width="310"),(i(s.height)===u||!/%$/.test(s.height)&&F(s.height)<137)&&(s.height="137");var f=g.ie?"ActiveX":"PlugIn",p="MMredirectURL="+encodeURIComponent(e.location.toString().replace(/&/g,"%26"))+"&MMplayerType="+f+"&MMdoctitle="+encodeURIComponent(t.title.slice(0,47)+" - Flash Player Installation");if(i(_.flashvars)!==u?_.flashvars+="&"+p:_.flashvars=p,g.ie&&4!=h.readyState){var E=U("div");l+="SWFObjectNew",E.setAttribute("id",l),h.parentNode.insertBefore(E,h),h.style.display="none",M(h)}w(s,_,l)}}function N(t){if(g.ie&&4!=t.readyState){t.style.display="none";var e=U("div");t.parentNode.insertBefore(e,t),e.parentNode.replaceChild(C(t),e),M(t)}else t.parentNode.replaceChild(C(t),t)}function C(t){var e=U("div");if(g.win&&g.ie)e.innerHTML=t.innerHTML;else{var n=t.getElementsByTagName(l)[0];if(n){var i=n.childNodes;if(i)for(var r=i.length,a=0;a<r;a++)1==i[a].nodeType&&"PARAM"===i[a].nodeName||8==i[a].nodeType||e.appendChild(i[a].cloneNode(!0))}}return e}function w(t,e,n){var r,a,o,s,_=x(n);if(n=j(n),g.wk&&g.wk<312)return r;if(_){var d,h,f,p=g.ie?U("div"):U(l);i(t.id)===u&&(t.id=n);for(f in e)e.hasOwnProperty(f)&&"movie"!==f.toLowerCase()&&L(p,f,e[f]);g.ie&&(a=t.data,o=p.innerHTML,(s=U("div")).innerHTML="<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000'><param name='movie' value='"+a+"'>"+o+"</object>",p=s.firstChild);for(d in t)t.hasOwnProperty(d)&&("styleclass"===(h=d.toLowerCase())?p.setAttribute("class",t[d]):"classid"!==h&&"data"!==h&&p.setAttribute(d,t[d]));g.ie?v[v.length]=t.id:(p.setAttribute("type",c),p.setAttribute("data",t.data)),_.parentNode.replaceChild(p,_),r=p}return r}function L(t,e,n){var i=U("param");i.setAttribute("name",e),i.setAttribute("value",n),t.appendChild(i)}function M(t){var e=x(t);e&&"OBJECT"===e.nodeName.toUpperCase()&&(g.ie?(e.style.display="none",function t(){if(4==e.readyState){for(var n in e)"function"==typeof e[n]&&(e[n]=null);e.parentNode.removeChild(e)}else setTimeout(t,10)}()):e.parentNode.removeChild(e))}function k(t){return t&&t.nodeType&&1===t.nodeType}function j(t){return k(t)?t.id:t}function x(e){if(k(e))return e;var n=null;try{n=t.getElementById(e)}catch(t){}return n}function U(e){return t.createElement(e)}function F(t){return parseInt(t,10)}function B(t){t+="";var e=g.pv,n=t.split(".");return n[0]=F(n[0]),n[1]=F(n[1])||0,n[2]=F(n[2])||0,e[0]>n[0]||e[0]==n[0]&&e[1]>n[1]||e[0]==n[0]&&e[1]==n[1]&&e[2]>=n[2]}function H(e,n,r,a){var o=t.getElementsByTagName("head")[0];if(o){var l="string"==typeof r?r:"screen";if(a&&(s=null,_=null),!s||_!=l){var c=U("style");c.setAttribute("type","text/css"),c.setAttribute("media",l),s=o.appendChild(c),g.ie&&i(t.styleSheets)!==u&&t.styleSheets.length>0&&(s=t.styleSheets[t.styleSheets.length-1]),_=l}s&&(i(s.addRule)!==u?s.addRule(e,n):i(t.createTextNode)!==u&&s.appendChild(t.createTextNode(e+" {"+n+"}")))}}function W(t,e){if(y){var n=e?"visible":"hidden",i=x(t);O&&i?i.style.visibility=n:"string"==typeof t&&H("#"+t,"visibility:"+n)}}function G(t){var e=null!==/[\\\"<>\.;]/.exec(t);return e&&("undefined"==typeof encodeURIComponent?"undefined":i(encodeURIComponent))!==u?encodeURIComponent(t):t}E[0]=function(){p?function(){var e=t.getElementsByTagName("body")[0],n=U(l);n.setAttribute("style","visibility: hidden;"),n.setAttribute("type",c);var r=e.appendChild(n);if(r){var a=0;!function t(){if(i(r.GetVariable)!==u)try{var o=r.GetVariable("$version");o&&(o=o.split(" ")[1].split(","),g.pv=[F(o[0]),F(o[1]),F(o[2])])}catch(t){g.pv=[8,0,0]}else if(a<10)return a++,void setTimeout(t,10);e.removeChild(n),r=null,b()}()}else b()}():b()};g.ie&&window.attachEvent("onunload",function(){for(var t=R.length,e=0;e<t;e++)R[e][0].detachEvent(R[e][1],R[e][2]);for(var n=v.length,i=0;i<n;i++)M(v[i]);for(var r in g)g[r]=null;g=null;for(var a in swfobject)swfobject[a]=null;swfobject=null});return{registerObject:function(t,e,n,i){if(g.w3&&t&&e){var r={};r.id=t,r.swfVersion=e,r.expressInstall=n,r.callbackFn=i,A[A.length]=r,W(t,!1)}else i&&i({success:!1,id:t})},getObjectById:function(t){if(g.w3)return P(t)},embedSWF:function(t,e,n,r,a,o,s,_,c,d){var h=j(e),f={success:!1,id:h};g.w3&&!(g.wk&&g.wk<312)&&t&&e&&n&&r&&a?(W(h,!1),I(function(){n+="",r+="";var p={};if(c&&(void 0===c?"undefined":i(c))===l)for(var E in c)p[E]=c[E];p.data=t,p.width=n,p.height=r;var A={};if(_&&(void 0===_?"undefined":i(_))===l)for(var v in _)A[v]=_[v];if(s&&(void 0===s?"undefined":i(s))===l)for(var R in s)if(s.hasOwnProperty(R)){var O=T?encodeURIComponent(R):R,S=T?encodeURIComponent(s[R]):s[R];i(A.flashvars)!==u?A.flashvars+="&"+O+"="+S:A.flashvars=O+"="+S}if(B(a)){var y=w(p,A,e);p.id==h&&W(h,!0),f.success=!0,f.ref=y,f.id=y.id}else{if(o&&D())return p.data=o,void V(p,A,e,d);W(h,!0)}d&&d(f)})):d&&d(f)},switchOffAutoHideShow:function(){y=!1},enableUriEncoding:function(t){T=(void 0===t?"undefined":i(t))===u||t},ua:g,getFlashPlayerVersion:function(){return{major:g.pv[0],minor:g.pv[1],release:g.pv[2]}},hasFlashPlayerVersion:B,createSWF:function(t,e,n){return g.w3?w(t,e,n):void 0},showExpressInstall:function(t,e,n,i){g.w3&&D()&&V(t,e,n,i)},removeSWF:function(t){g.w3&&M(t)},createCSS:function(t,e,n,i){g.w3&&H(t,e,n,i)},addDomLoadEvent:I,addLoadEvent:function(n){if(i(e.addEventListener)!==u)e.addEventListener("load",n,!1);else if(i(t.addEventListener)!==u)t.addEventListener("load",n,!1);else if(i(e.attachEvent)!==u)!function(t,e,n){t.attachEvent(e,n),R[R.length]=[t,e,n]}(e,"onload",n);else if("function"==typeof e.onload){var r=e.onload;e.onload=function(){r(),n()}}else e.onload=n},getQueryParamValue:function(e){var n=t.location.search||t.location.hash;if(n){if(/\?/.test(n)&&(n=n.split("?")[1]),!e)return G(n);for(var i=n.split("&"),r=0;r<i.length;r++)if(i[r].substring(0,i[r].indexOf("="))==e)return G(i[r].substring(i[r].indexOf("=")+1))}return""},expressInstallCallback:function(){if(S){var t=x(d);t&&n&&(t.parentNode.replaceChild(n,t),r&&(W(r,!0),g.ie&&(n.style.display="block")),a&&a(o)),S=!1}},version:"2.3"}}},{}],197:[function(t,e,n){"use strict";n.__IASVANS=function(t){var e,n,i,r,a,o,s,_,u,l,c,d,h,f,p,E,A,v,R,O,S,y,T,g,m,I,b,P,D,V={now:function(){return(new Date).getTime()},sendMonitoringPixel:function(t){try{this.sendUrlRequest(["//pixel.adsafeprotected.com/mon?anId=10173&campId=",encodeURIComponent(M.getPartnerId()),"&pubId=",encodeURIComponent("vans-js_"+t)].join(""))}catch(t){N.report("smp",t)}},sendMonitoringDebugPixel:(P=["adstop"],D={},function(t,e){var n=M.hasDebugEnabled(),i=-1<P.indexOf(t)&&D[t];if(n&&!i)try{var r,a=M.getAltMonDomain(),o=V.addProtocolToDomain("spixel.adsafeprotected.com")+"/mon?anId=10173&campId="+encodeURIComponent(M.getPartnerId())+"&pubId=",s=V.addProtocolToDomain(a)+"/mon?anId=925116&campId="+encodeURIComponent(M.getPartnerId())+"&pubId=",_=encodeURIComponent(t);r=e.replace(/=undefined&/g,"=&"),this.sendUrlRequest([o,_,r].join("")),this.sendUrlRequest([s,_,r].join("")),D[t]=!0}catch(t){N.report("smp",t)}}),sendUrlRequest:function(t,e){var n,i;if(t){n=this.getWindow();try{i=new n.XMLHttpRequest,e&&(i.onreadystatechange=e),i.open("GET",t),i.send()}catch(t){}}},stringify:function(t){if("AdImpression"!==t.messageType)return JSON.stringify(t);var e={};e.passthroughObj=M.getPassThroughObj();var n="";try{n=JSON.stringify(t)}catch(t){return void N.report("ser",t,e)}return n},addProtocolToDomain:function(t){return t.match(/^[a-zA-Z]+:\/\//)?t:"https://"+t},getWindow:function(){return k.getWin()},getDocument:function(){return k.getDoc()},generateUID:function(){var t,e="";try{for(t=0;8>t;t++)e=[e,Math.floor(65536*(1+Math.random())).toString(16).substring(1)].join("")}catch(t){}return e},noop:function(){}},N=(b={},{report:function(t,e,n){if(!b[t])try{b[t]=!0;var i="//pixel.adsafeprotected.com/jsdiagnostic?code:vans-js_"+encodeURIComponent(M.getPartnerId())+"_"+t+"&err:"+encodeURIComponent(e.message);n&&(i+="&config:"+encodeURIComponent(JSON.stringify(n))),V.sendUrlRequest(i)}catch(t){}}}),C=(g=!1,m=function(t,e){return t==I()&&(g=!0,L.setImpressionCallback(e),V.sendMonitoringDebugPixel("hs",L.monitoringQS()),L.flushUnsentEvents()),g?"jv3":null},{getVideoId:I=function(){return T||(T=V.generateUID()),T},setNodeInterface:function(t){var e,n,i,r=I();try{e="IASid"+r,n="blockAd"+r,i="getIasVidBridgeVersion"+r,t.className+=" integral-vid-"+r,t[n]=V.noop,t[e]=m,t[i]=function(){return"2"},t.getVersion=function(){return"3.5.0"}}catch(t){N.report("sni",t)}},isEstablished:function(){return g},resetHandshake:function(){g=!1}}),w=(S=function(){var t=function(t){return void 0!==t};return{br:function(){var e="u";try{t(window.opera)&&t(window.opera.buildNumber)?e="o":t(window.mozInnerScreenY)?e="g":t(window.chrome)&&t(window.chrome.csi)?e="c":t(window.msWriteProfilerMark)&&t(window.crypto)?e="e":t(window.attachEvent)||t(window.msCrypto)?e="i":t(window.WebKitPoint)&&(e="w")}catch(t){}return e}(),urls:function(){var e,n=function(){var e={g:"",q:""};try{e.q=window.parent.parent.parent.parent.parent.parent.parent.parent.parent.parent.location.href}catch(a){var n,i=(i=a.message).substring(i.lastIndexOf("<")+1,i.lastIndexOf(">"));if((n=t(i))&&(n=!1,t(window.navigator)&&t(window.navigator.userAgent))){var r=window.navigator.userAgent.match(/Firefox\/([\.0-9]+)/);null!==r&&2==r.length&&(r=r[1].split("."),3==parseInt(r[0],10)&&6>=parseInt(r[1],10)&&(3==r.length?13>=parseInt(r[2],10)&&(n=!0):n=!0))}n&&(e.g=i)}return e},i={};try{i.a=encodeURIComponent(top.location.href)}catch(t){}try{i.b=encodeURIComponent(parent.location.href)}catch(t){}if(window!=top){try{i.c=encodeURIComponent(parent.document.referrer)}catch(t){}try{i.e=encodeURIComponent(window.document.referrer)}catch(t){}}try{i.d=encodeURIComponent(window.location.href)}catch(t){}try{var r=n();i.g=encodeURIComponent(r.g),i.q=encodeURIComponent(r.q)}catch(t){}i=function(e){var n,i,r={};for(i in e)e.hasOwnProperty(i)&&(n=e[i],t(r[n])?r[n]+=i:r[n]=i);e={};for(i in r)r.hasOwnProperty(i)&&(e[n=r[i]]=i);return e}(i=function(e){for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];""!==i&&"null"!==i&&"undefined"!==i&&null!==i&&t(i)||delete e[n]}return e}(i)),n=[];for(e in i)i.hasOwnProperty(e)&&n.push({key:e,val:i[e]});return n.sort(function(t,e){return t.val.length>e.val.length?1:t.val.length<e.val.length?-1:0}),n}()}},y=function(){if(4==this.readyState)if(200==this.status)try{O("failed"===JSON.parse(this.responseText).action?"block":"safe")}catch(t){N.report("ba",t)}else N.report("blk_url_req_err",{message:this.status})},{init:function(t,e,n){t=function(t,e,n){var i=["//pixel.adsafeprotected.com/db2/video/",e,"/",n,"/skeleton.js?videoId=",C.getVideoId()].join("");e=function(t){i=[i,"&adsafe_url=",t.val,"&adsafe_type=",t.key].join("")};try{t.urls.forEach(e),i=[i,"&adsafe_jsinfo=br:",t.br].join("")}catch(t){N.report("bvu",t)}return i}(S(),t,e),O=n,V.sendUrlRequest(t,y)}}),L=(A=[],v=!1,R=function(e){var n,i,r;if(C.isEstablished())try{(n=V.stringify(e))&&("AdImpression"===e.messageType?V.getWindow()[E](n):V.getWindow().postMessage(n,"*"))}catch(t){N.report("dm",t)}else if(L.nodeProvided)try{A.push(e)}catch(t){N.report("cm",t)}else{n=t||"pixel.adsafeprotected.com";var a=L.config;try{V.stringify(e),"AdImpression"===e.messageType&&(L.isCmTag?V.sendUrlRequest(["//"+n,"/mon?",(i=a,r="",Object.keys(i).forEach(function(t){-1===["advEntityId","pubEntityId","partner","debug"].indexOf(t)&&(r+="&"+t+"="+i[t])}),r)].join("")):L.isFwTag&&V.sendUrlRequest(["//"+n,"/rfw/st/",a.advEntityId+"/"+a.pubEntityId,"/skeleton.js"].join("")))}catch(t){N.report("dm",t)}}},{sendEvent:function(t,e){if("AdImpression"===t){if(v)return;e&&(e.ext_passthrough=L.passThroughObj),v=!0,V.sendMonitoringDebugPixel("ai",L.monitoringQS())}else"AdStopped"===t||"AdVideoComplete"===t?V.sendMonitoringDebugPixel("adstop",L.monitoringQS()):"AdError"===t&&V.sendMonitoringDebugPixel("aderr",L.monitoringQS());try{R({messageType:t,id:C.getVideoId(),time:V.now(),partner:M.getPartnerId(),eventData:e})}catch(t){N.report("se",t)}},setImpressionCallback:function(t){E=t},flushUnsentEvents:function(){try{A.forEach(R)}catch(t){N.report("fue",t)}},passThroughObj:{},monitoringQS:function(){},clearSessionState:function(){v=!1,A.length=0}}),M=(a={},o={},s="impId creativeId campId placementId advEntityId pubEntityId chanId".split(" "),_=function(e,n,i){var r,a,o,s,_,u,l=V.getDocument();try{(r=l.createElement("script")).src=function(e,n){var i,r,a,o=t||"pixel.adsafeprotected.com";try{i=["//",o,e,"?videoId=",C.getVideoId(),(r=n,a="",Object.keys(r).forEach(function(t){"advEntityId"!=t&&"pubEntityId"!=t&&"partner"!=t&&(a+="&"+t+"="+r[t])}),a)].join("")}catch(t){N.report("bsurl",t)}return i}(e,n),r.addEventListener("load",function(t){V.sendMonitoringDebugPixel("fwjsload",c())}),r.addEventListener("error",function(t){V.sendMonitoringDebugPixel("fwjsload_err",c())}),a=i,o=r,_=!1,(u=function(){!_&&a.parentNode&&(a.parentNode.appendChild(o),clearInterval(s),_=!0,V.sendMonitoringDebugPixel("fwjsinj",c()))})(),_||(s=setInterval(u,200))}catch(t){V.sendMonitoringPixel("inj_err")}},u=function(t,e,n){C.setNodeInterface(n);var i={};Object.getOwnPropertyNames(e).forEach(function(t){"debug"!==t&&(i[t]=e[t])}),_(t,i,n)},l=function(t){s.forEach(function(e){a[e]=t[e]}),r&&(a.monDomain=t.debug.monDomain)},c=function(){return"&chanId="+a.chanId+"&planId="+a.advEntityId+"&placementId="+a.pubEntityId+"&advId="+a.campId+"&pubOrder="+a.placementId+"&pubCreative="+a.creativeId+"&impId="+a.impId+"&ts="+Date.now()+"&custom=3.5.0&custom2=jv3&custom3="+i+"&adsafe_par"},d=function(t){var e=t&&t.ownerDocument,n=t&&t.parentNode,i=e&&(e.defaultView||e.parentWindow),r="adnode_type_"+(t?t.constructor.name||t.nodeName:"null");t||V.sendMonitoringDebugPixel("adnode_null",c()),t&&!n&&V.sendMonitoringDebugPixel("adnode_detached",c()),t&&!e&&V.sendMonitoringDebugPixel("adnode_nodoc",c()),e&&!i&&V.sendMonitoringDebugPixel("adnode_nowin",c()),V.sendMonitoringDebugPixel(r,c())},h=function(){o.vv="3.5.0",o.vanstag=i,o.xcamp=a.campId,o.xplac=a.placementId,o.xcreat=a.creativeId,o.ximp=a.impId},f=function(t){t.monitoringQS=c,t.passThroughObj=o,Object.keys(t).forEach(function(e){L[e]=t[e]})},p=function(t){var e=(t=t&&t.ownerDocument)&&t.parentWindow;return!!(t&&t.defaultView||e)},{initCM:function(t,e){var a=p(e);if(!t||!t.partner)throw Error("Missing partnerId");k.setWin(e),n=t.partner,r=t.debug&&t.debug.enabled,i="cm";try{if(!t.anId)throw Error("Missing anId");l(t),h(),f({isFwTag:!1,isCmTag:!0,nodeProvided:a,config:t}),V.sendMonitoringDebugPixel("init",c()),d(e),a&&u("/jsvid",t,e)}catch(t){N.report("icm",t)}},initFW:function(t,e,a){var o,s=p(e);if(!t||!t.partner)throw Error("Missing partnerId");k.setWin(e),n=t.partner,r=t.debug&&t.debug.enabled,i="fw";try{if(!t.advEntityId||!t.pubEntityId)throw Error("Missing client id: advEntityId: "+t.advEntityId+" ,pubEntityId: "+t.pubEntityId);l(t),h(),f({isFwTag:!0,isCmTag:!1,nodeProvided:s,config:t}),V.sendMonitoringDebugPixel("init",c()),d(e),a&&w.init(t.advEntityId,t.pubEntityId,a),s&&(o="/fwjsvid/st/"+t.advEntityId+"/"+t.pubEntityId+"/skeleton.js",u(o,t,e))}catch(t){N.report("ifw",t)}},getPartnerId:function(){return n},getPassThroughObj:function(){return o},getAltMonDomain:function(){return a.monDomain},hasDebugEnabled:function(){return r}}),k=(e=window,{getWin:function(){return e},setWin:function(t){(t=t&&t.ownerDocument)&&t.defaultView?e=t.defaultView:t&&t.parentWindow?e=t.parentWindow:N.report("sc",{message:""})},getDoc:function(){return e.document}});return{initFW:M.initFW,initCM:M.initCM,sendEvent:L.sendEvent}}},{}],198:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,n,i)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(i):void 0},a=(u(t("../utils")),_(t("../vidio_demand_tag_sender"))),o=_(t("../ad_state")),s=u(t("../constants"));function _(t){return t&&t.__esModule?t:{default:t}}function u(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}var l=function(t){function e(t,n,i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"AdContainer",t,r));return o._cabinet=t,o._idx=n,o._demandTag=i,o._uuid=t.uuid,o._vidIoDemandTagSender=new a.default(o.callSSEvent_.bind(o),o._cabinet.historyManager,o._demandTag),o._adSlotState=s.SLOT_STATES.DEMAND_TAG_READY,o._vast=null,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default),i(e,[{key:"widthToPass",value:function(t){return this._demandTag.ts?t.detectedWidth:this.cabinet.manifest.width}},{key:"heightToPass",value:function(t){return this._demandTag.ts?t.detectedHeight:this.cabinet.manifest.height}},{key:"internalError",value:function(t,e){this._vidIoDemandTagSender.internalError(t,e),this.failureCb()}},{key:"sendJsDemandResponse",value:function(t,e,n){if(t!==s.VID_IO_EVENTS.cm_js_demand_req_resp)throw new Error(s.VD_ERROR_CODES.NOT_JS_DEMAND_RESPONSE);this._vidIoDemandTagSender.jsDemandResponse(e,n)}},{key:"successCb",value:function(t){this._vast=t,this._isAdDead||(this._adSlotState=s.SLOT_STATES.VAST_READY,this.callSSEvent_(s.SLOT_EVENTS.VastDone,this._idx,t))}},{key:"failureCb",value:function(){this._isAdDead||(this._adSlotState=s.SLOT_STATES.NO_VAST,this.callSSEvent_(s.SLOT_EVENTS.VastDone,this._idx,null))}},{key:"vpaidStart",value:function(){this._adSlotState=s.SLOT_STATES.REQUESTING_VPAID}},{key:"vpaidFailed",value:function(){this._adSlotState=s.SLOT_STATES.VPAID_FAILED}},{key:"stopAd",value:function(){this.failureCb(),r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"stopAd",this).call(this)}},{key:"skipAd",value:function(){this.failureCb(),r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"skipAd",this).call(this)}},{key:"_containerRequestVast",value:function(t){}},{key:"requestVast",value:function(t){!this._isAdDead&&this.passesTargeting(t)&&(this._adSlotState=s.SLOT_STATES.REQUESTING_VAST,this._containerRequestVast(t))}},{key:"passesTargeting",value:function(t){var e=void 0;try{e=!this._cabinet.isDomainMatch&&this._demandTag.td}catch(t){return this.internalError(s.VD_ERROR_CODES.PRE_INIT_TD_MISMATCH_FAIL,!1),!1}var n=void 0;try{n=this._demandTag.ts&&!this._cabinet.isSizeMatch(t)}catch(t){return this.internalError(s.VD_ERROR_CODES.PRE_INIT_TS_MISMATCH_FAIL,!1),!1}try{if(e||n)return this.failureCb(),!1}catch(t){return this.internalError(s.VD_ERROR_CODES.PRE_INIT_MISSED_OPPORTUNITY_FAIL,!1),!1}try{this._vidIoDemandTagSender.jsDemandRequest({request_time:this._cabinet.timeoutManager.getRequestTime(this._demandTag.waterfallIdx)})}catch(t){return this.internalError(s.VD_ERROR_CODES.DO_GET_VAST_RESPONSE_START_RESPONSE_FAIL,!1),!1}return!0}},{key:"domainToPass",get:function(){return this._demandTag.td?this.cabinet.locationInfo.domain_match:this.cabinet.manifest.domain}},{key:"cabinet",get:function(){return this._cabinet}},{key:"uuid",get:function(){return this._uuid}},{key:"adSlotState",get:function(){return this._adSlotState}},{key:"demandTag",get:function(){return this._demandTag}}]),e}();n.default=l},{"../ad_state":219,"../constants":234,"../utils":245,"../vidio_demand_tag_sender":247}],199:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(t("../constants")),a=f(t("./spotx_ad_container")),o=f(t("./rubicon_ad_container")),s=f(t("./sticky_ad_container")),_=f(t("./telaria_ad_container")),u=f(t("./appnexus_ad_container")),l=f(t("./openx_ad_container")),c=f(t("./ima_ad_container")),d=f(t("./demand_tag_ad_container")),h=f(t("lodash/defaults"));function f(t){return t&&t.__esModule?t:{default:t}}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var E=function(){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d.default;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.DEFAULT_CONTAINER=i,this.CONTAINERS=(0,h.default)(n,(p(e={},r.BID_PLATFORMS.rubicon,o.default),p(e,r.BID_PLATFORMS.spotx,a.default),p(e,r.BID_PLATFORMS.stickyads,s.default),p(e,r.BID_PLATFORMS.telaria,_.default),p(e,r.BID_PLATFORMS.appnexus,u.default),p(e,r.BID_PLATFORMS.openx,l.default),p(e,r.BID_PLATFORMS.ima,c.default),e))}return i(t,[{key:"build",value:function(t,e,n,i){return new(this.containerFor(n.bid_platform))(t,e,n,i)}},{key:"containerFor",value:function(t){return t&&this.CONTAINERS.hasOwnProperty(t)?this.CONTAINERS[t]:this.DEFAULT_CONTAINER}}]),t}();n.default=E},{"../constants":234,"./appnexus_ad_container":200,"./demand_tag_ad_container":201,"./ima_ad_container":203,"./openx_ad_container":204,"./rubicon_ad_container":205,"./spotx_ad_container":206,"./sticky_ad_container":207,"./telaria_ad_container":208,"lodash/defaults":146}],200:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=c(t("lodash/isNaN")),a=c(t("lodash/forEach")),o=c(t("lodash/pick")),s=c(t("./header_bidding_ad_container")),_=t("../ss_utils/ajax"),u=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(t("../constants")),l=c(t("../../../../configs/timeouts.json"));function c(t){return t&&t.__esModule?t:{default:t}}var d=["code","ext_inv_code","position","prevent_deals","keywords"],h=["playback_method","mimes","max_duration","min_duration","context","skippable","frameworks"],f=function(t){function e(t,n,i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i,r));return a.placementId=parseInt(a.bidParams.placementId),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),i(e,[{key:"includeVideoParams",value:function(t){var e=(0,o.default)(this.bidOptionalParams,h);(0,a.default)(e,function(e,n){t[n]=e})}},{key:"includeTagParams",value:function(t){var e=(0,o.default)(this.bidOptionalParams,d);(0,a.default)(e,function(e,n){t[n]=e})}},{key:"getRequestParams",value:function(t){if(null===this.placementId||(0,r.default)(this.placementId))return null;var e=this.widthToPass(t),n=this.heightToPass(t),i={sizes:[{width:e,height:n}],primary_size:{width:e,height:n},uuid:this._cabinet.uuid,id:this.placementId,allow_smaller_sizes:!1,use_pmt_rule:!1,prebid:!0,disable_psa:!0,require_asset_url:!0,video:{playback_method:["auto_play_sound_off"]}};return this.includeTagParams(i),this.includeVideoParams(i.video),{tags:[i],sdk:{source:"pbjs",version:"0.33.0"}}}},{key:"getUrl",value:function(){return this._cabinet.pageProtocol+"//ib.adnxs.com/ut/v3/prebid"}},{key:"getTimeoutInfo",value:function(){return this.cabinet.timeoutManager.getTimeoutInfo(this.demandTag.waterfallIdx,{timeout:l.default.APPNEXUS_TIMEOUT,reason:u.VD_ERROR_CODES.APPNEXUS_TIMEOUT})}},{key:"_ajaxIt",value:function(t,e,n){var i=this.handleResponse.bind(this),r=this.handleError.bind(this);(0,_.ajax)(t,this.getTimeoutInfo(),{success:function(t){i(t,n)},error:function(){r()}},JSON.stringify(e),{method:"POST",withCredentials:!0})}},{key:"_containerRequestVast",value:function(t){var e=this.getRequestParams(t);null!==e?this._ajaxIt(this.getUrl(),e,t):this.failedBidRequest()}},{key:"handleError",value:function(){this.failedBidRequest()}},{key:"handleResponse",value:function(t,e){var n=JSON.parse(t),i=null;try{i=n.tags[0].ads[0].cpm}catch(t){return void this.failedBidRequest()}if(null!==i&&this.validBid(i)){var r=null;try{r=n.tags[0].ads[0].rtb.video.asset_url}catch(t){return void this.failedBidRequest()}this._demandTag.url=r;var a={bp:i};this._getAdVast(e).requestVast(r,!0,a)}else this.failedBidRequest()}}]),e}();n.default=f},{"../../../../configs/timeouts.json":2,"../constants":234,"../ss_utils/ajax":239,"./header_bidding_ad_container":202,"lodash/forEach":153,"lodash/isNaN":168,"lodash/pick":185}],201:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=u(t("../ad_vast")),o=t("./ad_container"),s=(i=o)&&i.__esModule?i:{default:i},_=u(t("../utils"));function u(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}var l=function(t){function e(t,n,i,r){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i,r))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),r(e,[{key:"_containerRequestVast",value:function(t){new a.AdVast(this._cabinet,this.sendJsDemandResponse.bind(this),this._demandTag,this.successCb.bind(this),this.failureCb.bind(this),this._initParams.environmentVars,this.callLogEvent_.bind(this),t).requestVast(null,_.shouldUseWithCreds(this._demandTag.url))}}]),e}();n.default=l},{"../ad_vast":221,"../utils":245,"./ad_container":198}],202:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=l(t("./ad_container")),a=l(t("lodash/isNaN")),o=l(t("lodash/toNumber")),s=u(t("../constants")),_=u(t("../ad_vast"));function u(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function l(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function e(t,n,i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i,r));return a.bidOptionalParams=a._demandTag.hasOwnProperty("bid_optional_params")?a._demandTag.bid_optional_params:{},a.bidParams=a._demandTag.hasOwnProperty("bid_params")?a._demandTag.bid_params:{},a.bidFloor=(0,o.default)(a._demandTag.hasOwnProperty("bid_floor")?a._demandTag.bid_floor:0),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default),i(e,[{key:"failedBidRequest",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.VD_ERROR_CODES.HB_BID_ERROR;this.sendJsDemandResponse(s.VID_IO_EVENTS.cm_js_demand_req_resp,this._demandTag,{cc_i:this._demandTag.callChain.getCallChainIndices(this._cabinet.historyManager.demand_events.response,!0).join(","),response_time:0,has_ad:!1,reason:t,wrapper_count:0,dtype:s.DEMAND_TYPES.UNKNOWN}),this.failureCb()}},{key:"_getAdVast",value:function(t){return new _.AdVast(this._cabinet,this.sendJsDemandResponse.bind(this),this._demandTag,this.successCb.bind(this),this.failureCb.bind(this),this._initParams.environmentVars,this.callLogEvent_.bind(this),t)}},{key:"validBid",value:function(t){var e=(0,o.default)(t);return!(0,a.default)(e)&&e>=this.bidFloor}}]),e}();n.default=c},{"../ad_vast":221,"../constants":234,"./ad_container":198,"lodash/isNaN":168,"lodash/toNumber":192}],203:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=c(t("lodash/forEach")),o=c(t("lodash/defaults")),s=(l(t("../utils")),l(t("../constants"))),_=c(t("./ad_container")),u=c(t("../../../../configs/timeouts.json"));function l(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function c(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(t,n,i,r){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i,r))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,_.default),r(e,[{key:"_containerRequestVast",value:function(t){this.cabinet.timeoutManager.getTimeoutInfo(this.demandTag.waterfallIdx,{timeout:u.default.IMA_TIMEOUT,reason:s.VD_ERROR_CODES.IMA_AD_CONTAINER_TIMEOUT});this.cabinet.imaManager.state===s.IMA_MANAGER_STATES.LOAD_ERROR?this.onLOAD_ERROR():this.cabinet.imaManager.state===s.IMA_MANAGER_STATES.LOADED?this.onLOADED():this.cabinet.imaManager.state===s.IMA_MANAGER_STATES.INIT?(this.registerImaManagerEventListeners(),this.cabinet.imaManager.loadAndStartIma()):this.registerImaManagerEventListeners()}},{key:"onLOAD_ERROR",value:function(){this.sendJsDemandResponse(s.VID_IO_EVENTS.cm_js_demand_req_resp,this.demandTag,{cc_i:this.demandTag.callChain.getCallChainIndices(this.cabinet.historyManager.demand_events.response,!0).join(","),response_time:this.cabinet.timeoutManager.getResponseTime(this.demandTag.waterfallIdx),wrapper_count:0,has_ad:!1,timeout:!1,reason:s.VD_ERROR_CODES.IMA_MANAGER_LOAD_ERROR,dtype:s.DEMAND_TYPES.IMA}),this.failureCb()}},{key:"onLOADED",value:function(){this.sendJsDemandResponse(s.VID_IO_EVENTS.cm_js_demand_req_resp,this.demandTag,{cc_i:this.demandTag.callChain.getCallChainIndices(this.cabinet.historyManager.demand_events.response,!0).join(","),response_time:this.cabinet.timeoutManager.getResponseTime(this.demandTag.waterfallIdx),wrapper_count:0,has_ad:!0,timeout:!1,vv:s.VAST_VERSION.UNKNOWN,dtype:s.DEMAND_TYPES.IMA}),this.successCb((0,o.default)({imaTagUrl:this.demandTag.url},s.getDefaultVast(),s.getDefaultVastPixels()))}},{key:"registerImaManagerEventListeners",value:function(){var t=this;(0,a.default)(s.IMA_MANAGER_EVENT_TYPES,function(e,n){var i="on"+n;t.cabinet.imaManager.subscribeImaManagerEvent(t[i],n,t)})}},{key:"unregisterImaManagerEventListeners",value:function(){var t=this;(0,a.default)(s.IMA_MANAGER_EVENT_TYPES,function(e,i){t.cabinet.imaManager.unsubscribeImaManagerEvent(i,t[n])})}}]),e}();i.default=d},{"../../../../configs/timeouts.json":2,"../constants":234,"../utils":245,"./ad_container":198,"lodash/defaults":146,"lodash/forEach":153}],204:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=u(t("lodash/isNaN")),a=u(t("./header_bidding_ad_container")),o=t("../ss_utils/ajax"),s=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(t("../constants")),_=u(t("../../../../configs/timeouts.json"));function u(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(t,n,i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i,r));return a.deliveryDomain=a.bidParams.delDomain,a.auid=a.bidParams.auid,a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),i(e,[{key:"getRequestParams",value:function(t){if(null===this.placementId||(0,r.default)(this.placementId))return null;var e=this.widthToPass(t),n=this.heightToPass(t),i={imp:[{video:{mimes:["video/mp4","application/javascript","video/webm","video/quicktime","video/ogg","video/3gpp"],w:e,h:n}}]};return{auid:this.auid,url:this.domainToPass,vht:n,vwd:e,openrtb:JSON.stringify(i),be:!0}}},{key:"getUrl",value:function(){return this._cabinet.pageProtocol+"//"+this.deliveryDomain+"/v/1.0/avjp"}},{key:"getTimeoutInfo",value:function(){return this.cabinet.timeoutManager.getTimeoutInfo(this.demandTag.waterfallIdx,{timeout:_.default.OPENX_TIMEOUT,reason:s.VD_ERROR_CODES.OPENX_TIMEOUT})}},{key:"_ajaxIt",value:function(t,e,n){var i=this.handleResponse.bind(this),r=this.handleError.bind(this);(0,o.ajax)(t,this.getTimeoutInfo(),{success:function(t){i(t,n)},error:function(){r()}},e,{method:"GET",withCredentials:!0})}},{key:"_containerRequestVast",value:function(t){var e=this.getRequestParams(t);null!==e?this._ajaxIt(this.getUrl(),e,t):this.failedBidRequest()}},{key:"handleError",value:function(){this.failedBidRequest()}},{key:"handleResponse",value:function(t,e){var n=JSON.parse(t),i=null;try{i=parseInt(n.pub_rev)/1e3}catch(t){return void this.failedBidRequest()}if(null!==i&&this.validBid(i)){var r=null;try{r=n.vastUrl}catch(t){return void this.failedBidRequest()}this._demandTag.url=r;var a={bp:i};this._getAdVast(e).requestVast(r,!0,a)}else this.failedBidRequest()}},{key:"domainToPass",get:function(){var t=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,n,i)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(i):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"domainToPass",this),n=this.cabinet.pageProtocol;return 0===t.indexOf("//")?n+t:0!==t.indexOf("http")?n+"//"+t:t}}]),e}();n.default=l},{"../../../../configs/timeouts.json":2,"../constants":234,"../ss_utils/ajax":239,"./header_bidding_ad_container":202,"lodash/isNaN":168}],205:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=u(t("./header_bidding_ad_container")),a=t("../ss_utils/ajax"),o=u(t("lodash/isNaN")),s=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(t("../constants")),_=u(t("../../../../configs/timeouts.json"));function u(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(t,n,i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i,r));return a.accountId=parseInt(a.bidParams.accountId),a.zoneId=parseInt(a.bidParams.zoneId),a.siteId=parseInt(a.bidParams.siteId),a.sizeId=parseInt(a.bidParams.sizeId||201),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default),i(e,[{key:"_getScreenResolution",value:function(){return[window.screen.width,window.screen.height].join("x")}},{key:"getSlotId",value:function(){return this._cabinet.uuid}},{key:"isInvalidParams",value:function(){return!this.siteId||(0,o.default)(this.siteId)||!this.zoneId||(0,o.default)(this.zoneId)||!this.accountId||(0,o.default)(this.accountId)||!this.sizeId||(0,o.default)(this.sizeId)}},{key:"getRequestParams",value:function(t){if(this.isInvalidParams())return null;var e={page_url:this.domainToPass,resolution:this._getScreenResolution(),account_id:this.accountId,integration:"pbjs_lite_v0.30.0-pre","x_source.tid":this._cabinet.uuid,timeout:1e3,stash_creatives:!1,slots:[]},n={site_id:this.siteId,zone_id:this.zoneId,position:"btf",floor:parseFloat(this.bidFloor)>.01?this.bidFloor:.01,element_id:this.getSlotId(),name:this.getSlotId(),language:"en",width:this.widthToPass(t),height:this.heightToPass(t),size_id:this.sizeId};return this.keywords&&Array.isArray(this.keywords)&&(n.keywords=this.keywords),e.slots.push(n),e}},{key:"getUrl",value:function(){return this._cabinet.pageProtocol+"//fastlane-adv.rubiconproject.com/v1/auction/video"}},{key:"getTimeoutInfo",value:function(){return this.cabinet.timeoutManager.getTimeoutInfo(this.demandTag.waterfallIdx,{timeout:_.default.RUBICON_TIMEOUT,reason:s.VD_ERROR_CODES.RUBICON_TIMEOUT})}},{key:"_ajaxIt",value:function(t,e,n){var i=this.handleResponse.bind(this),r=this.handleError.bind(this);(0,a.ajax)(t,this.getTimeoutInfo(),{success:function(t){i(t,n)},error:function(){r()}},JSON.stringify(e),{method:"POST",withCredentials:!0})}},{key:"_containerRequestVast",value:function(t){var e=this.getRequestParams();null!==e?this._ajaxIt(this.getUrl(),e,t):this.failedBidRequest()}},{key:"handleError",value:function(){this.failedBidRequest()}},{key:"handleResponse",value:function(t,e){var n=null;try{n=JSON.parse(t).ads[this.getSlotId()][0]}catch(t){return void this.failedBidRequest()}if(null!==n&&this.validBid(n.cpm)){var i=(new DOMParser).parseFromString(n.creative_content,"application/xml"),r={bp:n.cpm};this._getAdVast(e).processVast(i,"",r)}else this.failedBidRequest()}}]),e}();n.default=l},{"../../../../configs/timeouts.json":2,"../constants":234,"../ss_utils/ajax":239,"./header_bidding_ad_container":202,"lodash/isNaN":168}],206:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=c(t("lodash/forEach")),a=c(t("../ss_utils/async_js_loader")),o=l(t("../constants")),s=l(t("../utils")),_=c(t("lodash/pick")),u=c(t("./header_bidding_ad_container"));function l(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function c(t){return t&&t.__esModule?t:{default:t}}var d=["content_id","ad_mute","custom"],h=function(t){function e(t,n,i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i,r));return a.channelId=null,a.bidParams.hasOwnProperty("channel_id")&&(a.channelId=a.bidParams.channel_id),a.spotxOptions=null,a.stateInfo=null,a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,u.default),i(e,[{key:"validBid",value:function(t){return null!==t&&(!(!t.hasOwnProperty("spotx_bid")||!t.hasOwnProperty("spotx_ad_key"))&&function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,n,i)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(i):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"validBid",this).call(this,t.spotx_bid))}},{key:"_setSpotxOptions",value:function(t){var e=this;if(null===this.spotxOptions){this.spotxOptions={channel_id:this.channelId,video_slot:this._initParams.environmentVars.videoSlot,slot:this._initParams.environmentVars.slot,content_width:this.widthToPass(t),content_height:this.heightToPass(t),contentPageUrl:this.domainToPass,content_page_url:this.domainToPass};var n=(0,_.default)(this.bidOptionalParams,d);(0,r.default)(n,function(t,n){e.spotxOptions[n]=t})}}},{key:"_getScriptUrl",value:function(){return this._cabinet.pageProtocol+"//js.spotx.tv/directsdk/v1/"+this.spotxOptions.channel_id+".js"}},{key:"_handleDirectAdOsFailure",value:function(){this.failedBidRequest()}},{key:"_getSpotxVastUrl",value:function(t){return this._cabinet.pageProtocol+"//search.spotxchange.com/ad/vast.html?key="+t}},{key:"_handleDirectAdOsSuccess",value:function(t){if(this.validBid(t)){var e={bp:t.spotx_bid},n=this._getSpotxVastUrl(t.spotx_ad_key);this._demandTag.url=n,this._getAdVast(this.stateInfo).requestVast(n,!0,e)}else this.failedBidRequest()}},{key:"_getDirectAdOs",value:function(){return new SpotX.DirectAdOS(this.spotxOptions)}},{key:"_handleScriptLoadSuccess",value:function(){var t=null;try{t=this._getDirectAdOs()}catch(t){return void this.failedBidRequest(o.VD_ERROR_CODES.HB_BID_ERROR+"_"+t.message)}t.getAdServerKVPs().then(this._handleDirectAdOsSuccess.bind(this),this._handleDirectAdOsFailure.bind(this))}},{key:"_containerRequestVast",value:function(t){if(this.stateInfo=t,null!==this.channelId){try{s.maybeCreateVideoSlot(this._initParams.environmentVars,this._cabinet.videoElementManager)}catch(t){return void this.failureCb()}this._setSpotxOptions(t);var e=this._handleScriptLoadSuccess.bind(this);this._scriptLoaderFunc(this._getScriptUrl(),e)}else this.failureCb()}},{key:"_scriptLoaderFunc",get:function(){return a.default}}]),e}();n.default=h},{"../constants":234,"../ss_utils/async_js_loader":240,"../utils":245,"./header_bidding_ad_container":202,"lodash/forEach":153,"lodash/pick":185}],207:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=_(t("./header_bidding_ad_container")),a=_(t("../ss_utils/async_js_loader")),o=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(t("../ad_vast")),s=_(t("lodash/isNaN"));function _(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t,n,i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i,r));return a.zoneId=null,a.bidParams.hasOwnProperty("zoneId")&&(a.zoneId=parseInt(a.bidParams.zoneId)),a.topMostWindow=a.getTopMostWindow(),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default),i(e,[{key:"_containerRequestVast",value:function(t){(null===this.zoneId||(0,s.default)(this.zoneId))&&this.failedBidRequest("STICKY_INVALID_ZONEID");var e=function(){this.getBid({},t)}.bind(this),n=this._cabinet.pageProtocol+"//cdn.stickyadstv.com/mustang/mustang.min.js";(0,a.default)(n,e,!0)}},{key:"getTopMostWindow",value:function(){var t=window;try{for(var e=0;t&&t.parent&&t!==t.parent&&e<50;)t.parent.location.href.length&&(t=t.parent),e++}catch(t){}return t}},{key:"onStickyVastLoadSuccess",value:function(t){var e=null;try{e=(new DOMParser).parseFromString(this.bid.vast.xml(),"application/xml")}catch(t){return void this.failedBidRequest("STICKY_HB_VAST_PARSE_ERROR")}var n=new o.AdVast(this._cabinet,this.sendJsDemandResponse.bind(this),this._demandTag,this.successCb.bind(this),this.failureCb.bind(this),this._initParams.environmentVars,this.callLogEvent_.bind(this),t),i=this.bid.vast.getPricing();if(i&&this.validBid(i.price))if("USD"===i.currency){var r={bp:i.price};n.processVast(e,"",r)}else this.failedBidRequest("STICKY_CURRENCY_NON_USD_"+i.currency);else this.failedBidRequest()}},{key:"getBid",value:function(t){var e=window.com.stickyadstv.tools;e&&e.ASLoader&&(this.topMostWindow.stickyadstv_asLoader=new e.ASLoader(this.zoneId,"mustang"));var n=new window.com.stickyadstv.vast.VastLoader;this.bid={},this.bid.vast=n.getVast();var i={onSuccess:function(){this.onStickyVastLoadSuccess(t)}.bind(this),onError:function(){this.failedBidRequest("STICKY_FAILED_VASTCALLBACK")}.bind(this)},r={zoneId:this.zoneId,playerSize:this.widthToPass(t)+"x"+this.heightToPass(t),vastUrlParams:{},componentId:"mustang"};n.load(r,i)}}]),e}();n.default=u},{"../ad_vast":221,"../ss_utils/async_js_loader":240,"./header_bidding_ad_container":202,"lodash/isNaN":168}],208:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=u(t("./header_bidding_ad_container")),a=t("../ss_utils/ajax"),o=u(t("lodash/forEach")),s=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(t("../constants")),_=u(t("../../../../configs/timeouts.json"));function u(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(t,n,i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i,r));return a.adCode=null,a.supplyCode=null,a.setParams(),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default),i(e,[{key:"getTimeoutInfo",value:function(){return this.cabinet.timeoutManager.getTimeoutInfo(this.demandTag.waterfallIdx,{timeout:_.default.TELARIA_TIMEOUT,reason:s.VD_ERROR_CODES.TELARIA_TIMEOUT})}},{key:"setParams",value:function(){this.bidParams.hasOwnProperty("adCode")&&(this.adCode=this.bidParams.adCode),this.bidParams.hasOwnProperty("supplyCode")&&(this.supplyCode=this.bidParams.supplyCode)}},{key:"_ajaxIt",value:function(t,e){var n=this.handleResponse.bind(this),i=this.handleError.bind(this);t&&(0,a.ajax)(t,this.getTimeoutInfo(),{success:function(t){n(t,e)},error:function(){i()}},null,{method:"GET",withCredentials:!0})}},{key:"_containerRequestVast",value:function(t){var e=this.generateUrl(t);null!==e?this._ajaxIt(e,t):this.failedBidRequest()}},{key:"handleError",value:function(){this.failedBidRequest()}},{key:"generateUrl",value:function(t){if(null===this.adCode||null===this.supplyCode)return null;var e=this.widthToPass(t),n=this.heightToPass(t),i=this._cabinet.pageProtocol+"//"+this.supplyCode+".ads.tremorhub.com/ad/tag?adCode="+this.adCode;return i+="&playerWidth="+e,i+="&playerHeight="+n,i+="&srcPageUrl="+encodeURIComponent(this.domainToPass),i+="&fmt=json"}},{key:"getBestBid",value:function(t){var e=null;return(0,o.default)(t.seatbid,function(t){(0,o.default)(t.bid,function(t){(null===e||t.price>e.price)&&(e=t)})}),e}},{key:"handleResponse",value:function(t,e){var n=void 0;try{n=JSON.parse(t)}catch(t){console.log(t)}if(!n.hasOwnProperty("seatbid")||n.seatbid.length<1)this.failedBidRequest();else{var i=this.getBestBid(n);if(null!==i&&this.validBid(i.price)){var r=(new DOMParser).parseFromString(i.adm,"application/xml"),a=this._getAdVast(e),o={bp:i.price};a.processVast(r,"",o)}else this.failedBidRequest()}}}]),e}();n.default=l},{"../../../../configs/timeouts.json":2,"../constants":234,"../ss_utils/ajax":239,"./header_bidding_ad_container":202,"lodash/forEach":153}],209:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.AdController=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,n,i)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(i):void 0};n.getJsonUrl=P;var a=b(t("lodash/defaults")),o=b(t("lodash/map")),s=b(t("lodash/isElement")),_=I(t("./ad_manifest")),u=b(t("./ad_pixel")),l=b(t("./ad_processor")),c=b(t("./ad_js_bridge_manager")),d=b(t("./ad_vd")),h=I(t("./constants")),f=b(t("./fsm")),p=I(t("./moat_wrapper")),E=I(t("./ssc_detection")),A=I(t("./utils")),v=b(t("../../../configs/vendor/moat.json")),R=I(t("./__IASVANS_3.5.0")),O=I(t("../../../configs/vendor/ias.json")),S=b(t("../../../configs/timeouts.json")),y=I(t("./post_imp_detection")),T=I(t("./viewability_detection")),g=b(t("./unload_detection")),m=b(t("./cabinet"));function I(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function b(t){return t&&t.__esModule?t:{default:t}}function P(t,e,n){var i={};if(null!==t.manifest.urlparams)for(var r in t.manifest.urlparams)t.manifest.urlparams.hasOwnProperty(r)&&(i[r]=t.manifest.urlparams[r]);return i[h.JSON_PIXEL_PARAMS.declaredDomain]=t.manifest.domain,i[h.JSON_PIXEL_PARAMS.declaredWidth]=t.manifest.width,i[h.JSON_PIXEL_PARAMS.declaredHeight]=t.manifest.height,i[h.JSON_PIXEL_PARAMS.detectedDomain]=t.locationInfo.domain_match,i[h.JSON_PIXEL_PARAMS.detectedWidth]=e.detectedWidth,i[h.JSON_PIXEL_PARAMS.detectedHeight]=e.detectedHeight,i[h.JSON_PIXEL_PARAMS.fullUrl]=t.locationInfo.url,i[h.JSON_PIXEL_PARAMS.cb]=A.getCb(),i[h.JSON_PIXEL_PARAMS.url]=t.manifest.td?t.locationInfo.domain_match:t.manifest.domain,i[h.JSON_PIXEL_PARAMS.w]=t.manifest.ts?e.detectedWidth:t.manifest.width,i[h.JSON_PIXEL_PARAMS.h]=t.manifest.ts?e.detectedHeight:t.manifest.height,A.makeUrl(A.getProtocol(n),t.endpoint+"/json/"+t.manifest.supplyTagId,i)}n.AdController=function(t){function e(t,n,i,r,a,o){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var _=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"AdController"));return _._cabinet=new m.default(t,n,i,r,a,o,S.default),_._moatApiReference=null,_._iasApiReference=null,_._fsmVpaidEvent=new f.default(h.VPAID_FINAL_EVENTS,h.VPAID_ONCE_EVENTS),_._fsmPixelEvent=new f.default(h.PIXEL_MUTEX_EVENTS,h.PIXEL_ONCE_EVENTS),_._adPixel=new u.default(document),_._unloadDetection=new g.default(_._cabinet,_._initParams,_._fsmVpaidEvent,s,_._adPixel),_}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,d.default),i(e,[{key:"replaceBidPriceMacro",value:function(t,e){return(0,o.default)(t,function(t){var n=t.url;return n.indexOf("{{")>=0?(0,a.default)({},{url:n.replace(h.HB_BID_PRICE_MACRO,e)},t):t})}},{key:"callEvent_",value:function(t){for(var e=this,n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];if(this._fsmVpaidEvent.sendEventType(t)){if(h.VOLUME_EVENTS.hasOwnProperty(t)&&this.setAdVolumeInternal(this.getAdVolumeInternal()),null!==this._ad&&this._ad._currentWaterfallIndex>=0&&this._ad._currentWaterfallIndex<this._cabinet.manifest.dx.length){var a=_.getPixelUrlsByEvent(this._cabinet.manifest.dx[this._ad._currentWaterfallIndex][0],t);t===h.VPAID_EVENTS.AdImpression&&this._ad._ad.hasOwnProperty("_vast")&&this._ad._ad._vast.hasOwnProperty("hbDetails")&&(a=this.replaceBidPriceMacro(a,this._ad._ad._vast.hbDetails.bp)),A.firePixels(document,a)}if(null!==this._moatApiReference){var o={type:t,adVolume:this.getAdVolumeInternal()};this._moatApiReference.dispatchEvent(o)}if(h.IAS_EVENTS.hasOwnProperty(t)&&null!==this._iasApiReference){var s={ad_duration:this._ad.getAdDuration(),ad_dimensions:this._initParams.width+"x"+this._initParams.height,player_dimensions:this._initParams.environmentVars.videoSlot.width+"x"+this._initParams.environmentVars.videoSlot.height,volume:this.getAdVolumeInternal()};this._iasApiReference.sendEvent(t,s)}t===h.VPAID_EVENTS.AdLoaded&&null!==this._ad&&this._ad.setAdVolume(this.getAdVolumeInternal());var u=function(){e.callSuperEvent.apply(e,[t].concat(i))};if(h.VPAID_FINAL_EVENTS.hasOwnProperty(t)&&!this._adPixel.isDone){var l=setTimeout(function(){e._adPixel.unsubscribe(h.AD_PIXEL_EVENTS.DONE),u()},S.default.VPAID_FINAL_EVENT_TIMEOUT);this._adPixel.subscribe(function(){clearTimeout(l),this._adPixel.unsubscribe(h.AD_PIXEL_EVENTS.DONE),u()},h.AD_PIXEL_EVENTS.DONE,this)}else u()}}},{key:"callSuperEvent",value:function(t){for(var n,i=arguments.length,a=Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];(n=r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"callEvent_",this)).call.apply(n,[this,t].concat(a))}},{key:"initAd",value:function(t,n,i,a,o,u){var l=this;try{r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initAd",this).call(this,t,n,i,a,o,u)}catch(t){return void this.initAdError(h.VD_ERROR_CODES.INIT_AD_ERROR,t)}try{this._cabinet.manifest=_.parse(JSON.parse(this._creativeData.AdParameters))}catch(t){return void this.initAdError(h.VD_ERROR_CODES.MANIFEST_PARSE_ERROR,t)}try{this._cabinet.jsBridgeManager=new c.default(this._cabinet.uuid,this._cabinet.flashBridgeUrl)}catch(t){return void this.initAdError(h.VD_ERROR_CODES.JS_BRIDGE_MANAGER_CREATE_ERROR,t)}try{this._unloadDetection.registerUnloads()}catch(t){return void this.initAdError(h.VD_ERROR_CODES.UNLOAD_DETECTION_INIT_ERROR,t)}var d=void 0;try{d=this._cabinet.getStateInfo(this._initParams)}catch(t){return void this.initAdError(h.VD_ERROR_CODES.INIT_AD_STATE_INFO_ERROR,t)}var f=void 0;try{f=this._cabinet.isDomainMatch}catch(t){return void this.initAdError(h.VD_ERROR_CODES.INIT_AD_TD_MISMATCH_ERROR,t)}var p=void 0;try{p=this._cabinet.isSizeMatch(d)}catch(t){return void this.initAdError(h.VD_ERROR_CODES.INIT_AD_TS_MISMATCH_ERROR,t)}try{if(this._cabinet.manifest.td&&!f||this._cabinet.manifest.ts&&!p)return void this.getNewAdParameters(t,n,i,a,o,u,d)}catch(t){return void this.initAdError(h.VD_ERROR_CODES.INIT_AD_GET_NEW_AD_PARAMETERS_ERROR,t)}var E=!1,A=function(){if(!E){E=!0;try{l.postInit(t,n,i,a,o,u)}catch(t){l.postInitError(t)}}};try{var v=(0,s.default)(this._initParams.environmentVars.videoSlot)?this._initParams.environmentVars.videoSlot:this._initParams.environmentVars.slot;T.init(v,document,A)}catch(t){}setTimeout(A,50)}},{key:"postInit",value:function(t,e,n,i,r,a){if(0===this._cabinet.manifest.numWaterfalls)throw new Error(h.VD_ERROR_CODES.NO_RESPONSES);try{this.callSSEvent_(h.VID_IO_EVENTS.js_opportunity,null,{},null)}catch(t){throw new Error(h.VD_ERROR_CODES.JS_OPPORTUNITY_ERROR)}this._cabinet.initialize(a);try{this._ad=new l.default(this._cabinet,this._initParams),this._ad.handshakeVersion(this._handshakeVersion),this.registerVpaidEventListeners_(this._ad),this.registerLogEventListeners_(this._ad),this.registerSSEventListeners_(this._ad)}catch(t){throw new Error(h.VD_ERROR_CODES.PROCESSOR_CREATE_ERROR)}try{A.firePixels(document,_.getPixelUrlsByEvent(this._cabinet.manifest,h.PIXEL_EVENTS.initAd))}catch(t){throw new Error(h.VD_ERROR_CODES.FIRE_INIT_AD_PIXELS_ERROR)}try{this._ad.initAd(t,e,n,i,r,a)}catch(t){throw new Error(h.VD_ERROR_CODES.PROCESSOR_INIT_ERROR)}try{this._ad.nextBroadcast()}catch(t){throw new Error(h.VD_ERROR_CODES.PROCESSOR_NEXT_BROADCAST_ERROR)}}},{key:"resizeAd",value:function(t,n,i){if(r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"resizeAd",this).call(this,t,n,i),this._ad&&null!==this._iasApiReference){var a={ad_duration:this._ad.getAdDuration(),ad_dimensions:this._initParams.width+"x"+this._initParams.height,player_dimensions:this._initParams.environmentVars.videoSlot.width+"x"+this._initParams.environmentVars.videoSlot.height,volume:this.getAdVolumeInternal(),height:n,width:t,viewMode:i};this._iasApiReference.sendEvent("resizeAd",a)}}},{key:"startAd",value:function(){r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"startAd",this).call(this),this._ad&&this._ad.setAdVolume(this.getAdVolumeInternal())}},{key:"postInitError",value:function(t){this.initAdError(t&&t.message?t.message:h.VD_ERROR_CODES.AD_CONTROLLER_ERROR,t?t.error:null)}},{key:"initAdError",value:function(t,e){var n=void 0,i=void 0;try{var r="null"===t?h.VD_ERROR_CODES.RECEIVED_NULL_STRING:t;"null"===(n=(r||h.VD_ERROR_CODES.INIT_AD_EMPTY_ERROR)+(e?"_"+e.message:""))&&(n=h.VD_ERROR_CODES.INIT_AD_NULL_ERROR),i={reason:A.getTruncatedString(n,h.AD_ERROR_TRUNCATION_LENGTH),timeout:!1,on_page_time:0},this._cabinet&&null!==this._cabinet.timeoutManager&&t!==h.VD_ERROR_CODES.TIMEOUT_MANAGER_INIT_ERROR&&(i.on_page_time=this._cabinet.timeoutManager.timeOnPage)}catch(r){n=h.VD_ERROR_CODES.INIT_AD_ERROR_EXCEPTION,i={reason:n,timeout:!1,on_page_time:0}}this.callSSEvent_(h.VID_IO_EVENTS.js_supply_error,null,i,null),this.callEvent_(h.VPAID_EVENTS.AdError,n)}},{key:"on_js_impression",value:function(t,n,i){E.load(document,this._cabinet.manifest,t,this._initParams.width,this._initParams.height,this._cabinet.locationInfo.domain_match,A.SECURE_PROTOCOL).length;var a=this._cabinet.getStateInfo(this._initParams);if(null===this._moatApiReference&&y.shouldFire(this._cabinet.manifest,t,h.POST_IMP_PROVIDER_ID_MOAT)){var o=y.addMoatToCallChain(this._cabinet.manifest,t);this._moatApiReference=p.initMoatTracking(this._initParams.environmentVars.slot,{level1:this._cabinet.manifest.aid,level2:this._cabinet.manifest.supplyTagId,level3:this._cabinet.manifest.domain,level4:h.MOAT_DUMMY_VALUE,slicer1:h.MOAT_DUMMY_VALUE,slicer2:o,zMoatCountry:this._cabinet.manifest.country,zMoatSSSize:this._cabinet.manifest.width+"x"+this._cabinet.manifest.height,zMoatSSDetSize:a.detectedWidth+"x"+a.detectedHeight,zMoatSSDetDomain:this._cabinet.locationInfo.domain_match},this.getAdDuration(),v.default.moatPartnerCode,this._initParams.environmentVars.videoSlot.src)}if(null===this._iasApiReference&&y.shouldFire(this._cabinet.manifest,t,h.POST_IMP_PROVIDER_ID_IAS)){var s={partner:O.partner,anId:O.adNetworkId,placementId:this._cabinet.manifest.supplyTagId,impId:this._cabinet.uuid},_=[];_.push(h.IAS_EXTRA_PARAMS.declaredDomain+"="+this._cabinet.manifest.domain),_.push(h.IAS_EXTRA_PARAMS.declaredWidth+"="+this._cabinet.manifest.width),_.push(h.IAS_EXTRA_PARAMS.declaredHeight+"="+this._cabinet.manifest.height),_.push(h.IAS_EXTRA_PARAMS.detectedDomain+"="+this._cabinet.locationInfo.domain_match),_.push(h.IAS_EXTRA_PARAMS.detectedWidth+"="+a.detectedWidth),_.push(h.IAS_EXTRA_PARAMS.detectedHeight+"="+a.detectedHeight),_.push(h.IAS_EXTRA_PARAMS.aId+"="+this._cabinet.manifest.aid),_.push(h.IAS_EXTRA_PARAMS.aCc+"="+t.a_cc),_.push(h.IAS_EXTRA_PARAMS.ssId+"="+this._cabinet.manifest.ssid),_.push(h.IAS_EXTRA_PARAMS.country+"="+this._cabinet.manifest.country),s.planId=_.join("|"),this._iasApiReference=new R.__IASVANS,this._iasApiReference.initCM(s,this._initParams.environmentVars.slot)}r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"on_js_impression",this).call(this,t,n,i)}},{key:"getVidIoPixel",value:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return u.default.makeVidIoPixel.apply(u.default,[this._cabinet,this._initParams,t].concat(n))}},{key:"callSSEvent_",value:function(t){if(h.VID_IO_EVENTS.hasOwnProperty(t)&&this._fsmPixelEvent.sendEventType(t)){for(var n,i=arguments.length,a=Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];(n=r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"callSSEvent_",this)).call.apply(n,[this,t].concat(a)),this._adPixel.addImage(this.getVidIoPixel.apply(this,[t].concat(a)))}}},{key:"getNewAdParameters",value:function(t,e,n,i,r,o,s){var u=this,l=A.getRequestMethod(P(this._cabinet,s,this._cabinet.forceSecure||this._cabinet.manifest.secure),!0);if(l){var c=l.xhr;c.timeout=S.default.JSON_TIMEOUT,c.ontimeout=function(){u.initAdError(h.VD_ERROR_CODES.JSON_TIMEOUT,null)},c.onload=function(){if(200===c.status){var s=void 0;try{var l=JSON.parse(c.responseText),d={dx:l.dx};l.hasOwnProperty("dto")&&(d.dto=l.dto),s=(0,a.default)(d,JSON.parse(u._creativeData.AdParameters)),u._creativeData.AdParameters=JSON.stringify(s),r.AdParameters=u._creativeData.AdParameters}catch(t){return void u.initAdError(h.VD_ERROR_CODES.JSON_RESPONSE_PARSE_ERROR,t)}try{u._cabinet.manifest=_.parse(s),u._cabinet.wasReauctioned=!0}catch(t){return void u.initAdError(h.VD_ERROR_CODES.JSON_MANIFEST_PARSE_ERROR,t)}try{u.postInit(t,e,n,i,r,o)}catch(t){u.postInitError(t)}}else u.initAdError(h.VD_ERROR_CODES.BAD_XHR_STATUS+"_"+c.status,null)},c.onerror=function(){u.initAdError(h.VD_ERROR_CODES.XHR_ERROR,null)},c.send()}else this.initAdError(h.VD_ERROR_CODES.NO_XHR,null)}}]),e}()},{"../../../configs/timeouts.json":2,"../../../configs/vendor/ias.json":3,"../../../configs/vendor/moat.json":4,"./__IASVANS_3.5.0":197,"./ad_js_bridge_manager":213,"./ad_manifest":216,"./ad_pixel":217,"./ad_processor":218,"./ad_vd":224,"./cabinet":228,"./constants":234,"./fsm":235,"./moat_wrapper":237,"./post_imp_detection":238,"./ssc_detection":242,"./unload_detection":244,"./utils":245,"./viewability_detection":248,"lodash/defaults":146,"lodash/isElement":164,"lodash/map":180}],210:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,n,i)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(i):void 0},a=A(t("lodash/map")),o=A(t("lodash/forEach")),s=A(t("lodash/extend")),_=A(t("./ad_state")),u=A(t("./child_vpaid/video_wrapper")),l=E(t("./ad_iframe")),c=A(t("./ad_pixel")),d=E(t("./constants")),h=E(t("./utils")),f=A(t("../../../configs/timeouts.json")),p=A(t("./child_vpaid/ima_wrapper"));function E(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function A(t){return t&&t.__esModule?t:{default:t}}var v=function(t){function e(t,n,i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"DemandRequest",t,n));return a._demandTag=i,a._vast=r,a._creativeType=null,a._slotListeners={},a._iframe=null,a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,_.default),i(e,[{key:"fireVastPixels",value:function(t,e){try{this.callLogEvent_(d.LOG_EVENTS.VAST_FIRE_PIXEL,t)}catch(t){}try{h.firePixels(document,(0,a.default)(e,function(t){return t.replace(d.VAST_MACROS.CACHEBUSTING,h.getCb())}))}catch(e){try{this.callLogEvent_(d.LOG_EVENTS.VAST_FIRE_PIXEL_ERROR,t)}catch(t){}}}},{key:"fireErrorPixels",value:function(){this.fireVastPixels(d.VAST_PIXEL_TYPES.VAST_ERROR,(0,a.default)(this._vast.errorPixels,function(t){return t.replace(d.VAST_MACROS.ERRORCODE,d.VAST_ERRORCODES.VAST_ERRORCODE_901)}))}},{key:"demandError",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d.VAST_ERRORCODES.VAST_ERRORCODE_901;this.fireErrorPixels(),this.vidIODemandError(t,e,n)}},{key:"getOptions",value:function(t){return null!==this._vast.ortb_detail?(0,s.default)(t,this._vast.ortb_detail):this._vast.hasOwnProperty("hbDetails")&&null!==this._vast.hbDetails?(0,s.default)(t,this._vast.hbDetails):t}},{key:"vidIODemandError",value:function(t,e){var n,i,r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d.VAST_ERRORCODES.VAST_ERRORCODE_901;this.callSSEvent_(d.VID_IO_EVENTS.js_demand_error,this._demandTag,this.getOptions((n={cc_i:this._demandTag.callChain.getCallChainIndices(this._cabinet.historyManager.demand_events.error,!0).join(","),response_time:this._cabinet.timeoutManager.getDemandTagResponseTime(this._demandTag.waterfallIdx,this._demandTag.broadcastIdx),reason:t,timeout:e,creative_type:this._creativeType},i=d.VID_IO_PARAMS.vastErrorCode,r=a,i in n?Object.defineProperty(n,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[i]=r,n)),null)}},{key:"getCreativeData",value:function(){return{AdParameters:this._vast.adParameters}}},{key:"bridgeLoadBegin",value:function(){var t=this._cabinet.timeoutManager.getDemandTagTimeoutInfo(this._demandTag.waterfallIdx,this._demandTag.broadcastIdx,null);if(t.timeout<=0){try{this.stopAd()}catch(t){}this.demandError(t.reason,!0,d.VAST_ERRORCODES.VAST_ERRORCODE_301)}else{try{this._cabinet.jsBridgeManager.adJsBridge.load(this._vast)}catch(t){this.demandError(d.VD_ERROR_CODES.JS_VPAID_BRIDGE_LOAD_ERROR,!1,d.VAST_ERRORCODES.SS_VAST_ERRORCODE_1501)}try{this.begin(this.getCreativeData(),this._cabinet.jsBridgeManager.adJsBridge,this._initParams.environmentVars)}catch(t){try{this.stopAd()}catch(t){}this.demandError(d.VD_ERROR_CODES.JS_VPAID_BRIDGE_BEGIN_ERROR,!1,d.VAST_ERRORCODES.SS_VAST_ERRORCODE_1502)}}}},{key:"load",value:function(){var t=this;try{if(null!==this._vast.imaTagUrl)this._creativeType=d.CREATIVE_TYPES.IMA;else if(this._vast.hasPlayableMedia)this._creativeType=d.CREATIVE_TYPES.MEDIA;else if(null!==this._vast.jsVpaidUrl)this._creativeType=d.CREATIVE_TYPES.JS_VPAID;else if(null!==this._vast.flashVpaidUrl)this._creativeType=d.CREATIVE_TYPES.FLASH_VPAID;else{if(!(this._vast.xFlvMedia.length>0))return void this.demandError(d.VD_ERROR_CODES.VAST_LOGIC_ERROR,!1,d.VAST_ERRORCODES.VAST_ERRORCODE_403);this._creativeType=d.CREATIVE_TYPES.XFLV}if(this.callSSEvent_(d.VID_IO_EVENTS.js_demand_opportunity,this._demandTag,this.getOptions({cc_i:this._demandTag.callChain.getCallChainIndices(this._cabinet.historyManager.demand_events.opportunity,!0).join(","),response_time:this._cabinet.timeoutManager.getDemandTagResponseTime(this._demandTag.waterfallIdx,this._demandTag.broadcastIdx),creative_type:this._creativeType}),null),this._creativeType===d.CREATIVE_TYPES.IMA)try{this.begin(this.getCreativeData(),new p.default(this._cabinet,this._vast),this._initParams.environmentVars)}catch(t){try{this.stopAd()}catch(t){}this.demandError(d.VD_ERROR_CODES.IMA_WRAPPER_BEGIN_ERROR,!1,d.VAST_ERRORCODES.SS_VAST_ERRORCODE_1503)}else if(this._creativeType===d.CREATIVE_TYPES.MEDIA)try{var e=new u.default(this._cabinet,this._vast);this.addSlotEventListener_(d.ELEMENT_EVENTS.click,function(t){e.adClicked()}),this.begin(this.getCreativeData(),e,this._initParams.environmentVars)}catch(t){try{this.stopAd()}catch(t){}this.demandError(d.VD_ERROR_CODES.VIDEO_WRAPPER_BEGIN_ERROR,!1,d.VAST_ERRORCODES.SS_VAST_ERRORCODE_1504)}else if(this._creativeType===d.CREATIVE_TYPES.JS_VPAID){var n=this._cabinet.timeoutManager.getDemandTagTimeoutInfo(this._demandTag.waterfallIdx,this._demandTag.broadcastIdx,[{timeout:f.default.VPAID_SCRIPT_TIMEOUT,reason:d.VD_ERROR_CODES.VPAID_TIMEOUT}]);this._iframe=l.createIframe(this._cabinet.uuid,document,this._cabinet.manifest.enableFlashIframe?null:d.ALLOW_SCRIPTS,this._vast.jsVpaidUrl,n.timeout,function(){t.demandError(n.reason,!0,d.VAST_ERRORCODES.VAST_ERRORCODE_301)},function(e){if(t._isAdDead)return!1;var n=void 0;try{n=e.contentWindow.getVPAIDAd}catch(e){return t.demandError(d.VD_ERROR_CODES.GET_JS_VPAID_AD_ERROR,!1,d.VAST_ERRORCODES.SS_VAST_ERRORCODE_1509),!1}var i=n&&"function"==typeof n;if(i)try{t.begin(t.getCreativeData(),n(),t._initParams.environmentVars)}catch(e){try{t.stopAd()}catch(t){}return t.demandError(d.VD_ERROR_CODES.JS_VPAID_BEGIN_ERROR,!1,d.VAST_ERRORCODES.SS_VAST_ERRORCODE_1509),!1}else t.demandError(d.VD_ERROR_CODES.SCRIPT_ON_ERROR,!1,d.VAST_ERRORCODES.SS_VAST_ERRORCODE_1509);return i},function(){t.demandError(d.VD_ERROR_CODES.IFRAME_ON_ERROR,!1,d.VAST_ERRORCODES.SS_VAST_ERRORCODE_1509)})}else if(this._cabinet.jsBridgeManager._isSWFReady)this.bridgeLoadBegin();else if(this._cabinet.jsBridgeManager._embedResult&&!this._cabinet.jsBridgeManager._embedResult.success)this.demandError(d.VD_ERROR_CODES.JS_VPAID_EMBED_FAIL,!1,d.VAST_ERRORCODES.SS_VAST_ERRORCODE_1509);else{try{this._cabinet.jsBridgeManager.subscribeBridgeEvent(function(){},d.BRIDGE_EVENTS.EMBED_SUCCESS,this),this._cabinet.jsBridgeManager.subscribeBridgeEvent(function(){this.demandError(d.VD_ERROR_CODES.JS_VPAID_EMBED_FAIL,!1,d.VAST_ERRORCODES.SS_VAST_ERRORCODE_1509)},d.BRIDGE_EVENTS.EMBED_FAIL,this),this._cabinet.jsBridgeManager.subscribeBridgeEvent(function(){this._isAdDead||this.bridgeLoadBegin()},d.BRIDGE_EVENTS.SWF_IS_READY,this)}catch(t){return void this.demandError(d.VD_ERROR_CODES.JS_VPAID_BRIDGE_SUBSCRIBE_FAIL,!1,d.VAST_ERRORCODES.SS_VAST_ERRORCODE_1502)}if(null===this._cabinet.jsBridgeManager.adJsBridge)try{this._cabinet.jsBridgeManager.create(this._cabinet.manifest.secure,this._initParams.width,this._initParams.height,this._initParams.environmentVars.slot)}catch(t){try{this.stopAd()}catch(t){}this.demandError(d.VD_ERROR_CODES.AD_BRIDGE_CREATE_ERROR,!1,d.VAST_ERRORCODES.SS_VAST_ERRORCODE_1501)}}}catch(t){this.demandError(d.VD_ERROR_CODES.DEMAND_TAG_ERROR,!1,d.VAST_ERRORCODES.SS_VAST_ERRORCODE_1510)}}},{key:"begin",value:function(t,e,n){var i=this,r=this._cabinet.timeoutManager.getDemandTagTimeoutInfo(this._demandTag.waterfallIdx,this._demandTag.broadcastIdx,null);if(r.timeout<=0){try{this.stopAd()}catch(t){}this.demandError(r.reason,!0,d.VAST_ERRORCODES.VAST_ERRORCODE_301)}else{this._ad=e,this.registerVpaidEventListeners_(this._ad),this.demandTagTimeout_=setTimeout(function(){try{i.stopAd()}catch(t){}i.demandError(r.reason,!0,d.VAST_ERRORCODES.VAST_ERRORCODE_301)},r.timeout);try{this._ad.handshakeVersion(this._handshakeVersion)}catch(t){try{this.stopAd()}catch(t){}return void this.demandError(d.VD_ERROR_CODES.CHILD_HANDSHAKE_ERROR,!1,d.VAST_ERRORCODES.SS_VAST_ERRORCODE_1505)}try{this._ad.initAd(this._initParams.width,this._initParams.height,this._initParams.viewMode,this._initParams.desiredBitrate,t,n)}catch(t){try{this.stopAd()}catch(t){}return void this.demandError(d.VD_ERROR_CODES.CHILD_INIT_AD_ERROR,!1,d.VAST_ERRORCODES.SS_VAST_ERRORCODE_1506)}try{this._ad.setAdVolume(this.getAdVolume())}catch(t){}}}},{key:"addSlotEventListener_",value:function(t,e){this._slotListeners.hasOwnProperty(t)||(this._slotListeners[t]=[]),this._slotListeners[t].push(e),this._initParams.environmentVars.slot.addEventListener(t,e,!1)}},{key:"removeSlotEventListeners",value:function(){var t=this;(0,a.default)(this._slotListeners,function(e,n){(0,o.default)(t._slotListeners[n],function(e){t._initParams.environmentVars.slot.removeEventListener(n,e)})}),this._slotListeners={}}},{key:"stopAd",value:function(){this.removeSlotEventListeners(),r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"stopAd",this).call(this)}},{key:"maybeInitializeAdVolume",value:function(){if(!(this._isAdLoaded||this._isAdImpression||this._isAdStarted||this._isAdVideoStart))try{this._ad.setAdVolume(this.getAdVolume())}catch(t){try{this.stopAd()}catch(t){this.demandError(d.VD_ERROR_CODES.CHILD_SET_VOLUME_ERROR,!1,d.VAST_ERRORCODES.SS_VAST_ERRORCODE_1507)}}}},{key:"onAdLoaded",value:function(){this.maybeInitializeAdVolume(),r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdLoaded",this).call(this)}},{key:"onAdStarted",value:function(){this.maybeInitializeAdVolume(),this.fireVastPixels(d.VAST_PIXEL_TYPES.VAST_CREATIVEVIEW,this._vast.trackingEvents.creativeView),r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdStarted",this).call(this)}},{key:"onAdVideoStart",value:function(){this.maybeInitializeAdVolume(),this.fireVastPixels(d.VAST_PIXEL_TYPES.VAST_START,this._vast.trackingEvents.start),r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdVideoStart",this).call(this)}},{key:"onAdImpression",value:function(){this.maybeInitializeAdVolume(),this.callSSEvent_(d.VID_IO_EVENTS.js_impression,this._demandTag,this.getOptions({time_on_page:this._cabinet.timeoutManager.timeOnPage,response_time:this._cabinet.timeoutManager.getDemandTagResponseTime(this._demandTag.waterfallIdx,this._demandTag.broadcastIdx),creative_type:this._creativeType,dtype:c.default.getDemandType(this._vast),ctype:c.default.getCreativeTypeToDemandType(this._creativeType)}),null),clearTimeout(this.demandTagTimeout_),this.fireVastPixels(d.VAST_PIXEL_TYPES.VAST_IMPRESSION,this._vast.impressionPixels),r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdImpression",this).call(this)}},{key:"onAdUserAcceptInvitation",value:function(){this.fireVastPixels(d.VAST_PIXEL_TYPES.VAST_ACCEPTINVITATION,this._vast.trackingEvents.acceptInvitation),this.fireVastPixels(d.VAST_PIXEL_TYPES.VAST_ACCEPTINVITATIONLINEAR,this._vast.trackingEvents.acceptInvitationLinear),r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdUserAcceptInvitation",this).call(this)}},{key:"onAdUserMinimize",value:function(){this.fireVastPixels(d.VAST_PIXEL_TYPES.VAST_COLLAPSE,this._vast.trackingEvents.collapse),r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdUserMinimize",this).call(this)}},{key:"onAdUserClose",value:function(){this.fireVastPixels(d.VAST_PIXEL_TYPES.VAST_CLOSELINEAR,this._vast.trackingEvents.closeLinear),r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdUserClose",this).call(this)}},{key:"onAdClickThru",value:function(t,n,i){this.callSSEvent_(d.VID_IO_EVENTS.js_click,this._demandTag,this.getOptions({creative_type:this._creativeType}),null),this.fireVastPixels(d.VAST_PIXEL_TYPES.VAST_CLICKTRACKING,this._vast.clickTracking),r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdClickThru",this).call(this,t,n,i)}},{key:"onAdVideoFirstQuartile",value:function(){this.fireVastPixels(d.VAST_PIXEL_TYPES.VAST_FIRSTQUARTILE,this._vast.trackingEvents.firstQuartile),this.callSSEvent_(d.VID_IO_EVENTS.js_first_quartile,this._demandTag,this._vast.ortb_detail||{},null),r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdVideoFirstQuartile",this).call(this)}},{key:"onAdVideoMidpoint",value:function(){this.fireVastPixels(d.VAST_PIXEL_TYPES.VAST_MIDPOINT,this._vast.trackingEvents.midpoint),this.callSSEvent_(d.VID_IO_EVENTS.js_midpoint,this._demandTag,this._vast.ortb_detail||{},null),r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdVideoMidpoint",this).call(this)}},{key:"onAdVideoThirdQuartile",value:function(){this.fireVastPixels(d.VAST_PIXEL_TYPES.VAST_THIRDQUARTILE,this._vast.trackingEvents.thirdQuartile),this.callSSEvent_(d.VID_IO_EVENTS.js_third_quartile,this._demandTag,this._vast.ortb_detail||{},null),r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdVideoThirdQuartile",this).call(this)}},{key:"onAdVideoComplete",value:function(){this.fireVastPixels(d.VAST_PIXEL_TYPES.VAST_COMPLETE,this._vast.trackingEvents.complete),this.callSSEvent_(d.VID_IO_EVENTS.js_complete,this._demandTag,this._vast.ortb_detail||{},null),r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdVideoComplete",this).call(this)}},{key:"onAdPaused",value:function(){this.fireVastPixels(d.VAST_PIXEL_TYPES.VAST_PAUSE,this._vast.trackingEvents.pause),r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdPaused",this).call(this)}},{key:"onAdPlaying",value:function(){this.fireVastPixels(d.VAST_PIXEL_TYPES.VAST_RESUME,this._vast.trackingEvents.resume),r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdPlaying",this).call(this)}},{key:"onAdVolumeChange",value:function(){0===this._volume&&this._previousVolume>0&&this.fireVastPixels(d.VAST_PIXEL_TYPES.VAST_MUTE,this._vast.trackingEvents.mute),this._volume>0&&0===this._previousVolume&&this.fireVastPixels(d.VAST_PIXEL_TYPES.VAST_UNMUTE,this._vast.trackingEvents.unmute),r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdVolumeChange",this).call(this)}},{key:"onAdStopped",value:function(){r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdStopped",this).call(this),this._isAdImpression||this.vidIODemandError(d.VD_ERROR_CODES.AD_STOPPED,!1)}},{key:"onAdSkipped",value:function(){this.fireVastPixels(d.VAST_PIXEL_TYPES.VAST_SKIP,this._vast.trackingEvents.skip),this.callSSEvent_(d.VID_IO_EVENTS.js_skip,this._demandTag,(0,s.default)({creative_type:this._creativeType},this._vast.ortb_detail||{})),r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdSkipped",this).call(this),this._isAdImpression||this.vidIODemandError(d.VD_ERROR_CODES.AD_SKIPPED,!1)}},{key:"onAdError",value:function(t){this.fireErrorPixels();var n=t?h.getTruncatedString(t,d.AD_ERROR_TRUNCATION_LENGTH):d.VD_ERROR_CODES.AD_ERROR;r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdError",this).call(this,n),this._isAdImpression||this.vidIODemandError(n,!1)}}]),e}();n.default=v},{"../../../configs/timeouts.json":2,"./ad_iframe":212,"./ad_pixel":217,"./ad_state":219,"./child_vpaid/ima_wrapper":232,"./child_vpaid/video_wrapper":233,"./constants":234,"./utils":245,"lodash/extend":148,"lodash/forEach":153,"lodash/map":180}],211:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=t("lodash/remove"),o=(i=a)&&i.__esModule?i:{default:i},s=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(t("./utils"));var _=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name="AdEventListener("+e+")",this._uuid=null,this._instanceId=s.getCb(),this._playerEventListeners={},this._logEventListeners={}}return r(t,[{key:"callEvent_",value:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];if(this._playerEventListeners.hasOwnProperty(t))for(var r=0;r<this._playerEventListeners[t].length;r++)this._playerEventListeners[t][r].apply(this._playerEventListeners[t][r],n)}},{key:"subscribe",value:function(t,e,n){this._playerEventListeners.hasOwnProperty(e)||(this._playerEventListeners[e]=[]),this._playerEventListeners[e].push(t.bind(n))}},{key:"unsubscribe",value:function(t){this._playerEventListeners&&this._playerEventListeners.hasOwnProperty(t)&&(this._playerEventListeners[t]=[])}},{key:"callLogEvent_",value:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];if(this._logEventListeners.hasOwnProperty(t))for(var r=0;r<this._logEventListeners[t].length;r++)this._logEventListeners[t][r].apply(this._logEventListeners[t][r],n)}},{key:"subscribeLogEvent",value:function(t,e,n){this._logEventListeners.hasOwnProperty(e)||(this._logEventListeners[e]=[]),this._logEventListeners[e].push(t.bind(n))}},{key:"unsubscribeLogEvent",value:function(t,e){this._logEventListeners&&this._logEventListeners.hasOwnProperty(t)&&(0,o.default)(this._logEventListeners[t],function(t){return t===e})}}]),t}();n.default=_},{"./utils":245,"lodash/remove":187}],212:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.createIframe=function(t,e,n,i,r,a,o,s){var _=!1,u=e.createElement("iframe");function l(t){return function(){_||(_=!0,s(u))}}u.id="iframe-"+t,null!==n&&(u.sandbox=n);var c=u.frameElement||u;c.style.border="0px",c.style.width="100%",c.style.height="100%",c.style.position="relative",c.style.overflow="hidden",c.scrolling="no",u.src="javascript:false",e.body.appendChild(u);var d=l("error"),h=l("abort"),f=l("beforeunload"),p=u.contentWindow,E=p.document;return E.open().write("<body onload=\"var js = document.createElement('script');js.src = '"+i+"';js.addEventListener('load', function() { window.onLoadFn(); });js.addEventListener('error', function() { window.onErrorFn(); });js.addEventListener('abort', function() { window.onAbortFn(); });js.addEventListener('beforeunload', function() { window.onBeforeunloadFn(); });document.body.appendChild(js);\">"),p.onLoadFn=function(){_||(_=!0,o(u))},p.onErrorFn=d,p.onAbortFn=h,p.onBeforeunloadFn=f,E.close(),setTimeout(function(){_||(_=!0,a(u))},r),u};!function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);e.default=t}}(t("./utils"))},{"./utils":245}],213:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=_(t("lodash/remove")),a=s(t("./constants")),o=(s(t("./utils")),_(t("./child_vpaid/bridge_wrapper")));function s(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function _(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._uuid=e,this._bridgeUrl=n,this._embedResult=null,this._isSWFReady=!1,this._adJsBridge=null,this._bridgeEventListeners={}}return i(t,[{key:"callBridgeEvent_",value:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];if(this._bridgeEventListeners.hasOwnProperty(t))for(var r=0;r<this._bridgeEventListeners[t].length;r++)this._bridgeEventListeners[t][r].apply(this._bridgeEventListeners[t][r],n)}},{key:"subscribeBridgeEvent",value:function(t,e,n){this._bridgeEventListeners.hasOwnProperty(e)||(this._bridgeEventListeners[e]=[]),this._bridgeEventListeners[e].push(t.bind(n))}},{key:"unsubscribeBridgeEvent",value:function(t,e){this._bridgeEventListeners.hasOwnProperty(t)&&(0,r.default)(this._bridgeEventListeners[t],function(t){return t===e})}},{key:"create",value:function(t,e,n,i){var r=this;this._adJsBridge=new o.default(this._uuid,t,this._bridgeUrl,e,n,i,function(t){r._embedResult=t,t.success?r.callBridgeEvent_(a.BRIDGE_EVENTS.EMBED_SUCCESS):r.callBridgeEvent_(a.BRIDGE_EVENTS.EMBED_FAIL)},function(){r._isSWFReady=!0,r.callBridgeEvent_(a.BRIDGE_EVENTS.SWF_IS_READY)})}},{key:"adJsBridge",get:function(){return this._adJsBridge}}]),t}();n.default=u},{"./child_vpaid/bridge_wrapper":231,"./constants":234,"./utils":245,"lodash/remove":187}],214:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(t("./constants"));var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._window__location__href=null,this._window__top__location__href=null,this._window__location__hostname=null,this._window__top__location__hostname=null,this._window__location__origin=null,this._window__top__location__origin=null,this._document__referrer=null,this._document__referrer__hostname=null,this._window__location__ancestorOrigins=null,this._window__location__ancestorOrigins__hostnames=null,this._topAncestorOrigin=null,this._topAncestorOriginHostname=null,this._parents=[],this._parent_location_href=[],this._top_parent_location_href=null,this._parent_hostnames=[],this._top_parent_hostname=null,this._url=null,this._domain_match=null,this._domain_match_source=null,this._iframeHeight=-1,this._top_idx_domain=-1,this._getVars(),this._url=this._getUrl();var e=this._getDomainMatchSource();this._domain_match=e.domain_match,this._domain_match_source=e.domain_match_source}return i(t,[{key:"_getVars",value:function(){try{this._window__location__href=window.location.href}catch(t){}try{this._window__top__location__href=window.top.location.href}catch(t){}try{this._window__location__hostname=window.location.hostname}catch(t){}try{this._window__top__location__hostname=window.top.location.hostname}catch(t){}try{this._window__location__origin=window.location.origin}catch(t){}try{this._window__top__location__origin=window.top.location.origin}catch(t){}try{this._document__referrer=document.referrer,this._document__referrer__hostname=t.getHostname(this._document__referrer)}catch(t){}try{this._window__location__ancestorOrigins=[],this._window__location__ancestorOrigins__hostnames=[];for(var e=0;e<window.location.ancestorOrigins.length;e++){var n=window.location.ancestorOrigins[e];this._window__location__ancestorOrigins.push(n);var i=t.getHostname(n);this._window__location__ancestorOrigins__hostnames.push(i)}}catch(t){}null!==this._window__location__ancestorOrigins&&this._window__location__ancestorOrigins.length>0&&(this._topAncestorOrigin=this._window__location__ancestorOrigins[this._window__location__ancestorOrigins.length-1]),null!==this._window__location__ancestorOrigins__hostnames&&this._window__location__ancestorOrigins__hostnames.length>0&&(this._topAncestorOriginHostname=this._window__location__ancestorOrigins__hostnames[this._window__location__ancestorOrigins__hostnames.length-1]);try{var a=window;this._iframeHeight=0;do{try{this._parents.push((o={},s=r.PARENT_WIN,_=a,s in o?Object.defineProperty(o,s,{value:_,enumerable:!0,configurable:!0,writable:!0}):o[s]=_,o))}catch(t){this._parents.push({error:t})}try{this._parent_location_href.push({url:a.location.href}),this._top_parent_location_href=a.location.href}catch(t){this._parent_location_href.push({error:t})}try{this._parent_hostnames.push({url:a.location.hostname}),this._top_parent_hostname=a.location.hostname,this._top_idx_domain=this._iframeHeight+1}catch(t){this._parent_hostnames.push({error:t})}a=a.parent,this._iframeHeight++}while(a!==window.top&&a!==a.parent&&this._iframeHeight<50)}catch(t){}var o,s,_}},{key:"_getDomainMatchSource",value:function(){if(null!==this._topAncestorOriginHostname&&""!==this._topAncestorOriginHostname)return{domain_match:this._topAncestorOriginHostname,domain_match_source:r.DOMAIN_MATCH_SOURCES.WINDOW_LOCATION_ANCESTORORIGINS};if(null!==this._window__top__location__hostname&&""!==this._window__top__location__hostname)return{domain_match:this._window__top__location__hostname,domain_match_source:r.DOMAIN_MATCH_SOURCES.WINDOW_TOP_LOCATION};if(this._iframeHeight<=1){if(null!==this._window__location__hostname&&""!==this._window__location__hostname)return{domain_match:this._window__location__hostname,domain_match_source:r.DOMAIN_MATCH_SOURCES.WINDOW_LOCATION}}else{if(!(2===this._iframeHeight||this._top_idx_domain<=2))return null!==this._top_parent_hostname&&""!==this._top_parent_hostname?{domain_match:this._top_parent_hostname,domain_match_source:r.DOMAIN_MATCH_SOURCES.TOP_PARENT+this._top_idx_domain}:null!==this._document__referrer__hostname&&""!==this._document__referrer__hostname?{domain_match:this._document__referrer__hostname,domain_match_source:r.DOMAIN_MATCH_SOURCES.DOCUMENT_REFERRER}:null!==this._window__location__hostname&&""!==this._window__location__hostname?{domain_match:this._window__location__hostname,domain_match_source:r.DOMAIN_MATCH_SOURCES.WINDOW_LOCATION}:{domain_match:null,domain_match_source:null};if(null!==this._document__referrer__hostname&&""!==this._document__referrer__hostname)return{domain_match:this._document__referrer__hostname,domain_match_source:r.DOMAIN_MATCH_SOURCES.DOCUMENT_REFERRER};if(null!==this._window__location__hostname&&""!==this._window__location__hostname)return{domain_match:this._window__location__hostname,domain_match_source:r.DOMAIN_MATCH_SOURCES.WINDOW_LOCATION}}}},{key:"_getUrl",value:function(){if(null!==this._window__top__location__href&&""!==this._window__top__location__href)return this._window__top__location__href;if(this._iframeHeight<=1){if(null!==this._window__location__href&&""!==this._window__location__href)return this._window__location__href}else if(2===this._iframeHeight||this._top_idx_domain<=2){if(null!==this._document__referrer&&""!==this._document__referrer)return this._document__referrer;if(null!==this._window__location__href&&""!==this._window__location__href)return this._window__location__href}else{if(null!==this._top_parent_location_href&&""!==this._top_parent_location_href)return this._top_parent_location_href;if(null!==this._document__referrer&&""!==this._document__referrer)return this._document__referrer;if(null!==this._window__location__href&&""!==this._window__location__href)return this._window__location__href}return null!==this._topAncestorOrigin&&""!==this._topAncestorOrigin?this._topAncestorOrigin:null}},{key:"url",get:function(){return this._url}},{key:"domain_match",get:function(){return this._domain_match}},{key:"domain_match_source",get:function(){return this._domain_match_source}},{key:"parents",get:function(){return this._parents}}],[{key:"getHostname",value:function(t){try{return new URL(t).hostname}catch(n){try{var e=new RegExp("(?:https?://)?(?:w+:/)?[^:?#/s]*?([^.s]+.(?:[a-z]{2,}|co.uk|org.uk|ac.uk|org.au|com.au))(?:[:?#/]|$)","gi").exec(t);return e?e[1]:null}catch(t){return null}}}}]),t}();n.default=a},{"./constants":234}],215:[function(t,e,n){(function(n){"use strict";var i=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(t("./ad_controller"));function r(){return new i.AdController("vid.springserve.com","vid-io.springserve.com/vd/i","vpaid.springserve.com/production/bridge_e396feda.swf","vpaid.springserve.com/posters/",!0,"0.2.95.11")}e.exports=r,n.getVPAIDAd=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ad_controller":209}],216:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getTimeoutFromObj=E,n.getPixelUrlsByEvent=function(t,e){if(t&&t.hasOwnProperty("pixels")&&null!==t.pixels&&t.pixels.hasOwnProperty(e))return t.pixels[e];return null},n.isValidPixel=A,n.parse=function(t){if(t.hasOwnProperty("passthru")&&!(0,o.default)(t.passthru))throw new Error(c.MANIFEST_PARSE_ERRORS.PASSTHRU);if(t.hasOwnProperty("urlparams")&&!(0,o.default)(t.urlparams))throw new Error(c.MANIFEST_PARSE_ERRORS.URLPARAMS);if(t.hasOwnProperty("pixels")&&null!==t.pixels){if(!(0,o.default)(t.pixels))throw new Error(c.MANIFEST_PARSE_ERRORS.PIXELS_OBJECT);var e=t.pixels;for(var n in e)if(e.hasOwnProperty(n)){if(!c.MANIFEST_PIXEL_EVENTS.hasOwnProperty(n))throw new Error(c.MANIFEST_PARSE_ERRORS.PIXELS_INVALID_EVENT);if(!(0,s.default)(e[n]))throw new Error(c.MANIFEST_PARSE_ERRORS.PIXELS_ARRAY);for(var r=e[n],f=0;f<r.length;f++)if(!A(r[f]))throw new Error(c.MANIFEST_PARSE_ERRORS.PIXELS_URL)}}if(t.hasOwnProperty("td")&&!(0,_.default)(t.td))throw new Error(c.MANIFEST_PARSE_ERRORS.TD);if(t.hasOwnProperty("ts")&&!(0,_.default)(t.ts))throw new Error(c.MANIFEST_PARSE_ERRORS.TS);if(!t.hasOwnProperty("uuid")||!(0,u.default)(t.uuid))throw new Error(c.MANIFEST_PARSE_ERRORS.UUID);if(!t.hasOwnProperty("ssid")||!(0,u.default)(t.ssid))throw new Error(c.MANIFEST_PARSE_ERRORS.SSID);if(!t.hasOwnProperty("secure")||!(0,_.default)(t.secure))throw new Error(c.MANIFEST_PARSE_ERRORS.SECURE);if(!t.hasOwnProperty("aid")||!(0,l.default)(t.aid))throw new Error(c.MANIFEST_PARSE_ERRORS.AID);if(!t.hasOwnProperty("country")||!(0,u.default)(t.country))throw new Error(c.MANIFEST_PARSE_ERRORS.COUNTRY);if(t.hasOwnProperty("pimps")){if(!(0,o.default)(t.pimps))throw new Error(c.MANIFEST_PARSE_ERRORS.PIMPS);if(t.pimps.hasOwnProperty("w_pv")&&!(0,u.default)(t.pimps.w_pv))throw new Error(c.MANIFEST_PARSE_ERRORS.SSC_PV);if(t.pimps.hasOwnProperty("w_to")&&!(0,l.default)(t.pimps.w_to))throw new Error(c.MANIFEST_PARSE_ERRORS.SSC_TO)}for(var p=[],v={},R=0;R<t.dx.length;R++){var O=t.dx[R];p.push([]);for(var S=0;S<O.length;S++){var y=O[S];if(y.hasOwnProperty("url")){if(!(0,u.default)(y.url))throw new Error(c.MANIFEST_PARSE_ERRORS.WATERFALL_URL);d.isUrlPrefix(c.DOUBLECLICK_URLS,y.url)&&(y.bid_platform=c.BID_PLATFORMS.ima)}if(!y.hasOwnProperty("a_cc")||!(0,u.default)(y.a_cc))throw new Error(c.MANIFEST_PARSE_ERRORS.WATERFALL_A_CC);for(var T=new h.default(y.a_cc),g=0;g<T.callChainLinks.length;g++)v[""+T.callChainLinks[g].demandTagId]=!0;if(y.hasOwnProperty("td")&&!(0,_.default)(y.td))throw new Error(c.MANIFEST_PARSE_ERRORS.WATERFALL_TD);if(y.hasOwnProperty("ts")&&!(0,_.default)(y.ts))throw new Error(c.MANIFEST_PARSE_ERRORS.WATERFALL_TS);if(y.hasOwnProperty("pixels")&&null!==y.pixels){if(!(0,o.default)(y.pixels))throw new Error(c.MANIFEST_PARSE_ERRORS.WATERFALL_PIXELS_OBJECT);var m=y.pixels;for(var I in m)if(m.hasOwnProperty(I)){if(!c.VPAID_EVENTS.hasOwnProperty(I))throw new Error(c.MANIFEST_PARSE_ERRORS.WATERFALL_PIXELS_VPAID_EVENT);if(!(0,s.default)(m[I]))throw new Error(c.MANIFEST_PARSE_ERRORS.WATERFALL_PIXELS_ARRAY);for(var b=m[I],P=0;P<b.length;P++)if(!A(b[P]))throw new Error(c.MANIFEST_PARSE_ERRORS.WATERFALL_PIXELS_URL)}}p[R].push((0,i.default)({waterfallIdx:R,broadcastIdx:S,timeout:E(y),callChain:T},y,{td:!1,ts:!1,pixels:null}))}}if(t.hasOwnProperty("dto")){if(!(0,o.default)(t.dto))throw new Error(c.MANIFEST_PARSE_ERRORS.DTO_OBJECT);(0,a.default)(t.dto,function(t,e){if(!(0,u.default)(e))throw new Error(c.MANIFEST_PARSE_ERRORS.DTO_KEY_STRING);if(parseInt(e)<=0)throw new Error(c.MANIFEST_PARSE_ERRORS.DTO_KEY_POS);if(!(0,l.default)(t))throw new Error(c.MANIFEST_PARSE_ERRORS.DTO_VALUE_INT);if(parseInt(t)<=0)throw new Error(c.MANIFEST_PARSE_ERRORS.DTO_VALUE_POS)})}return(0,i.default)({timeout:E(t),numWaterfalls:t.dx.length,dx:p,enableFlashIframe:!0},t,{pixels:null,ef:!1,td:!1,ts:!1,urlparams:null,passthru:null,pimps:{}})};var i=p(t("lodash/defaults")),r=p(t("lodash/includes")),a=p(t("lodash/forEach")),o=p(t("lodash/isObject")),s=p(t("lodash/isArray")),_=p(t("lodash/isBoolean")),u=p(t("lodash/isString")),l=p(t("lodash/isInteger")),c=f(t("./constants")),d=f(t("./utils")),h=p(t("./call_chain"));function f(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function p(t){return t&&t.__esModule?t:{default:t}}function E(t){return t.hasOwnProperty("to")&&t.to>0?t.to:c.NO_TIMEOUT}function A(t){return!!(0,u.default)(t)||t.hasOwnProperty("url")&&(0,u.default)(t.url)&&t.hasOwnProperty("format")&&(0,r.default)(c.PIXEL_FORMATS,t.format)}},{"./call_chain":229,"./constants":234,"./utils":245,"lodash/defaults":146,"lodash/forEach":153,"lodash/includes":157,"lodash/isArray":160,"lodash/isBoolean":162,"lodash/isInteger":166,"lodash/isObject":170,"lodash/isString":173}],217:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=(c(t("lodash/map")),c(t("lodash/now"))),a=c(t("lodash/isInteger")),o=c(t("lodash/forEach")),s=l(t("./constants")),_=l(t("./utils")),u=l(t("./viewability_detection"));function l(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function c(t){return t&&t.__esModule?t:{default:t}}var d=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._document=e,this._pixelInit=0,this._pixelLoad=0,this._pixelError=0,this._eventListeners={}}return i(t,[{key:"addImage",value:function(t){var e=this;this._pixelInit++,_.addImage(this._document,t,function(){e._pixelLoad++,e.checkIsDone()},function(){e._pixelError++,e.checkIsDone()})}},{key:"checkIsDone",value:function(){this.isDone&&this.callEvent_(s.AD_PIXEL_EVENTS.DONE)}},{key:"callEvent_",value:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];if(this._eventListeners.hasOwnProperty(t))for(var r=0;r<this._eventListeners[t].length;r++)this._eventListeners[t][r].apply(this._eventListeners[t][r],n)}},{key:"subscribe",value:function(t,e,n){this._eventListeners.hasOwnProperty(e)||(this._eventListeners[e]=[]),this._eventListeners[e].push(t.bind(n))}},{key:"unsubscribe",value:function(t){this._eventListeners&&this._eventListeners.hasOwnProperty(t)&&(this._eventListeners[t]=[])}},{key:"isDone",get:function(){return this._pixelInit===this._pixelLoad+this._pixelError}}],[{key:"getPixelParams",value:function(t,e,n,i,l,c,d,h){var f={},p=0;function E(e,n){var i=e.length+encodeURIComponent(n).length+1;p+i<=t&&(f[e]=n),p+=i}E(s.VID_IO_PARAMS.event,i),E(s.VID_IO_PARAMS.timestamp,(0,r.default)());try{c&&(0,o.default)(c,function(t,e){E(e,t)})}catch(t){}try{var A=e?e.manifest:null;try{l?(E(s.VID_IO_PARAMS.auctionCallChain,l.a_cc),E(s.VID_IO_PARAMS.dtidx,l.waterfallIdx+1)):h&&E(s.VID_IO_PARAMS.auctionCallChain,h)}catch(t){}try{((0,a.default)(d)||A&&(0,a.default)(A.supplyTagId))&&E(s.VID_IO_PARAMS.id,(0,a.default)(d)?d:A.supplyTagId)}catch(t){}if(A)try{if((0,a.default)(d)||E(s.VID_IO_PARAMS.aid,A.aid),E(s.VID_IO_PARAMS.d,A.domain),E(s.VID_IO_PARAMS.w,A.width),E(s.VID_IO_PARAMS.h,A.height),E(s.VID_IO_PARAMS.cc,A.country),E(s.VID_IO_PARAMS.v,A.v),E(s.VID_IO_PARAMS.uuid,A.uuid),E(s.VID_IO_PARAMS.dtnum,A.numWaterfalls),A.passthru)for(var v in A.passthru)A.passthru.hasOwnProperty(v)&&E(v,A.passthru[v])}catch(t){}try{l&&l.hasOwnProperty("ol")&&l.ol>0?E(s.VID_IO_PARAMS.ol,l.ol):A&&A.ol>0&&E(s.VID_IO_PARAMS.ol,A.ol)}catch(t){}try{A&&A.ov>0&&E(s.VID_IO_PARAMS.ov,A.ov)}catch(t){}if(e)try{E(s.VID_IO_PARAMS.domain_match,e.locationInfo.domain_match),E(s.VID_IO_PARAMS.domain_match_source,e.locationInfo.domain_match_source)}catch(t){}if(n)try{var R=e?e.getStateInfo(n):null;R&&null!==R.clientWidth&&null!==R.clientHeight?(E(s.VID_IO_PARAMS.detected_size_width,R.clientWidth),E(s.VID_IO_PARAMS.detected_size_height,R.clientHeight),E(s.VID_IO_PARAMS.detected_size_match_source,"client")):(E(s.VID_IO_PARAMS.detected_size_width,n.width),E(s.VID_IO_PARAMS.detected_size_height,n.height),E(s.VID_IO_PARAMS.detected_size_match_source,"vpaid"))}catch(t){}try{var O=u.detector();O&&E(s.VID_IO_PARAMS.inView,O.isInView)}catch(t){}}catch(t){E(s.VID_IO_PARAMS.reason,t.message)}return f.hasOwnProperty(s.VID_IO_PARAMS.uuid)||(f.cb=_.getCb()),f}},{key:"getDemandTypeFromXhrReturnCode",value:function(t){return 204===t?s.DEMAND_TYPES.XHR_204_RESPONSE:t>=400&&t<500?s.DEMAND_TYPES.XHR_400_RESPONSE:t>=500&&t<600?s.DEMAND_TYPES.XHR_500_RESPONSE:s.DEMAND_TYPES.UNKNOWN}},{key:"getDemandType",value:function(t){var e=null!==t.jsVpaidUrl,n=t.media.length>0,i=null!==t.flashVpaidUrl,r=t.xFlvMedia.length>0;return e&&i?s.DEMAND_TYPES.BOTH:e?s.DEMAND_TYPES.JS_VPAID:i?s.DEMAND_TYPES.FLASH_VPAID:n||r?s.DEMAND_TYPES.VIDEO:s.DEMAND_TYPES.UNKNOWN}},{key:"getCreativeTypeToDemandType",value:function(t){return t===s.CREATIVE_TYPES.MEDIA||t===s.CREATIVE_TYPES.XFLV?s.DEMAND_TYPES.VIDEO:t===s.CREATIVE_TYPES.FLASH_VPAID?s.DEMAND_TYPES.FLASH_VPAID:t===s.CREATIVE_TYPES.JS_VPAID?s.DEMAND_TYPES.JS_VPAID:s.DEMAND_TYPES.UNKNOWN}},{key:"makeVidIoPixel",value:function(e,n,i){for(var r=_.getProtocol(!(!e.forceSecure&&!e.manifest)&&e.manifest.secure),a=e.pixelUrl,o=r+"//"+a+"?",u=s.MAX_URL_LENGTH-o.length,l=arguments.length,c=Array(l>3?l-3:0),d=3;d<l;d++)c[d-3]=arguments[d];return _.makeUrl(r,a,t.getPixelParams.apply(t,[u,e,n,i].concat(c)))}}]),t}();n.default=d},{"./constants":234,"./utils":245,"./viewability_detection":248,"lodash/forEach":153,"lodash/isInteger":166,"lodash/map":180,"lodash/now":184}],218:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,n,i)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(i):void 0},a=l(t("./constants")),o=(l(t("./utils")),u(t("./ad_demand_request"))),s=u(t("./broadcast_queue")),_=u(t("./ad_state"));function u(t){return t&&t.__esModule?t:{default:t}}function l(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}var c=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"AdProcessor",t,n));return i._broadcastQueues=[],i._currentWaterfallIndex=-1,i._currentAdContainer=-1,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,_.default),i(e,[{key:"initAd",value:function(t,n,i,a,o,_){r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initAd",this).call(this,t,n,i,a,o,_);for(var u=0;u<this._cabinet.manifest.dx.length;u++){var l=new s.default(this._cabinet,this._cabinet.manifest.dx[u],this._initParams,u);this._broadcastQueues.push(l)}}},{key:"maybeStopDemandRequest",value:function(){if(this._ad){this.unregisterVpaidEventListeners_(this._ad),this.unregisterLogEventListeners_(this._ad),this.unregisterSSEventListeners_(this._ad);try{this._ad.stopAd()}catch(t){}}}},{key:"nextBroadcast",value:function(){if(!this._isAdDead){if(this.maybeStopDemandRequest(),this._currentWaterfallIndex>-1){var t=this.getBroadcastQueue();t.finishBroadcast(),this.unregisterLogEventListeners_(t),this.unregisterSSEventListeners_(t)}if(this._currentWaterfallIndex+1>=this._broadcastQueues.length)this.supplyError(a.VD_ERROR_CODES.NO_FILL,!1),this.callEvent_(a.VPAID_EVENTS.AdError,a.VD_ERROR_CODES.NO_FILL);else{this._currentWaterfallIndex++;var e=this.getBroadcastQueue();this.registerSSEventListeners_(e),this.registerLogEventListeners_(e),e.load()}}}},{key:"getBroadcastQueue",value:function(){return this._broadcastQueues[this._currentWaterfallIndex]}},{key:"on_js_demand_error",value:function(t,n,i){r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"on_js_demand_error",this).call(this,t,n,i),this.getBroadcastQueue().getAdContainer(this._currentAdContainer).vpaidFailed(),this.getBroadcastQueue().nextVpaid()}},{key:"onBroadcastVastReady",value:function(t){if(r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onBroadcastVastReady",this).call(this,t),!this._isAdDead){this.maybeStopDemandRequest();var n=this.getBroadcastQueue().getAdContainer(t);n.vpaidStart(),this._currentAdContainer=t,this._cabinet.timeoutManager.startVpaid(n._demandTag.waterfallIdx,n._demandTag.broadcastIdx),this._ad=new o.default(this._cabinet,this._initParams,n._demandTag,n._vast),this.registerVpaidEventListeners_(this._ad),this.registerSSEventListeners_(this._ad),this.registerLogEventListeners_(this._ad),this._ad.load()}}},{key:"onAdImpression",value:function(){r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdImpression",this).call(this),this.getBroadcastQueue().finishBroadcast()}},{key:"onBroadcastDone",value:function(){r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onBroadcastDone",this).call(this),this._isAdDead||this.nextBroadcast()}},{key:"supplyError",value:function(t,e){this.callSSEvent_(a.VID_IO_EVENTS.js_supply_error,null,{on_page_time:this._cabinet.timeoutManager.timeOnPage,reason:t,timeout:e},null)}},{key:"stopAd",value:function(){r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"stopAd",this).call(this),this._isAdImpression||this.supplyError(a.VD_ERROR_CODES.STOP_AD_CALLED,!0)}},{key:"skipAd",value:function(){r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"skipAd",this).call(this),this._isAdImpression||this.supplyError(a.VD_ERROR_CODES.SKIP_AD_CALLED,!0)}},{key:"onAdLoaded",value:function(){this._isStartAd&&this._ad&&!this._ad._isStartAd&&this._ad.startAd(),r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdLoaded",this).call(this)}},{key:"onAdSkipped",value:function(){this._isAdImpression&&r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdSkipped",this).call(this)}},{key:"onAdStopped",value:function(){this._isAdImpression&&r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdStopped",this).call(this)}},{key:"onAdError",value:function(t){this._isAdImpression&&r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdError",this).call(this,t||a.VD_ERROR_CODES.PLAY_ERROR)}}]),e}();n.default=c},{"./ad_demand_request":210,"./ad_state":219,"./broadcast_queue":227,"./constants":234,"./utils":245}],219:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,n,i)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(i):void 0},o=(function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);e.default=t}}(t("./utils")),t("./ad_vd")),s=(i=o)&&i.__esModule?i:{default:i};var _=function(t){function e(t,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"AdState("+t+")"));return r._cabinet=n,r._initParams=i,r._isAdLoaded=!1,r._isStartAd=!1,r._isAdStarted=!1,r._isAdVideoStart=!1,r._isAdImpression=!1,r._isDeadAd=!1,r._isAdDead=!1,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),r(e,[{key:"startAd",value:function(){this._isStartAd=!0,a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"startAd",this).call(this)}},{key:"stopAd",value:function(){this._isDeadAd=!0,a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"stopAd",this).call(this)}},{key:"skipAd",value:function(){this._isDeadAd=!0,a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"skipAd",this).call(this)}},{key:"onAdLoaded",value:function(){this._isAdLoaded=!0,a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdLoaded",this).call(this)}},{key:"onAdStarted",value:function(){this._isAdStarted=!0,a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdStarted",this).call(this)}},{key:"onAdVideoStart",value:function(){this._isAdVideoStart=!0,a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdVideoStart",this).call(this)}},{key:"onAdImpression",value:function(){this._isAdImpression=!0,a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdImpression",this).call(this)}},{key:"onAdStopped",value:function(){this._isAdDead=!0,a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdStopped",this).call(this)}},{key:"onAdSkipped",value:function(){this._isAdDead=!0,a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdSkipped",this).call(this)}},{key:"onAdError",value:function(t){this._isAdDead=!0,a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdError",this).call(this,t)}}]),e}();n.default=_},{"./ad_vd":224,"./utils":245}],220:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=u(t("lodash/mapValues")),a=u(t("lodash/map")),o=u(t("lodash/max")),s=u(t("lodash/extend")),_=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(t("./constants"));function u(t){return t&&t.__esModule?t:{default:t}}function l(t){for(var e=null,n=0;n<t.length;n++){var i=t[n];(null===e||i.timeout<e.timeout)&&(e=i)}return e}var c=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._timeouts=e,this._now=n,this._start=this._now(),this._supplyTagTimeout=null,this._manifest=null,this._responseStarts={},this._vpaidStarts={},this._dtoTime=null}return i(t,[{key:"setManifest",value:function(t){this._manifest=t,this._supplyTagTimeout=this._manifest.timeout,this._manifest.dto&&(this._dtoTime=(0,r.default)(this._manifest.dto,function(){return 0}));for(var e=0;e<this._manifest.numWaterfalls;e++)this._vpaidStarts[e]={}}},{key:"getDtoTime",value:function(t){return this._dtoTime[t]}},{key:"startBroadcast",value:function(t){if(t>0&&null!==this._dtoTime)for(var e=t-1,n=0;n<this._manifest.dx[e].length;n++)for(var i=this.getDemandTagResponseTime(e,n),r=this.getDemandTagDtoKeys(e,n),a=0;a<r.length;a++){var o=r[a];this._dtoTime[o]+=i}this._responseStarts[t]=this._now()}},{key:"startVpaid",value:function(t,e){this._vpaidStarts[t][e]=this._now()}},{key:"getRequestTime",value:function(t){return this.getResponseStart(t)-this._start}},{key:"getResponseTime",value:function(t){return this._now()-this.getResponseStart(t)}},{key:"getDemandTagResponseTime",value:function(t,e){return this._now()-this.getVpaidStart(t,e)}},{key:"getTimeoutInfo",value:function(t,e){var n=[];return n.push({timeout:this.supplyTagRemaining,reason:_.VD_ERROR_CODES.SUPPLY_TAG_TIMEOUT},{timeout:this.getBroadcastRemaining(t),reason:_.VD_ERROR_CODES.BROADCAST_TIMEOUT},{timeout:this._timeouts.MAX_BROADCAST_TIMEOUT-this.getResponseTime(t),reason:_.VD_ERROR_CODES.MAX_BROADCAST_TIMEOUT}),l(null!==e?n.concat(e):n)}},{key:"getDemandTagTimeoutInfo",value:function(t,e,n){var i=[];if(i.push({timeout:this.supplyTagRemaining,reason:_.VD_ERROR_CODES.SUPPLY_TAG_TIMEOUT},{timeout:this.getDemandTagRemaining(t,e),reason:_.VD_ERROR_CODES.DEMAND_PARTNER_TIMEOUT}),null!==this._dtoTime)for(var r=this.getDemandTagDtoKeys(t,e),a=0;a<r.length;a++){var o=r[a];i.push({timeout:this._manifest.dto[o]-this._dtoTime[o],reason:_.VD_ERROR_CODES.DTO_TIMEOUT})}return l(null!==n?i.concat(n):i)}},{key:"getResponseStart",value:function(t){return this._responseStarts[t]}},{key:"getVpaidStart",value:function(t,e){return this._vpaidStarts[t][e]}},{key:"getDemandTags",value:function(t){return this._manifest.dx[t]}},{key:"getDemandTag",value:function(t,e){return this.getDemandTags(t)[e]}},{key:"getBroadcastRemaining",value:function(t){return(0,o.default)((0,a.default)(this.getDemandTags(t),"timeout"))-this.getResponseTime(t)}},{key:"getDemandTagRemaining",value:function(t,e){return this.getDemandTag(t,e).timeout-this.getDemandTagResponseTime(t,e)}},{key:"getDtids",value:function(t,e){for(var n={},i=this.getDemandTag(t,e).callChain.callChainLinks,r=0;r<i.length;r++){var a=i[r].demandTagId;0!==a&&(n[a]=!0)}return n}},{key:"getDtoKeyList",value:function(t){var e=[];for(var n in this._dtoTime)this._dtoTime.hasOwnProperty(n)&&t.hasOwnProperty(n)&&e.push(n);return e}},{key:"getDtoKeys",value:function(t){for(var e={},n=0;n<this._manifest.dx[t].length;n++)(0,s.default)(e,this.getDtids(t,n));return this.getDtoKeyList(e)}},{key:"getDemandTagDtoKeys",value:function(t,e){return this.getDtoKeyList(this.getDtids(t,e))}},{key:"start",get:function(){return this._start}},{key:"supplyTagTimeout",get:function(){return this._supplyTagTimeout}},{key:"supplyTagRemaining",get:function(){return this._supplyTagTimeout-this.timeOnPage}},{key:"timeOnPage",get:function(){return this._now()-this._start}}]),t}();n.default=c},{"./constants":234,"lodash/extend":148,"lodash/map":180,"lodash/mapValues":181,"lodash/max":182}],221:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.AdVast=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();n.extendPixels=E;var r=f(t("../lib/swfobjectdoc")),a=f(t("lodash/extend")),o=f(t("lodash/mapValues")),s=h(t("./utils")),_=h(t("./constants")),u=f(t("./ad_pixel")),l=f(t("./ad_vast_parser")),c=h(t("./ad_vast_utils")),d=f(t("../../../configs/flash_config.json"));function h(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function f(t){return t&&t.__esModule?t:{default:t}}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.AdVast=function(){function t(e,n,i,r,a,o,u,l){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._cabinet=e,this._pixelNotifierFn=function(t,e,i){n(t,e,i)},this.demandTag=i,this.successCb=function(t){r(t)},this.failureCb=function(){a()},this.environmentVars=o,this._logNotifierFn=u,this.stateInfo=l,this.wrapperCount=0,this._vastPixels=_.getDefaultVastPixels(),this._isOrtb=s.isOrtbDemandTag(i)}return i(t,[{key:"getXhr",value:function(t,e,n){var i=s.getRequestMethod(e,n);if(i){var r=i.xhr;r.responseType="document";try{"function"==typeof r.overrideMimeType&&r.overrideMimeType("text/xml")}catch(t){}return r.timeout=t.timeout,r.ontimeout=function(){this.demandResponseFail(!0,t.reason,_.VAST_ERRORCODES.VAST_ERRORCODE_301)}.bind(this),r.onerror=function(){i.withCredentials?this.requestVast(e,!1):this.demandResponseFail(!1,_.VD_ERROR_CODES.XHR_ERROR,_.VAST_ERRORCODES.VAST_ERRORCODE_301)}.bind(this),r}this.demandResponseFail(!1,_.VD_ERROR_CODES.NO_XHR,_.VAST_ERRORCODES.VAST_ERRORCODE_301)}},{key:"requestVast",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=this.getTimeoutInfo();if(i.timeout<=0)this.demandResponseFail(!0,i.reason,_.VAST_ERRORCODES.VAST_ERRORCODE_301);else{var r=this._cabinet.replacePageProtocol(c.replaceDetectedMacros(this._cabinet.locationInfo,this.stateInfo,null===t?this.demandTag.url:t)),a=this.getXhr(i,r,e);a.onload=function(){try{if(200!==a.status)return void(e?this.requestVast(r,!1,n):this.demandResponseFail(!1,_.VD_ERROR_CODES.BAD_XHR_STATUS+"_"+a.status,_.VAST_ERRORCODES.VAST_ERRORCODE_301,u.default.getDemandTypeFromXhrReturnCode(a.status)));var t=null;if(null!==a.responseXML)t=a.responseXML;else if("function"!=typeof a.overrideMimeType&&a.responseText)try{t=(new DOMParser).parseFromString(a.responseText,"application/xml")}catch(t){return void this.demandResponseFail(!1,_.VD_ERROR_CODES.DOM_PARSER_PARSE_FAILURE,_.VAST_ERRORCODES.VAST_ERRORCODE_100)}if(null===t)return void this.demandResponseFail(!1,_.VD_ERROR_CODES.RESPONSE_XML_NULL,_.VAST_ERRORCODES.VAST_ERRORCODE_100);this.processVast(t,r,n)}catch(t){this.demandResponseFail(!1,_.VD_ERROR_CODES.VAST_ONLOAD_EXCEPTION+"_"+t.message,_.VAST_ERRORCODES.VAST_ERRORCODE_1508)}}.bind(this),a.send()}}},{key:"failOrSucceedPlayingMedia",value:function(t){try{var e=s.getDocumentAndWindow(this.environmentVars.slot),n={jsVpaid:null!==t.jsVpaidUrl,media:t.media.length>0,playableMedia:t.hasPlayableMedia,flashVpaid:null!==t.flashVpaidUrl,xFlvMedia:t.xFlvMedia.length>0,canPlayFlash:new r.default(e.document,e.window).hasFlashPlayerVersion(d.default.TARGET_PLAYER),flashEnabled:this._cabinet.manifest.ef};if(n.jsVpaid||n.media||n.flashVpaid||n.xFlvMedia)if(n.jsVpaid||n.playableMedia||n.flashEnabled&&n.canPlayFlash&&(n.flashVpaid||n.xFlvMedia)){var i,o=null!==t.ortb_detail?t.ortb_detail:{};this._pixelNotifierFn(_.VID_IO_EVENTS.cm_js_demand_req_resp,this.demandTag,(0,a.default)((p(i={cc_i:this.demandTag.callChain.getCallChainIndices(this._cabinet.historyManager.demand_events.response,!0).join(","),response_time:this._cabinet.timeoutManager.getResponseTime(this.demandTag.waterfallIdx),wrapper_count:this.wrapperCount,has_ad:!0,timeout:!1},_.VID_IO_PARAMS.vastVersion,t.version),p(i,"dtype",u.default.getDemandType(t)),i),o)),this.successCb(t)}else{var l=n.media&&n.playableMedia,c=[];n.flashEnabled?!n.canPlayFlash&&(n.flashVpaid||n.xFlvMedia)&&c.push(_.VD_ERROR_CODES.FLASH_NOT_SUPPORTED):c.push(_.VD_ERROR_CODES.FLASH_DISABLED),l&&c.push(_.VD_ERROR_CODES.UNSUPPORTED_MEDIA),this.demandResponseFail(!1,c.join("_"),_.VAST_ERRORCODES.VAST_ERRORCODE_403,u.default.getDemandType(t))}else this.demandResponseFail(!1,_.VD_ERROR_CODES.EMPTY_VAST,_.VAST_ERRORCODES.VAST_ERRORCODE_303,_.DEMAND_TYPES.EMPTY_VAST)}catch(t){this.demandResponseFail(!1,_.VD_ERROR_CODES.JS_DEMAND_RESPONSE_EXCEPTION+"_"+t.message,_.VAST_ERRORCODES.VAST_ERRORCODE_405)}}},{key:"playMedia",value:function(t){if(t.media.length>0){try{this.environmentVars.videoSlot||this._cabinet.videoElementManager.videoSlot||this._cabinet.videoElementManager.createVideoSlot()}catch(t){return void this.demandResponseFail(!1,_.VD_ERROR_CODES.CREATE_VIDEO_ELEMENT_EXCEPTION+"_"+t.message,_.VAST_ERRORCODES.VAST_ERRORCODE_405)}try{for(var e=0;e<t.media.length;e++){var n=t.media[e];if(s.canPlayVideo(this.environmentVars.videoSlot||this._cabinet.videoElementManager.videoSlot,n.mimetype)){t.hasPlayableMedia=!0;break}}}catch(t){return void this.demandResponseFail(!1,_.VD_ERROR_CODES.CAN_PLAY_VIDEO_EXCEPTION+"_"+t.message,_.VAST_ERRORCODES.VAST_ERRORCODE_403)}}this.failOrSucceedPlayingMedia(t)}},{key:"processVast",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=void 0;try{i=new l.default(this._isOrtb,e,t).findVideoAd()}catch(t){return void this.demandResponseFail(!1,_.VD_ERROR_CODES.FIND_VIDEO_AD_EXCEPTION+"_"+t.message,_.VAST_ERRORCODES.VAST_ERRORCODE_1511)}var r=void 0;try{r=(0,a.default)({},i,E(this._vastPixels,i)),null!==n?r.hbDetails=n:this._vastPixels.hasOwnProperty("hbDetails")&&(r.hbDetails=this._vastPixels.hbDetails),this._vastPixels.hasOwnProperty("ortb_detail")&&(r.ortb_detail=this._vastPixels.ortb_detail),this._vastPixels=r}catch(t){return void this.demandResponseFail(!1,_.VD_ERROR_CODES.EXTEND_VAST_EXCEPTION+"_"+t.message,_.VAST_ERRORCODES.VAST_ERRORCODE_1508)}null!==r.wrapperUrl?this.wrapperCb(r.wrapperUrl):this.playMedia(r)}},{key:"getTimeoutInfo",value:function(){return this._cabinet.timeoutManager.getTimeoutInfo(this.demandTag.waterfallIdx,[{reason:_.VD_ERROR_CODES.WRAPPER_CHAIN_NO_TIME,timeout:this._cabinet.timeouts.WRAPPER_CHAIN_TIMEOUT-this._cabinet.timeoutManager.getResponseTime(this.demandTag.waterfallIdx)},{reason:_.VD_ERROR_CODES.VAST_TIMEOUT,timeout:this._cabinet.timeouts.VAST_TIMEOUT}])}},{key:"demandResponseFail",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_.VAST_ERRORCODES.VAST_ERRORCODE_901,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:_.DEMAND_TYPES.UNKNOWN;this._pixelNotifierFn(_.VID_IO_EVENTS.cm_js_demand_req_resp,this.demandTag,p({cc_i:this.demandTag.callChain.getCallChainIndices(this._cabinet.historyManager.demand_events.response,!0).join(","),response_time:this._cabinet.timeoutManager.getResponseTime(this.demandTag.waterfallIdx),wrapper_count:this.wrapperCount,has_ad:!1,timeout:t,reason:e,dtype:i},_.VID_IO_PARAMS.vastErrorCode,n)),this.failureCb()}},{key:"wrapperCb",value:function(t){this.wrapperCount++,this.wrapperCount>this._cabinet.timeouts.MAX_WRAPPERS?this.demandResponseFail(!1,_.VD_ERROR_CODES.TOO_MANY_WRAPPERS,_.VAST_ERRORCODES.VAST_ERRORCODE_302):(this._isOrtb=!1,this.requestVast(t,s.shouldUseWithCreds(t)))}}]),t}();function E(t,e){var n={errorPixels:t.errorPixels.concat(e.errorPixels),impressionPixels:t.impressionPixels.concat(e.impressionPixels),clickTracking:t.clickTracking.concat(e.clickTracking),trackingEvents:{}};return(0,o.default)(t.trackingEvents,function(t,i){n.trackingEvents[i]=[].concat(t,e.trackingEvents[i])}),n}},{"../../../configs/flash_config.json":1,"../lib/swfobjectdoc":196,"./ad_pixel":217,"./ad_vast_parser":222,"./ad_vast_utils":223,"./constants":234,"./utils":245,"lodash/extend":148,"lodash/mapValues":181}],222:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=c(t("lodash/defaults")),a=c(t("lodash/forEach")),o=l(t("./constants")),s=l(t("./utils")),_=l(t("./vast_parser_utils")),u=t("./ss_utils/url");function l(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function c(t){return t&&t.__esModule?t:{default:t}}var d=function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._isOrtb=e,this._baseUrl=n,this._vastTag=i}return i(t,[{key:"getVastVersion",value:function(){var t=this._vastTag.getElementsByTagName("VAST");return 1!==t.length?o.VAST_VERSION.UNKNOWN:t[0].getAttribute("version")||o.VAST_VERSION.UNKNOWN}},{key:"findVideoAd",value:function(){var t=(0,r.default)(o.getDefaultVast(),o.getDefaultVastPixels());t.version=this.getVastVersion();var e=this._vastTag.getElementsByTagName("Ad"),n=0===e.length?null:e[0];if(n){try{t.impressionPixels=this.getUnorderedUrls("Impression",n)}catch(t){throw new Error(o.VD_ERROR_CODES.VAST_IMPRESSION_PIXELS_ERROR+"_"+t.message)}try{t.errorPixels=this.getUnorderedUrls("Error",n)}catch(t){throw new Error(o.VD_ERROR_CODES.VAST_ERROR_PIXELS_ERROR+"_"+t.message)}}if(this._isOrtb){var i=null;try{i=this._vastTag.getElementsByTagName("Extension")}catch(t){throw new Error(o.VD_ERROR_CODES.VAST_ERROR_EXTENSIONS+"_"+t.message)}try{for(var a=0;a<i.length;a++){var u=i[a];u.getAttribute("type")===o.ORTB_DETAIL&&(t.ortb_detail={bf:s.getORtbElement(u,"bf",parseFloat),bp:s.getORtbElement(u,"bp",parseFloat),scode:s.getORtbElement(u,"scode",parseInt),bid_result:s.getORtbElement(u,"bid_result",parseInt),seat_id:s.getORtbElement(u,"seat_id",function(t){return t})})}}catch(t){throw new Error(o.VD_ERROR_CODES.VAST_ERROR_ORTB_DETAIL+"_"+t.message)}}var l=void 0,c=void 0;try{l=_.getFirstElement("Wrapper",this._vastTag),c=_.getFirstElement("Linear",this._vastTag)}catch(t){throw new Error(o.VD_ERROR_CODES.VAST_GET_LINEAR_WRAPPER_XML_ERROR+"_"+t.message)}if(null!==l)try{var d=_.getFirstElement("VASTAdTagURI",l);t.wrapperUrl=null!==d?this.getUrl(d.textContent):null,t.impressionPixels=this.getUnorderedUrls("Impression",l),t.errorPixels=this.getUnorderedUrls("Error",l);var h=_.getFirstElement("Linear",l);null!==h&&this.setTrackingEvents(t,h),t.clickTracking=this.getUnorderedUrls("ClickTracking",l)}catch(t){throw new Error(o.VD_ERROR_CODES.VAST_IS_WRAPPER_XML_ERROR+"_"+t.message)}else if(null!==c)try{t.linear=!0;for(var f=c.getElementsByTagName("MediaFile"),p=0;p<f.length;p++){var E=f[p];if(E.hasAttribute("type")){var A=E.getAttribute("type");"video/x-flv"===A?t.xFlvMedia.push(this.getMedia(E)):"application/javascript"===A?t.jsVpaidUrl=this.getUrl(E.textContent):"application/x-shockwave-flash"===A?t.flashVpaidUrl=this.getUrl(E.textContent):0===A.indexOf("video")&&t.media.push(this.getMedia(E))}}var v=_.getFirstElement("AdParameters",c);null!==v&&(t.adParameters=v.textContent);var R=_.getTextFromTagName("Duration",c);if(null!==R){var O=_.parseDuration(R);null!==O&&(t.duration=O)}var S=c.getAttribute("skipOffset");if(null!==S){var y=_.getSkipOffset(S.textContent,t.duration);t.skipOffset=null===y?y:o.VPAID_CONSTANTS.NOT_IMPLEMENTED}this.setTrackingEvents(t,c),t.clickTracking=this.getUnorderedUrls("ClickTracking",c),t.clickThrough=this.getUrlFromTagName("ClickThrough",c)}catch(t){throw new Error(o.VD_ERROR_CODES.VAST_IS_LINEAR_XML_ERROR+"_"+t.message)}else try{t.noad=this.getUrlFromTagName("Error",this._vastTag)}catch(t){throw new Error(o.VD_ERROR_CODES.VAST_NOAD_XML_ERROR+"_"+t.message)}return t}},{key:"getMedia",value:function(t){function e(t){return"true"===t}var n={mimetype:t.getAttribute("type"),url:this.getUrl(t.textContent)},i={delivery:function(t){return t},width:parseInt,height:parseInt,bitrate:parseInt,scalable:e,maintainAspectRatio:e};return(0,a.default)(i,function(e,i){t.hasAttribute(i)&&(n[i]=e(t.getAttribute(i)))}),n}},{key:"getUrlFromTagName",value:function(t,e){var n=_.getFirstElement(t,e);return null!==n?this.getUrl(n.textContent):null}},{key:"getUrl",value:function(t){var e=t.trim();if(!e)return null;try{return(0,u.resolve)(this._baseUrl,e)}catch(t){return e}}},{key:"setTrackingEvents",value:function(t,e){for(var n=e.getElementsByTagName("Tracking"),i=0;i<n.length;i++){var r=n[i],a=r.getAttribute("event");if(t.trackingEvents.hasOwnProperty(a)){var o=this.getUrl(r.textContent);o&&t.trackingEvents[a].push(o)}}}},{key:"getUnorderedUrls",value:function(t,e){for(var n=[],i=e.getElementsByTagName(t),r=0;r<i.length;r++){var a=this.getUrl(i[r].textContent);null!==a&&n.push(a)}return n}}]),t}();n.default=d},{"./constants":234,"./ss_utils/url":241,"./utils":245,"./vast_parser_utils":246,"lodash/defaults":146,"lodash/forEach":153}],223:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.replaceDetectedMacros=function(t,e,n){if(n.indexOf("{{")<0)return n;var a=n;null!==t&&(a=(a=(a=(a=a.replace(i.TRUST_BUT_VERIFY_MACROS.DETECTED_DOMAIN,t.domain_match)).replace(i.TRUST_BUT_VERIFY_MACROS.DETECTED_URL,t.url)).replace(i.TRUST_BUT_VERIFY_MACROS.DETECTED_ENCODED_URL,encodeURI(t.url))).replace(i.TRUST_BUT_VERIFY_MACROS.DETECTED_DOUBLE_ENCODED_URL,encodeURI(encodeURI(t.url))));null!==e&&(a=(a=(a=(a=a.replace(i.TRUST_BUT_VERIFY_MACROS.DETECTED_HEIGHT,e.detectedHeight)).replace(i.TRUST_BUT_VERIFY_MACROS.DETECTED_WIDTH,e.detectedWidth)).replace(i.DEMAND_PARTNER_MACROS.D_HEIGHT,e.detectedHeight)).replace(i.DEMAND_PARTNER_MACROS.D_WIDTH,e.detectedWidth));var o=r.detector(),s=-1;null!==o&&(s=o.isInView);return a=(a=a.replace(i.TRUST_BUT_VERIFY_MACROS.DETECTED_IN_VIEW,s)).replace(i.TRUST_BUT_VERIFY_MACROS.DETECTED_IS_VISIBLE,s)};var i=a(t("./constants")),r=a(t("./viewability_detection"));function a(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}},{"./constants":234,"./viewability_detection":248}],224:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=u(t("./constants")),o=u(t("./utils")),s=t("./ad_vpaid"),_=(i=s)&&i.__esModule?i:{default:i};function u(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}var l=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"AdVd("+t+")",o.identityWrapper));return n._ssEventListeners={},o.forEachType(a.EVENT_TYPES,function(t,n,i){var r="on"+n+i;e.prototype[r]=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.callSSEvent_.apply(this,[i].concat(e))}}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,_.default),r(e,[{key:"registerSSEventListeners_",value:function(t){var e=this;o.forEachType(a.EVENT_TYPES,function(n,i,r){var a="on"+i+r;t.subscribeSSEvent(e[a],r,e)})}},{key:"unregisterSSEventListeners_",value:function(t){o.forEachType(a.EVENT_TYPES,function(e,n,i){t.unsubscribeSSEvent(i)})}},{key:"callSSEvent_",value:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];if(this._ssEventListeners.hasOwnProperty(t))for(var r=0;r<this._ssEventListeners[t].length;r++)this._ssEventListeners[t][r].apply(this._ssEventListeners[t][r],n)}},{key:"subscribeSSEvent",value:function(t,e,n){this._ssEventListeners.hasOwnProperty(e)||(this._ssEventListeners[e]=[]),this._ssEventListeners[e].push(t.bind(n))}},{key:"unsubscribeSSEvent",value:function(t){this._ssEventListeners.hasOwnProperty(t)&&(this._ssEventListeners[t]=[])}}]),e}();n.default=l},{"./ad_vpaid":226,"./constants":234,"./utils":245}],225:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(t("./utils"));var a=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._uuid=e,this._environmentVars=n,this._videoSlot=null}return i(t,[{key:"createVideoSlot",value:function(){this._videoSlot=r.getDocumentAndWindow(this._environmentVars.slot).document.createElement("video")}},{key:"videoSlot",get:function(){return this._videoSlot}}]),t}();n.default=a},{"./utils":245}],226:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=u(t("lodash/defaults")),a=u(t("lodash/forEach")),o=_(t("./constants")),s=(_(t("./utils")),u(t("./ad_event_listener")));function _(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function u(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"AdVpaid("+t+")"));i._wrapper=n,i._ad=null,i._initParams={},i._creativeData=null,i._previousVolume=o.DEFAULT_VOLUME,i._volume=o.DEFAULT_VOLUME,i._handshakeVersion=o.HANDSHAKE_VERSION_2_0;for(var r in o.VPAID_EVENTS)o.VPAID_EVENTS.hasOwnProperty(r)&&e.createEventListenerPrototype(r);for(var a in o.LOG_EVENTS)o.LOG_EVENTS.hasOwnProperty(a)&&e.createLogEventListenerPrototype(a);return i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),i(e,null,[{key:"createEventListenerPrototype",value:function(t){e.prototype["on"+t]=function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];this.callEvent_.apply(this,[t].concat(n))}}},{key:"createLogEventListenerPrototype",value:function(t){e.prototype["on"+t]=function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];this.callLogEvent_.apply(this,[t].concat(n))}}}]),i(e,[{key:"handshakeVersion",value:function(t){try{if(t){var e=""+t;e.length>1&&2===parseInt(e[0])&&(this._handshakeVersion=e)}}catch(t){}return this._handshakeVersion}},{key:"initAd",value:function(t,e,n,i,a,o){this._initParams=(0,r.default)({width:t,height:e,viewMode:n,desiredBitrate:i,environmentVars:o},this._initParams),this._creativeData=a}},{key:"resizeAd",value:function(t,e,n){if(this._initParams.width=t,this._initParams.height=e,this._initParams.viewMode=n,this._ad)return this._wrapper(this._ad.resizeAd(t,e,n))}},{key:"startAd",value:function(){this._ad&&this._wrapper(this._ad.startAd())}},{key:"stopAd",value:function(){if(this._ad)return this._wrapper(this._ad.stopAd())}},{key:"pauseAd",value:function(){if(this._ad)return this._wrapper(this._ad.pauseAd())}},{key:"resumeAd",value:function(){if(this._ad)return this._wrapper(this._ad.resumeAd())}},{key:"expandAd",value:function(){if(this._ad)return this._wrapper(this._ad.expandAd())}},{key:"collapseAd",value:function(){if(this._ad)return this._wrapper(this._ad.collapseAd())}},{key:"skipAd",value:function(){if(this._ad)return this._wrapper(this._ad.skipAd())}},{key:"getAdVolumeInternal",value:function(){return null!==this._ad&&(this._volume=this._wrapper(this._ad.getAdVolume())),this._volume}},{key:"getAdVolume",value:function(){return this.getAdVolumeInternal()}},{key:"setAdVolumeInternal",value:function(t){this._previousVolume=this._volume,this._volume=t,this._ad&&this._wrapper(this._ad.setAdVolume(t))}},{key:"setAdVolume",value:function(t){this.setAdVolumeInternal(t)}},{key:"getAdExpanded",value:function(){return!this._ad||this._wrapper(this._ad.getAdExpanded())}},{key:"getAdCompanions",value:function(){return this._ad?this._wrapper(this._ad.getAdCompanions()):""}},{key:"getAdDuration",value:function(){return this._ad?this._wrapper(this._ad.getAdDuration()):o.VPAID_CONSTANTS.UNKNOWN}},{key:"getAdHeight",value:function(){return this._ad?this._wrapper(this._ad.getAdHeight()):o.VPAID_CONSTANTS.UNKNOWN}},{key:"getAdViewMode",value:function(){return this._ad?this._wrapper(this._ad.getAdViewMode()):o.VPAID_CONSTANTS.UNKNOWN}},{key:"getAdIcons",value:function(){return!!this._ad&&this._wrapper(this._ad.getAdIcons())}},{key:"getAdLinear",value:function(){return!this._ad||this._wrapper(this._ad.getAdLinear())}},{key:"getAdRemainingTime",value:function(){return this._ad?this._wrapper(this._ad.getAdRemainingTime()):o.VPAID_CONSTANTS.UNKNOWN}},{key:"getAdSkippableState",value:function(){return!!this._ad&&this._wrapper(this._ad.getAdSkippableState())}},{key:"getAdWidth",value:function(){return this._ad?this._wrapper(this._ad.getAdWidth()):o.VPAID_CONSTANTS.UNKNOWN}},{key:"registerVpaidEventListeners_",value:function(t){var e=this,n=this;(0,a.default)(o.VPAID_EVENTS,function(i){t.subscribe(function(){n["on"+i].apply(n,arguments)},i,e)})}},{key:"unregisterVpaidEventListeners_",value:function(t){for(var e in o.VPAID_EVENTS)o.VPAID_EVENTS.hasOwnProperty(e)&&t.unsubscribe(e)}},{key:"registerLogEventListeners_",value:function(t){for(var e in o.LOG_EVENTS)o.LOG_EVENTS.hasOwnProperty(e)&&t.subscribe(this["on"+e],e,this)}},{key:"unregisterLogEventListeners_",value:function(t){for(var e in o.LOG_EVENTS)o.LOG_EVENTS.hasOwnProperty(e)&&t.unsubscribeLogEvent(e,this["on"+e])}}]),e}();n.default=l},{"./ad_event_listener":211,"./constants":234,"./utils":245,"lodash/defaults":146,"lodash/forEach":153}],227:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=c(t("lodash/defaults")),a=c(t("lodash/forEach")),o=c(t("./ad_state")),s=c(t("./ad_containers/ad_container_factory")),_=l(t("./constants")),u=(l(t("./utils")),c(t("../../../configs/timeouts.json")));function l(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function c(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(t,n,i,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"BroadcastQueue",t,i));o._cabinet=t,o._waterfallIdx=a,o._adContainers=[];for(var u=new s.default,l=0;l<n.length;l++){var c=n[l],d=u.build(t,l,c.hasOwnProperty("url")?(0,r.default)({url:o._cabinet.replacePageProtocol(c.url)},c):c,i);o.registerLogEventListeners_(d),o.registerSSEventListeners_(d),o._adContainers.push(d),o._vastRequestTimer=_.NO_TIMER}return o._broadcastState=_.BROADCAST_STATES.INIT,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default),i(e,[{key:"load",value:function(){var t=this;this._broadcastState=_.BROADCAST_STATES.REQUESTING,this._vastRequestTimer=setTimeout(function(){t.callSSEvent_(_.BROADCAST_EVENTS.VastRequestTimerTimeout),t.nextVpaid(),t._vastRequestTimer=_.NO_TIMER},u.default.BROADCAST_VAST_REQUEST_TIMEOUT);var e=this._cabinet.getStateInfo(this._initParams);this._cabinet.timeoutManager.startBroadcast(this._waterfallIdx),(0,a.default)(this._adContainers,function(t){t.requestVast(e)})}},{key:"finishBroadcast",value:function(){this._vastRequestTimer!==_.NO_TIMER&&(clearTimeout(this._vastRequestTimer),this._vastRequestTimer=_.NO_TIMER)}},{key:"onSlotVastDone",value:function(t,e){this.nextVpaid()}},{key:"nextVpaid",value:function(){if(this._broadcastState===_.BROADCAST_STATES.REQUESTING){for(var t=0;t<this._adContainers.length;t++){var e=this._adContainers[t].adSlotState;if([_.SLOT_STATES.REQUESTING_VPAID].indexOf(e)>-1)return;if(this._vastRequestTimer!==_.NO_TIMER&&[_.SLOT_STATES.REQUESTING_VAST].indexOf(e)>-1)return;if(e===_.SLOT_STATES.VAST_READY)return void this.callSSEvent_(_.BROADCAST_EVENTS.VastReady,t)}this._broadcastState=_.BROADCAST_STATES.DONE,this.callSSEvent_(_.BROADCAST_EVENTS.Done)}}},{key:"getAdContainer",value:function(t){return this._adContainers[t]}}]),e}();n.default=d},{"../../../configs/timeouts.json":2,"./ad_containers/ad_container_factory":199,"./ad_state":219,"./constants":234,"./utils":245,"lodash/defaults":146,"lodash/forEach":153}],228:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=f(t("lodash/now")),a=f(t("./ad_timeout_manager")),o=f(t("./ad_video_element_manager")),s=f(t("./ima_manager")),_=h(t("./utils")),u=h(t("./constants")),l=f(t("./ad_location")),c=h(t("./state_info")),d=f(t("../../../configs/timeouts.json"));function h(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function f(t){return t&&t.__esModule?t:{default:t}}var p=function(){function t(e,n,i,r,a,o,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._endpoint=e,this._pixelUrl=n,this._flashBridgeUrl=i,this._posterUrl=r,this._forceSecure=a,this._version=o,this._timeouts=s,this._historyManager=_.getHistoryManager(),this._locationInfo=new l.default,this._pageProtocol=_.getPageProtocol(),this._manifest=null,this._videoElementManager=null,this._imaManager=null,this._timeoutManager=null,this._jsBridgeManager=null,this._wasReauctioned=!1}return i(t,[{key:"initialize",value:function(t){try{this._timeoutManager=new a.default(d.default,r.default),this._timeoutManager.setManifest(this.manifest)}catch(t){throw new Error(u.VD_ERROR_CODES.TIMEOUT_MANAGER_INIT_ERROR)}try{this._videoElementManager=new o.default(this.uuid,t)}catch(t){throw new Error(u.VD_ERROR_CODES.VIDEO_ELEMENT_MANAGER_INIT_ERROR)}try{this._imaManager=new s.default(this.uuid,this.pageProtocol,this.videoElementManager,t)}catch(t){throw new Error(u.VD_ERROR_CODES.IMA_MANAGER_CREATE_ERROR)}}},{key:"getStateInfo",value:function(t){return c.getStateInfo(t,this.manifest?this.manifest.width:u.VPAID_CONSTANTS.UNKNOWN,this.manifest?this.manifest.height:u.VPAID_CONSTANTS.UNKNOWN)}},{key:"isSizeMatch",value:function(t){return this.wasReauctioned||_.sizeMatch(this.manifest,t)}},{key:"replacePageProtocol",value:function(t){return _.promoteProtocol(t,this.pageProtocol)}},{key:"endpoint",get:function(){return this._endpoint}},{key:"pixelUrl",get:function(){return this._pixelUrl}},{key:"flashBridgeUrl",get:function(){return this._flashBridgeUrl}},{key:"posterUrl",get:function(){return this._posterUrl}},{key:"forceSecure",get:function(){return this._forceSecure}},{key:"version",get:function(){return this._version}},{key:"historyManager",get:function(){return this._historyManager}},{key:"manifest",get:function(){return this._manifest},set:function(t){this._manifest=t}},{key:"wasReauctioned",get:function(){return this._wasReauctioned},set:function(t){this._wasReauctioned=t}},{key:"pageProtocol",get:function(){return this._pageProtocol}},{key:"imaManager",get:function(){return this._imaManager}},{key:"timeoutManager",get:function(){return this._timeoutManager}},{key:"videoElementManager",get:function(){return this._videoElementManager}},{key:"locationInfo",get:function(){return this._locationInfo}},{key:"jsBridgeManager",get:function(){return this._jsBridgeManager},set:function(t){this._jsBridgeManager=t}},{key:"timeouts",get:function(){return this._timeouts}},{key:"uuid",get:function(){return this.manifest?this.manifest.uuid:null}},{key:"isDomainMatch",get:function(){return this.wasReauctioned||_.domainMatch(this.manifest,this.locationInfo)}}]),t}();n.default=p},{"../../../configs/timeouts.json":2,"./ad_location":214,"./ad_timeout_manager":220,"./ad_video_element_manager":225,"./constants":234,"./ima_manager":236,"./state_info":243,"./utils":245,"lodash/now":184}],229:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=t("./call_chain_link"),o=(i=a)&&i.__esModule?i:{default:i},s=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(t("./constants"));var _=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),/[^0-9a-z\-_.]/.test(e))throw new Error(s.CALL_CHAIN_ERRORS.INVALID_CALL_CHAIN);this._callChainLinks=[];for(var n=e.split(s.CALL_CHAIN_LINK_SEPARATOR),i=0;i<n.length;i++){var r=n[i].split(s.CALL_CHAIN_VARIABLE_SEPARATOR);if(r.length<2)throw new Error(s.CALL_CHAIN_ERRORS.NOT_A_VALID_CALL_CHAIN_LINK);for(var a=0,_=null,u=null,l=null,c=[],d=0;d<r.length;d++){if(2!==(_=r[d].split(s.CALL_CHAIN_VARIABLE_ID_SEPARATOR)).length)throw new Error(s.CALL_CHAIN_ERRORS.INVALID_CALL_CHAIN_LINK_GENERAL);if(u=_[0],l=parseInt(_[1]),isNaN(l)||0===l)throw new Error(s.CALL_CHAIN_ERRORS.INVALID_CALL_CHAIN_ID);if(/[^a-z]/.test(u)||u.length<1)throw new Error(s.CALL_CHAIN_ERRORS.INVALID_CALL_CHAIN_TAG);switch(u){case s.CALL_CHAIN_IDENTIFIERS.SUPPLY:a=l;break;default:c.push({id:l,tag:u})}}if(0===a)throw new Error(s.CALL_CHAIN_ERRORS.INVALID_CALL_CHAIN_LINK_NO_SUPPLY_TAG);this._callChainLinks.push(new o.default(a,c))}}return r(t,[{key:"toString",value:function(){return this.callChainLinkStrings.join(s.CALL_CHAIN_LINK_SEPARATOR)}},{key:"toVidIoString",value:function(){return this.vidIoCallChainLinkStrings.join(s.CALL_CHAIN_LINK_SEPARATOR)}},{key:"getCurrentCallChainBySupplyTag",value:function(t,e){for(var n=0;n<this._callChainLinks.length;n++)if(this._callChainLinks[n].supplyTagId===t){if(e)return this.callChainLinkStrings.slice(0,n+1).join(s.CALL_CHAIN_LINK_SEPARATOR);var i=this.callChainLinkStrings.slice(0,n).join(s.CALL_CHAIN_LINK_SEPARATOR);return i+(i.length>0?s.CALL_CHAIN_LINK_SEPARATOR:"")+s.CALL_CHAIN_IDENTIFIERS.SUPPLY+s.CALL_CHAIN_VARIABLE_ID_SEPARATOR+t}throw new Error(s.CALL_CHAIN_ERRORS.NO_SUPPLY_TAG_FOUND)}},{key:"getCallChainIndices",value:function(t,e){for(var n=[],i=this.callChainLinks,r=i.length,a=0;a<r;a++){var o=this.getCurrentCallChainBySupplyTag(i[a].supplyTagId,!0);(!t.hasOwnProperty(o)||e&&a===r-1)&&(t[o]=!0,n.push(a))}return n}},{key:"getSupplyTagHistory",value:function(t){for(var e=[],n=this.callChainLinks,i=0;i<n.length;i++){var r=this.getCurrentCallChainBySupplyTag(n[i].supplyTagId,!1);t.hasOwnProperty(r)||(t[r]=!0,e.push(i))}return e}},{key:"callChainLinks",get:function(){return this._callChainLinks}},{key:"callChainLinkStrings",get:function(){for(var t=[],e=0;e<this._callChainLinks.length;e++)t.push(this._callChainLinks[e].toString());return t}},{key:"vidIoCallChainLinkStrings",get:function(){for(var t=[],e=0;e<this._callChainLinks.length;e++)t.push(this._callChainLinks[e].toVidIoString());return t}}]),t}();n.default=_},{"./call_chain_link":230,"./constants":234}],230:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=u(t("lodash/map")),a=u(t("lodash/join")),o=u(t("lodash/find")),s=u(t("lodash/filter")),_=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(t("./constants"));function u(t){return t&&t.__esModule?t:{default:t}}var l=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._supplyTagId=e,this._otherTags=n}return i(t,[{key:"getFirstOtherTagId",value:function(t){var e=(0,o.default)(this._otherTags,function(e){return e.tag===t});return e?e.id:0}},{key:"getString",value:function(t){var e=[{id:this.supplyTagId,tag:_.CALL_CHAIN_IDENTIFIERS.SUPPLY}].concat(t),n=(0,r.default)(e,function(t){return t.tag+_.CALL_CHAIN_VARIABLE_ID_SEPARATOR+t.id});return(0,a.default)(n,_.CALL_CHAIN_VARIABLE_SEPARATOR)}},{key:"toString",value:function(){return this.getString(this.otherTags)}},{key:"toMoatUsedString",value:function(){return this.getString(this.otherTags.concat({id:1,tag:_.CALL_CHAIN_IDENTIFIERS.MOAT_USED}))}},{key:"toVidIoString",value:function(){return this.getString((0,s.default)(this.otherTags,function(t){return!_.CALL_CHAIN_IDENTIFIER_BLACKLIST.hasOwnProperty(t.tag)}))}},{key:"supplyTagId",get:function(){return this._supplyTagId}},{key:"demandTagId",get:function(){return this.getFirstOtherTagId(_.CALL_CHAIN_IDENTIFIERS.DEMAND)}},{key:"otherTags",get:function(){return this._otherTags}}]),t}();n.default=l},{"./constants":234,"lodash/filter":149,"lodash/find":150,"lodash/join":176,"lodash/map":180}],231:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,n,i)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(i):void 0},a=c(t("../../lib/swfobjectdoc")),o=c(t("../../../../configs/flash_config.json")),s=l(t("../utils")),_=l(t("../constants")),u=c(t("../ad_vpaid"));function l(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function c(t){return t&&t.__esModule?t:{default:t}}var d=!1;window.addEventListener("load",function(t){d=!0});var h=function(t){function e(t,n,i,r,u,l,c,h){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var f=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"AdJsBridge",function(t){if(t.success)return t.data;throw new Error(t.exception)}));f._uuid=t,f.slot_=l;var p=s.getDocumentAndWindow(f.slot_);p.window.isReady=function(){return d=d||"complete"===p.document.readyState},p.window.forward=function(t,e){var n="on"+t;f[n]&&"function"==typeof f[n]&&(e&&e.hasOwnProperty("message")?f[n](e.message):f[n]())},p.window.setSWFIsReady=function(){h()};var E=p.document.createElement("div");E.id=_.FLASH_DIV_ID,E.style.width=r+"px",E.style.height=u+"px",s.cssreset(E),f.slot_.appendChild(E),f.objectDiv_=p.document.createElement("div"),f.objectDiv_.id=_.FLASH_OBJECT_ID,E.appendChild(f.objectDiv_);var A=new a.default(p.document,p.window);return A.switchOffAutoHideShow(),A.embedSWF(s.makeUrl(s.getProtocol(n),i,null),f.objectDiv_,"100%","100%",o.default.TARGET_PLAYER,!1,{uuid:t},{scale:"exactFit",allowscriptaccess:"always",allowfullscreen:"true",menu:"false",bgcolor:"#000000"},{bgcolor:"#000000",style:"left: 0; right: 0; top: 0; bottom: 0; display: block; position: absolute; margin:0; padding:0; border:0; outline:0; font-size:100%; vertical-align:baseline; background:transparent;"},function(t){if(t.success)try{f._ad=p.document.getElementById(_.FLASH_OBJECT_ID)}catch(t){}c(t)}),f}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,u.default),i(e,[{key:"load",value:function(t){if(this._ad){var e=0===t.xFlvMedia.length?null:t.xFlvMedia[0].url;this._ad.load(t.flashVpaidUrl,e,t.duration)}}},{key:"handshakeVersion",value:function(t){if(r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"handshakeVersion",this).call(this,t),this._ad)return this._ad.handshakeVersion(this._handshakeVersion)}},{key:"initAd",value:function(t,n,i,a,o,s){r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initAd",this).call(this,t,n,i,a,o,s),this.changeDisplay(!0),this._ad&&this._ad.initAd(t,n,i,a,o.AdParameters,"")}},{key:"stopAd",value:function(){this.changeDisplay(!1),r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"stopAd",this).call(this)}},{key:"skipAd",value:function(){this.changeDisplay(!1),r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"skipAd",this).call(this)}},{key:"onAdStopped",value:function(){this.changeDisplay(!1),r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdStopped",this).call(this)}},{key:"onAdSkipped",value:function(){this.changeDisplay(!1),r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdSkipped",this).call(this)}},{key:"onAdError",value:function(t){this.changeDisplay(!1),r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdError",this).call(this,t)}},{key:"changeDisplay",value:function(t){var e=s.getDocumentAndWindow(this.slot_).document.getElementById(_.FLASH_OBJECT_ID);t?(this.callLogEvent_(_.LOG_EVENTS.BRIDGE_SHOW),e.style.visibility="visible"):(this.callLogEvent_(_.LOG_EVENTS.BRIDGE_HIDE),e.style.visibility="hidden")}}]),e}();n.default=h},{"../../../../configs/flash_config.json":1,"../../lib/swfobjectdoc":196,"../ad_vpaid":226,"../constants":234,"../utils":245}],232:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,n,i)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(i):void 0},a=c(t("../constants")),o=c(t("../utils")),s=c(t("../ad_vast_utils")),_=l(t("../ad_state")),u=l(t("../../../../configs/timeouts.json"));function l(t){return t&&t.__esModule?t:{default:t}}function c(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}var d=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"VpaidImaWrapper",o.identityWrapper));return i._cabinet=t,i._vast=n,i._width=a.VPAID_CONSTANTS.UNKNOWN,i._height=a.VPAID_CONSTANTS.UNKNOWN,i._viewMode=a.VPAID_CONSTANTS.UNKNOWN,i._adsManager=null,i._currentAd=null,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,_.default),i(e,[{key:"initAd",value:function(t,n,i,o,_,l){var c=this;r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initAd",this).call(this,t,n,i,o,_,l),this._width=t,this._height=n,this._viewMode=i;try{this._cabinet.imaManager.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoaded.bind(this),!1),this._cabinet.imaManager.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdsManagerAdError.bind(this),!1),l.videoSlot.onended=function(){c._cabinet.imaManager.doContentComplete()}}catch(t){return void this.callFinalEvent_(a.VPAID_EVENTS.AdError,a.VD_ERROR_CODES.IMA_INIT_AD_ERROR)}try{var d=new google.ima.AdsRequest;d.adTagUrl=this._cabinet.replacePageProtocol(s.replaceDetectedMacros(this._cabinet.locationInfo,this._cabinet.getStateInfo(this._initParams),this._vast.imaTagUrl)),d.linearAdSlotWidth=t,d.linearAdSlotHeight=n,d.nonLinearAdSlotWidth=t,d.nonLinearAdSlotHeight=a.IMA_NONLINEAR_SLOT_HEIGHT,d.vastLoadTimeout=u.default.VAST_TIMEOUT,this._cabinet.imaManager.adsLoader.requestAds(d)}catch(t){this.callFinalEvent_(a.VPAID_EVENTS.AdError,a.VD_ERROR_CODES.IMA_ADS_LOADER_EXCEPTION)}}},{key:"onAdsManagerLoaded",value:function(t){this._state=a.IMA_MANAGER_STATES.LOADED;var e=new google.ima.AdsRenderingSettings;e.restoreCustomPlaybackStateOnAdBreakComplete=!0,this._adsManager=t.getAdsManager(this._initParams.environmentVars.videoSlot,e),this._adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError.bind(this)),this._adsManager.addEventListener(google.ima.AdEvent.Type.AD_BREAK_READY,function(){}),this._adsManager.addEventListener(google.ima.AdEvent.Type.AD_METADATA,function(){}),this._adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,this.onAllAdsCompleted.bind(this)),this._adsManager.addEventListener(google.ima.AdEvent.Type.CLICK,this.onIMAClick.bind(this)),this._adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,function(){}),this._adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(){}),this._adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(){}),this._adsManager.addEventListener(google.ima.AdEvent.Type.DURATION_CHANGE,this.onIMADurationChange.bind(this)),this._adsManager.addEventListener(google.ima.AdEvent.Type.FIRST_QUARTILE,this.onIMAFirstQuartile.bind(this)),this._adsManager.addEventListener(google.ima.AdEvent.Type.IMPRESSION,this.onIMAImpression.bind(this)),this._adsManager.addEventListener(google.ima.AdEvent.Type.INTERACTION,this.onIMAInteraction.bind(this)),this._adsManager.addEventListener(google.ima.AdEvent.Type.LINEAR_CHANGED,this.onIMALinearChanged.bind(this)),this._adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,this.onIMALoaded.bind(this)),this._adsManager.addEventListener(google.ima.AdEvent.Type.LOG,this.onIMALog.bind(this)),this._adsManager.addEventListener(google.ima.AdEvent.Type.MIDPOINT,this.onIMAMidpoint.bind(this)),this._adsManager.addEventListener(google.ima.AdEvent.Type.PAUSED,this.onIMAPaused.bind(this)),this._adsManager.addEventListener(google.ima.AdEvent.Type.RESUMED,this.onIMAResumed.bind(this)),this._adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,this.onIMASkippableStateChanged.bind(this)),this._adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPED,this.onIMASkipped.bind(this)),this._adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,this.onIMAStarted.bind(this)),this._adsManager.addEventListener(google.ima.AdEvent.Type.THIRD_QUARTILE,this.onIMAThirdQuartile.bind(this)),this._adsManager.addEventListener(google.ima.AdEvent.Type.USER_CLOSE,this.onIMAUserClose.bind(this)),this._adsManager.addEventListener(google.ima.AdEvent.Type.VOLUME_CHANGED,this.onIMAVolumeChanged.bind(this)),this._adsManager.addEventListener(google.ima.AdEvent.Type.VOLUME_MUTED,this.onIMAVolumeMuted.bind(this)),this.callEvent_(a.VPAID_EVENTS.AdLoaded)}},{key:"onAdsManagerAdError",value:function(t){this.destroyAd(),this.callFinalEvent_(a.VPAID_EVENTS.AdError,a.VD_ERROR_CODES.IMA_ADS_LOADER_ERROR)}},{key:"onAdError",value:function(t){this.destroyAd(),this.callFinalEvent_(a.VPAID_EVENTS.AdError,a.VD_ERROR_CODES.IMA_ADS_ERROR)}},{key:"destroyAd",value:function(){this._isDeadAd=!0,this._adsManager&&(this._adsManager.destroy(),this._adsManager=null),this._cabinet.imaManager.doContentComplete(),this._cabinet.imaManager.contentComplete=!1}},{key:"onAllAdsCompleted",value:function(){this._isDeadAd||this.destroyAd(),this.callEvent_(a.VPAID_EVENTS.AdVideoComplete),this.callFinalEvent_(a.VPAID_EVENTS.AdStopped)}},{key:"onIMAClick",value:function(t){this.callEvent_(a.VPAID_EVENTS.onAdClickThru,"",t.getAd().getAdId(),!1)}},{key:"onIMADurationChange",value:function(){this.callEvent_(a.VPAID_EVENTS.AdDurationChange)}},{key:"onIMAFirstQuartile",value:function(){this.callEvent_(a.VPAID_EVENTS.AdVideoFirstQuartile)}},{key:"onIMAImpression",value:function(){this.callEvent_(a.VPAID_EVENTS.AdImpression)}},{key:"onIMAInteraction",value:function(){this.callEvent_(a.VPAID_EVENTS.AdInteraction)}},{key:"onIMALinearChanged",value:function(){this.callEvent_(a.VPAID_EVENTS.AdLinearChange)}},{key:"onIMALoaded",value:function(t){this._currentAd=t.getAd()}},{key:"onIMALog",value:function(t){var e=t.getAdData();e.hasOwnProperty("adError")?this.callEvent_(a.VPAID_EVENTS.AdLog,e.adError.getMessage()):this.callEvent_(a.VPAID_EVENTS.AdLog,"IMA Ad Log")}},{key:"onIMAMidpoint",value:function(){this.callEvent_(a.VPAID_EVENTS.AdVideoMidpoint)}},{key:"onIMAPaused",value:function(){this.callEvent_(a.VPAID_EVENTS.AdPaused)}},{key:"onIMAResumed",value:function(){this.callEvent_(a.VPAID_EVENTS.AdPlaying)}},{key:"onIMASkippableStateChanged",value:function(){this.callEvent_(a.VPAID_EVENTS.AdSkippableStateChange)}},{key:"onIMASkipped",value:function(){this._isDeadAd||this.destroyAd(),this.callEvent_(a.VPAID_EVENTS.AdSkipped),this.callEvent_(a.VPAID_EVENTS.AdStopped)}},{key:"onIMAStarted",value:function(){this.callEvent_(a.VPAID_EVENTS.AdStarted),this.callEvent_(a.VPAID_EVENTS.AdVideoStart)}},{key:"onIMAThirdQuartile",value:function(){this.callEvent_(a.VPAID_EVENTS.AdVideoThirdQuartile)}},{key:"onIMAUserClose",value:function(){this.callEvent_(a.VPAID_EVENTS.AdUserClose)}},{key:"onIMAVolumeChanged",value:function(){this.callEvent_(a.VPAID_EVENTS.AdVolumeChange)}},{key:"onIMAVolumeMuted",value:function(){this.callEvent_(a.VPAID_EVENTS.AdVolumeChange)}},{key:"callFinalEvent_",value:function(t){for(var n,i=arguments.length,a=Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];(n=r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"callEvent_",this)).call.apply(n,[this,t].concat(a))}},{key:"startAd",value:function(){if(!this._isDeadAd)try{this._adsManager.init(this._width,this._height,this._viewMode),this._adsManager.start()}catch(t){this.destroyAd(),this.callFinalEvent_(a.VPAID_EVENTS.AdError,a.VD_ERROR_CODES.IMA_ADS_MANAGER_INIT_ERROR)}}},{key:"getAdWidth",value:function(){return this._width}},{key:"getAdHeight",value:function(){return this._height}},{key:"getAdViewMode",value:function(){return this._viewMode}},{key:"getAdRemainingTime",value:function(){return this._adsManager?this._adsManager.getRemainingTime():a.VPAID_CONSTANTS.UNKNOWN}},{key:"getAdDuration",value:function(){return this._currentAd?this._currentAd.getDuration():a.VPAID_CONSTANTS.UNKNOWN}},{key:"getAdCompanions",value:function(){return this._currentAd?this._currentAd.getCompanionAds(this.width,this.height):[]}},{key:"getAdIcons",value:function(){return""}},{key:"getAdLinear",value:function(){return!this._currentAd||this._currentAd.isLinear()}},{key:"collapseAd",value:function(){this.expanded_=!1,this._adsManager&&this._adsManager.collapse()}},{key:"expandAd",value:function(){this.expanded_=!0,this._adsManager&&this._adsManager.expand()}},{key:"getAdExpanded",value:function(){return this.expanded_}},{key:"getAdSkippableState",value:function(){return!!this._adsManager&&this._adsManager.getAdSkippableState()}},{key:"skipAd",value:function(){this._adsManager?this._adsManager.skip():(this._isDeadAd=!0,this.callEvent_(a.VPAID_EVENTS.AdSkipped),this.callEvent_(a.VPAID_EVENTS.AdStopped))}},{key:"getAdVolume",value:function(){return this._adsManager&&(this._volume=this._adsManager.getVolume()),this._volume}},{key:"setAdVolume",value:function(t){var e=t!==this._volume;this._adsManager?this._adsManager.setVolume(t):e&&this.callEvent_(a.VPAID_EVENTS.AdVolumeChange),this._volume=t}},{key:"resumeAd",value:function(){this.isPaused_=!1,this._adsManager?this._adsManager.resume():this.callEvent_(a.VPAID_EVENTS.AdPlaying)}},{key:"pauseAd",value:function(){this.isPaused_=!0,this._adsManager?this._adsManager.pause():this.callEvent_(a.VPAID_EVENTS.AdPaused)}},{key:"resizeAd",value:function(t,e,n){var i=this._width!==t||this._height!==e||this._viewMode!==n;this._width=t,this._height=e,this._viewMode=n,this._adsManager?this._adsManager.resize(t,e,n):i&&this.callEvent_(a.VPAID_EVENTS.AdSizeChange)}},{key:"stopAd",value:function(){this._adsManager?this._adsManager.stop():(this._isDeadAd=!0,this.callEvent_(a.VPAID_EVENTS.AdStopped))}}]),e}();n.default=d},{"../../../../configs/timeouts.json":2,"../ad_state":219,"../ad_vast_utils":223,"../constants":234,"../utils":245}],233:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,n,i)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(i):void 0},a=l(t("lodash/map")),o=u(t("../constants")),s=u(t("../utils")),_=l(t("../ad_vpaid"));function u(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function l(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"VpaidVideoWrapper",s.identityWrapper));return i._cabinet=t,i._vast=n,i._width=o.VPAID_CONSTANTS.UNKNOWN,i._height=o.VPAID_CONSTANTS.UNKNOWN,i._viewMode=o.VPAID_CONSTANTS.UNKNOWN,i._lastQuartileIndex=0,i._hasPlayedTimeout=0,i._expanded=!1,i._isPaused=!1,i._metaDataLoaded=!1,i._slotListeners={},i._videoSlotListeners={},i._clickCounter=0,i._isClicked=!1,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,_.default),i(e,[{key:"initAd",value:function(t,n,i,a,_,u){r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initAd",this).call(this,t,n,i,a,_,u),this._width=t,this._height=n,this._viewMode=i;try{if(!this._initParams.environmentVars.hasOwnProperty("videoSlot")||null===this._initParams.environmentVars.videoSlot){if(null===this._cabinet.videoElementManager.videoSlot)return void this.callFinalEvent_(o.VPAID_EVENTS.AdError,o.VD_ERROR_CODES.CREATE_VIDEO_SLOT_LOGIC_ERROR);this._initParams.environmentVars.videoSlot=this._cabinet.videoElementManager.videoSlot,this._initParams.environmentVars.slot.appendChild(this._initParams.environmentVars.videoSlot)}}catch(t){this.callFinalEvent_(o.VPAID_EVENTS.AdError,o.VD_ERROR_CODES.CREATE_VIDEO_SLOT_ERROR)}try{this._volume=this._initParams.environmentVars.videoSlot.volume,this.callEvent_(o.VPAID_EVENTS.AdVolumeChange)}catch(t){return void this.callFinalEvent_(o.VPAID_EVENTS.AdError,o.VD_ERROR_CODES.GET_VOLUME_ERROR)}var l=!1;try{for(var c=0;c<this._vast.media.length;c++){var d=this._vast.media[c];if(s.canPlayVideo(this._initParams.environmentVars.videoSlot,d.mimetype)){this._initParams.environmentVars.videoSlot.setAttribute(o.VIDEO_ATTRIBUTES.src,d.url),this._initParams.environmentVars.videoSlot.setAttribute(o.VIDEO_ATTRIBUTES.type,d.mimetype),this._initParams.environmentVars.videoSlotCanAutoPlay,l=!0;break}}}catch(t){return void this.callFinalEvent_(o.VPAID_EVENTS.AdError,o.VD_ERROR_CODES.FOUND_SOURCE_ERROR)}if(l){try{this._initParams.environmentVars.videoSlot.readyState>this._initParams.environmentVars.videoSlot.HAVE_METADATA?this._metaDataLoaded=!0:this.addVideoSlotEventListener_(o.VIDEO_EVENTS.loadedmetadata,this.loadedMetaDataHandler_.bind(this)),this.addVideoSlotEventListener_(o.VIDEO_EVENTS.timeupdate,this.timeUpdateHandler_.bind(this)),this.addVideoSlotEventListener_(o.VIDEO_EVENTS.ended,this.ended.bind(this))}catch(t){return void this.callFinalEvent_(o.VPAID_EVENTS.AdError,o.VD_ERROR_CODES.ADD_EVENT_LISTENERS_ERROR)}this._initParams.environmentVars.videoSlotCanAutoPlay,0,this.callEvent_(o.VPAID_EVENTS.AdLoaded)}else this.callFinalEvent_(o.VPAID_EVENTS.AdError,o.VD_ERROR_CODES.NO_SOURCE)}},{key:"getAdWidth",value:function(){return this._width}},{key:"getAdHeight",value:function(){return this._height}},{key:"getAdViewMode",value:function(){return this._viewMode}},{key:"addSlotEventListener_",value:function(t,e){this._slotListeners[t]=e,this._initParams.environmentVars.slot.addEventListener(t,e,!1)}},{key:"addVideoSlotEventListener_",value:function(t,e){this._videoSlotListeners[t]=e,this._initParams.environmentVars.videoSlot.addEventListener(t,e,!1)}},{key:"callFinalEvent_",value:function(t){var n,i=this;(0,a.default)(this._videoSlotListeners,function(t,e){i._initParams.environmentVars.videoSlot.removeEventListener(e,t)}),this._videoSlotListeners={},(0,a.default)(this._slotListeners,function(t,e){i._initParams.environmentVars.slot.removeEventListener(e,t)}),this._slotListeners={};for(var o=arguments.length,s=Array(o>1?o-1:0),_=1;_<o;_++)s[_-1]=arguments[_];(n=r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"callEvent_",this)).call.apply(n,[this,t].concat(s))}},{key:"loadedMetaDataHandler_",value:function(){this._metaDataLoaded=!0}},{key:"timeUpdateHandler_",value:function(){if(!(this._lastQuartileIndex>=o.QUARTILE_EVENTS.length))for(var t=100*this._initParams.environmentVars.videoSlot.currentTime/this._initParams.environmentVars.videoSlot.duration;t>=o.QUARTILE_EVENTS[this._lastQuartileIndex].value&&(this.callEvent_(o.QUARTILE_EVENTS[this._lastQuartileIndex].event),this._lastQuartileIndex+=1,!(this._lastQuartileIndex>=o.QUARTILE_EVENTS.length)););}},{key:"startAd",value:function(){var t=this,e=function(){try{t.addVideoSlotEventListener_(o.VIDEO_EVENTS.click,function(t){this.adClicked()}.bind(t))}catch(e){return void t.callFinalEvent_(o.VPAID_EVENTS.AdError,o.VD_ERROR_CODES.ADD_CLICK_LISTENER)}t._initParams.environmentVars.videoSlot.play(),t.isPlayingTimer_(),t.callEvent_(o.VPAID_EVENTS.AdStarted)};this._initParams.environmentVars.videoSlotCanAutoPlay,e()}},{key:"isPlayingTimer_",value:function(){this.hasPlayed_()?(this.callEvent_(o.VPAID_EVENTS.AdImpression),this._hasPlayedTimeout>0&&clearTimeout(this._hasPlayedTimeout)):this._hasPlayedTimeout=setTimeout(this.isPlayingTimer_.bind(this),o.RETRY_MS)}},{key:"hasPlayed_",value:function(){return this._initParams.environmentVars.videoSlot.currentTime>0}},{key:"getAdRemainingTime",value:function(){var t=this.getAdDuration();return null!==this._initParams.environmentVars.videoSlot&&this._initParams.environmentVars.videoSlot.hasOwnProperty("currentTime")&&null!==this._initParams.environmentVars.videoSlot.currentTime&&this._initParams.environmentVars.videoSlot.currentTime>=0?t-Math.max(this._initParams.environmentVars.videoSlot.currentTime,t):o.VPAID_CONSTANTS.UNKNOWN}},{key:"getAdDuration",value:function(){return null!==this._initParams.environmentVars.videoSlot&&this._initParams.environmentVars.videoSlot.hasOwnProperty("duration")&&null!==this._initParams.environmentVars.videoSlot.duration&&this._initParams.environmentVars.videoSlot.duration>0?this._initParams.environmentVars.videoSlot.duration:null!==this._vast.duration?this._vast.duration:o.VPAID_CONSTANTS.UNKNOWN}},{key:"getAdCompanions",value:function(){return this._vast.companions}},{key:"getAdIcons",value:function(){return this._vast.icons}},{key:"getAdLinear",value:function(){return this._vast.linear}},{key:"collapseAd",value:function(){this._expanded=!1}},{key:"expandAd",value:function(){this._expanded=!0,this._initParams.environmentVars.videoSlot.requestFullscreen?this._initParams.environmentVars.videoSlot.requestFullscreen():this._initParams.environmentVars.videoSlot.msRequestFullscreen?this._initParams.environmentVars.videoSlot.msRequestFullscreen():this._initParams.environmentVars.videoSlot.mozRequestFullScreen?this._initParams.environmentVars.videoSlot.mozRequestFullScreen():this._initParams.environmentVars.videoSlot.webkitRequestFullscreen&&this._initParams.environmentVars.videoSlot.webkitRequestFullscreen(),this.callEvent_(o.VPAID_EVENTS.AdExpandedChange)}},{key:"getAdExpanded",value:function(){return this._expanded}},{key:"getAdSkippableState",value:function(){return this._vast.skipOffset===o.VPAID_CONSTANTS.NOT_IMPLEMENTED||this.getAdRemainingTime()<this._vast.skipOffset}},{key:"skipAd",value:function(){this.getAdSkippableState()&&(this.callEvent_(o.VPAID_EVENTS.AdSkipped),this.callEvent_(o.VPAID_EVENTS.AdStopped))}},{key:"getAdVolume",value:function(){return null!==this._initParams.environmentVars.videoSlot&&(this._volume=this._initParams.environmentVars.videoSlot.volume),this._volume}},{key:"setAdVolume",value:function(t){null!==this._initParams.environmentVars.videoSlot&&(this._initParams.environmentVars.videoSlot.volume=t),t!==this._volume&&(this._volume=t,this.callEvent_(o.VPAID_EVENTS.AdVolumeChange))}},{key:"resumeAd",value:function(){this._isPaused=!1,this._initParams.environmentVars.videoSlot.play(),this.callEvent_(o.VPAID_EVENTS.AdPlaying)}},{key:"pauseAd",value:function(){this._isPaused=!0,this._initParams.environmentVars.videoSlot.pause(),this.callEvent_(o.VPAID_EVENTS.AdPaused)}},{key:"resizeAd",value:function(t,e,n){this._width===t&&this._height===e&&this._viewMode===n||(this._width=t,this._height=e,this._viewMode=n,this.callEvent_(o.VPAID_EVENTS.AdSizeChange))}},{key:"stopAd",value:function(){var t=this;this._hasPlayedTimeout>0&&clearTimeout(this._hasPlayedTimeout),setTimeout(function(){t.callFinalEvent_(o.VPAID_EVENTS.AdStopped)},o.STOP_AD_TIMEOUT)}},{key:"ended",value:function(t){this.callEvent_(o.VPAID_EVENTS.AdVideoComplete),this.stopAd()}},{key:"adClicked",value:function(){this._vast.clickThrough&&(!1===this._isPaused?(this.pauseAd(),this.callEvent_(o.VPAID_EVENTS.AdClickThru,this._vast.clickThrough,"adClickId-"+this._clickCounter++,!1),window.open(this._vast.clickThrough,"_blank")):this.resumeAd())}}]),e}();n.default=c},{"../ad_vpaid":226,"../constants":234,"../utils":245,"lodash/map":180}],234:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getDefaultVast=function(){return{version:3,wrapperUrl:null,duration:null,media:[],jsVpaidUrl:null,flashVpaidUrl:null,xFlvMedia:[],hasPlayableMedia:!1,adParameters:"",clickThrough:null,noad:null,companions:"",icons:!1,linear:!0,skipOffset:a.NOT_IMPLEMENTED,ortb_detail:null,imaTagUrl:null}},n.getDefaultVastPixels=function(){return{errorPixels:[],impressionPixels:[],clickTracking:[],trackingEvents:{creativeView:[],start:[],firstQuartile:[],midpoint:[],thirdQuartile:[],complete:[],mute:[],unmute:[],pause:[],rewind:[],resume:[],fullscreen:[],exitFullscreen:[],expand:[],collapse:[],acceptInvitationLinear:[],acceptInvitation:[],closeLinear:[],skip:[],progress:[]}}};n.NO_TIMEOUT=1e9,n.HANDSHAKE_VERSION_2_0="2.0",n.MOAT_DUMMY_VALUE=1,n.DIGEST_LENGTH=8,n.AD_ERROR_TRUNCATION_LENGTH=50,n.DEFAULT_VOLUME=1,n.ALLOW_SCRIPTS="allow-scripts",n.PROMOTE_PROTOCOL_NO_URL="PROMOTE_PROTOCOL_NO_URL",n.DEMAND_TYPES={UNKNOWN:0,FLASH_VPAID:1,JS_VPAID:2,VIDEO:3,BOTH:4,IMA:5,EMPTY_VAST:6,XHR_400_RESPONSE:7,XHR_500_RESPONSE:8,XHR_204_RESPONSE:9};var i=n.VID_IO_EVENTS={js_opportunity:"js_opportunity",cm_req_js_opp:"cm_req_js_opp",cm_js_demand_req_resp:"cm_js_demand_req_resp",js_demand_request:"js_demand_request",js_demand_response:"js_demand_response",js_demand_opportunity:"js_demand_opportunity",js_demand_error:"js_demand_error",js_demand_missed_opportunity:"js_demand_missed_opportunity",js_impression:"js_impression",js_supply_error:"js_supply_error",js_click:"js_click",js_first_quartile:"js_first_quartile",js_midpoint:"js_midpoint",js_third_quartile:"js_third_quartile",js_complete:"js_complete",js_skip:"js_skip",js_unload:"js_unload"},r=(n.PIXEL_MUTEX_EVENTS={js_impression:"js_impression",js_supply_error:"js_supply_error"},n.PIXEL_ONCE_EVENTS={js_click:"js_click",js_first_quartile:"js_first_quartile",js_midpoint:"js_midpoint",js_third_quartile:"js_third_quartile",js_complete:"js_complete"},n.MANIFEST_PARSE_ERRORS={PIMPS:"PIMPS",UUID:"UUID",SECURE:"SECURE",AID:"AID",SUPPLY_TAG_ID:"SUPPLY_TAG_ID",TO:"TO",V:"V",COUNTRY:"COUNTRY",SSID:"SSID",WIDTH:"WIDTH",HEIGHT:"HEIGHT",DOMAIN:"DOMAIN",IMP_PXL:"IMP_PXL",TD:"TD",TS:"TS",URLPARAMS:"URLPARAMS",DTO_OBJECT:"DTO_OBJECT",DTO_KEY_STRING:"DTO_KEY_STRING",DTO_KEY_POS:"DTO_KEY_POS",DTO_VALUE_INT:"DTO_VALUE_INT",DTO_VALUE_POS:"DTO_VALUE_POS",DTO_INVALID_DTID:"DTO_INVALID_DTID",OL:"OL",OV:"OV",SSC_PV:"SSC_PV",SSC_TO:"SSC_TO",PP:"PP",DX_ARRAY:"DX_ARRAY",BROADCAST_ARRAY:"BROADCAST_ARRAY",WATERFALL_OBJECT:"WATERFALL_OBJECT",WATERFALL_ID:"WATERFALL_ID",WATERFALL_URL:"WATERFALL_URL",WATERFALL_TO:"WATERFALL_TO",WATERFALL_A_CC:"WATERFALL_A_CC",WATERFALL_TD:"WATERFALL_TD",WATERFALL_TS:"WATERFALL_TS",WATERFALL_SSC_F:"WATERFALL_SSC_F",WATERFALL_SSC_ID:"WATERFALL_SSC_ID",WATERFALL_PIXELS_OBJECT:"WATERFALL_PIXELS_OBJECT",WATERFALL_PIXELS_VPAID_EVENT:"WATERFALL_PIXELS_VPAID_EVENT",WATERFALL_PIXELS_ARRAY:"WATERFALL_PIXELS_ARRAY",WATERFALL_PIXELS_URL:"WATERFALL_PIXELS_URL",WATERFALL_CALL_CHAIN:"WATERFALL_CALL_CHAIN",WATERFALL_CALL_CHAIN_2:"WATERFALL_CALL_CHAIN_2",WATERFALL_PREDECESSORS:"WATERFALL_PREDECESSORS",WATERFALL_PREDECESSORS_2:"WATERFALL_PREDECESSORS_2",WATERFALL_OL:"WATERFALL_OL",PASSTHRU:"PASSTHRU",PIXELS_OBJECT:"PIXELS_OBJECT",PIXELS_INVALID_EVENT:"PIXELS_INVALID_EVENT",PIXELS_ARRAY:"PIXELS_ARRAY",PIXELS_URL:"PIXELS_URL"},n.CALL_CHAIN_ERRORS={INVALID_CALL_CHAIN:"INVALID_CALL_CHAIN",INVALID_SUPPLY_DEMAND_PAIR:"INVALID_SUPPLY_DEMAND_PAIR",NO_SUPPLY_TAG_FOUND:"NO_SUPPLY_TAG_FOUND",INVALID_CALL_CHAIN_LINK_GENERAL:"INVALID_CALL_CHAIN_LINK_GENERAL",INVALID_CALL_CHAIN_LINK:"INVALID_CALL_CHAIN_LINK",INVALID_CALL_CHAIN_ID:"INVALID_CALL_CHAIN_ID",INVALID_CALL_CHAIN_TAG:"INVALID_CALL_CHAIN_TAG",INVALID_CALL_CHAIN_LINK_NO_SUPPLY_TAG:"INVALID_CALL_CHAIN_LINK_NO_SUPPLY_TAG",NOT_A_VALID_CALL_CHAIN_LINK:"NOT_A_VALID_CALL_CHAIN_LINK"},n.VD_ERROR_CODES={TIMEOUT_MANAGER_INIT_ERROR:"TIMEOUT_MANAGER_INIT_ERROR",VIDEO_ELEMENT_MANAGER_INIT_ERROR:"VIDEO_ELEMENT_MANAGER_INIT_ERROR",CABINET_INITIALIZE_ERROR:"CABINET_INITIALIZE_ERROR",PROCESSOR_CREATE_ERROR:"PROCESSOR_CREATE_ERROR",JS_OPPORTUNITY_ERROR:"JS_OPPORTUNITY_ERROR",FIRE_INIT_AD_PIXELS_ERROR:"FIRE_INIT_AD_PIXELS_ERROR",PROCESSOR_INIT_ERROR:"PROCESSOR_INIT_ERROR",PROCESSOR_NEXT_BROADCAST_ERROR:"PROCESSOR_NEXT_BROADCAST_ERROR",SSC_RESULT_MANAGER_INIT_ERROR:"SSC_RESULT_MANAGER_INIT_ERROR",INIT_AD_ERROR:"INIT_AD_ERROR",SCRIPT_ON_ERROR:"SCRIPT_ON_ERROR",IFRAME_ON_ERROR:"IFRAME_ON_ERROR",AD_ERROR:"AD_ERROR",HB_BID_ERROR:"HB_BID_ERROR",JSON_PARSE_ERROR:"JSON_PARSE_ERROR",JSON_PARSE_UNKNOWN_ERROR:"JSON_PARSE_UNKNOWN_ERROR",JSON_PARSE_UNKNOWN_ERROR_2:"JSON_PARSE_UNKNOWN_ERROR_2",MANIFEST_PARSE_ERROR:"MANIFEST_PARSE_ERROR",MANIFEST_PARSE_UNKNOWN_ERROR:"MANIFEST_PARSE_UNKNOWN_ERROR",MANIFEST_PARSE_UNKNOWN_ERROR_2:"MANIFEST_PARSE_UNKNOWN_ERROR_2",JSON_RESPONSE_PARSE_ERROR:"JSON_RESPONSE_PARSE_ERROR",JSON_MANIFEST_PARSE_ERROR:"JSON_MANIFEST_PARSE_ERROR",JSON_TIMEOUT:"JSON_TIMEOUT",NO_FILL:"NO_FILL",PLAY_ERROR:"PLAY_ERROR",NO_RESPONSES:"NO_RESPONSES",STOP_AD_CALLED:"STOP_AD_CALLED",SKIP_AD_CALLED:"SKIP_AD_CALLED",NO_SOURCE:"NO_SOURCE",UNKNOWN_REJECTION:"UNKNOWN_REJECTION",VAST_ERROR_EVENT:"VAST_ERROR_EVENT",VPAID_TIMEOUT:"VPAID_TIMEOUT",VIDEO_TIMEOUT:"VIDEO_TIMEOUT",IS_PLAYING_TIMEOUT:"IS_PLAYING_TIMEOUT",NO_XHR:"NO_XHR",BAD_XHR_STATUS:"BAD_XHR_STATUS",FLASH_DISABLED:"FLASH_DISABLED",FLASH_NOT_SUPPORTED:"FLASH_NOT_SUPPORTED",UNSUPPORTED_MEDIA:"UNSUPPORTED_MEDIA",EMPTY_VAST:"EMPTY_VAST",VAST_TIMEOUT:"VAST_TIMEOUT",TOO_MANY_WRAPPERS:"TOO_MANY_WRAPPERS",WRAPPER_CHAIN_NO_TIME:"VASTS_NO_TIME",AD_STOPPED:"AD_STOPPED",AD_SKIPPED:"AD_SKIPPED",AD_TIMEOUT:"AD_TIMEOUT",XHR_ERROR:"XHR_ERROR",DEMAND_TAG_ERROR:"DEMAND_TAG_ERROR",SUPPLY_TAG_TIMEOUT:"SUPPLY_TAG_TIMEOUT",DEMAND_PARTNER_TIMEOUT:"DEMAND_PARTNER_TIMEOUT",DTO_TIMEOUT:"DTO_TIMEOUT",FLASH_DISPLAY_LOAD_ERROR:"FLASH_DISPLAY_LOAD_ERROR",VAST_LOGIC_ERROR:"VAST_LOGIC_ERROR",CHILD_HANDSHAKE_ERROR:"CHILD_HANDSHAKE_ERROR",CHILD_INIT_AD_ERROR:"CHILD_INIT_AD_ERROR",CHILD_SET_VOLUME_ERROR:"CHILD_SET_VOLUME_ERROR",IMA_WRAPPER_BEGIN_ERROR:"IMA_WRAPPER_BEGIN_ERROR",IMA_MANAGER_LOAD_ERROR:"IMA_MANAGER_LOAD_ERROR",VIDEO_WRAPPER_BEGIN_ERROR:"VIDEO_WRAPPER_BEGIN_ERROR",JS_VPAID_BEGIN_ERROR:"JS_VPAID_BEGIN_ERROR",GET_JS_VPAID_AD_ERROR:"GET_JS_VPAID_AD_ERROR",CREATE_VIDEO_SLOT_ERROR:"CREATE_VIDEO_SLOT_ERROR",GET_VOLUME_ERROR:"GET_VOLUME_ERROR",ADD_CLICK_LISTENER:"ADD_CLICK_LISTENER",FOUND_SOURCE_ERROR:"FOUND_SOURCE_ERROR",ADD_EVENT_LISTENERS_ERROR:"ADD_EVENT_LISTENERS_ERROR",RESPONSE_XML_NULL:"RESPONSE_XML_NULL",DOM_PARSER_PARSE_FAILURE:"RESPONSE_PARSE_FAILURE",JS_VPAID_EMBED_FAIL:"JS_VPAID_EMBED_FAIL",AD_BRIDGE_CREATE_ERROR:"AD_BRIDGE_CREATE_ERROR",JS_VPAID_BRIDGE_LOAD_ERROR:"JS_VPAID_BRIDGE_LOAD_ERROR",JS_VPAID_BRIDGE_SUBSCRIBE_FAIL:"JS_VPAID_BRIDGE_SUBSCRIBE_FAIL",CREATE_VIDEO_SLOT_LOGIC_ERROR:"CREATE_VIDEO_SLOT_LOGIC_ERROR",VAST_IMPRESSION_PIXELS_ERROR:"VAST_IMPRESSION_PIXELS_ERROR",VAST_ERROR_PIXELS_ERROR:"VAST_ERROR_PIXELS_ERROR",VAST_IS_LINEAR_XML_ERROR:"VAST_IS_LINEAR_XML_ERROR",VAST_IS_WRAPPER_XML_ERROR:"VAST_IS_WRAPPER_XML_ERROR",VAST_NOAD_XML_ERROR:"VAST_NOAD_XML_ERROR",VAST_ERROR_ORTB_DETAIL:"VAST_ERROR_ORTB_DETAIL",VAST_ERROR_EXTENSIONS:"VAST_ERROR_EXTENSIONS",FIND_VIDEO_AD_EXCEPTION:"FIND_VIDEO_AD_EXCEPTION",CREATE_VIDEO_ELEMENT_EXCEPTION:"CREATE_VIDEO_ELEMENT_EXCEPTION",CAN_PLAY_VIDEO_EXCEPTION:"CAN_PLAY_VIDEO_EXCEPTION",JS_DEMAND_RESPONSE_EXCEPTION:"JS_DEMAND_RESPONSE_EXCEPTION",VAST_ONLOAD_EXCEPTION:"VAST_ONLOAD_EXCEPTION",EXTEND_VAST_EXCEPTION:"EXTEND_VAST_EXCEPTION",VAST_GET_LINEAR_WRAPPER_XML_ERROR:"VAST_GET_LINEAR_WRAPPER_XML_ERROR",INIT_AD_STATE_INFO_ERROR:"INIT_AD_STATE_INFO_ERROR",INIT_AD_TD_MISMATCH_ERROR:"INIT_AD_TD_MISMATCH_ERROR",INIT_AD_TS_MISMATCH_ERROR:"INIT_AD_TS_MISMATCH_ERROR",INIT_AD_GET_NEW_AD_PARAMETERS_ERROR:"INIT_AD_GET_NEW_AD_PARAMETERS_ERROR",PRE_INIT_STATE_INFO_FAIL:"PRE_INIT_STATE_INFO_FAIL",PRE_INIT_TD_MISMATCH_FAIL:"PRE_INIT_TD_MISMATCH_FAIL",PRE_INIT_TS_MISMATCH_FAIL:"PRE_INIT_TS_MISMATCH_FAIL",PRE_INIT_MISSED_OPPORTUNITY_FAIL:"PRE_INIT_MISSED_OPPORTUNITY_FAIL",DO_GET_VAST_RESPONSE_START_RESPONSE_FAIL:"DO_GET_VAST_RESPONSE_START_RESPONSE_FAIL",AD_VAST_GET_TIMEOUT_INFO_FAIL:"AD_VAST_GET_TIMEOUT_INFO_FAIL",AD_VAST_GET_OPTIONS_FAIL:"AD_VAST_GET_OPTIONS_FAIL",AD_VAST_GET_CALL_CHAIN_VARS_FAIL:"AD_VAST_GET_CALL_CHAIN_VARS_FAIL",AD_VAST_SEND_AD_REQUEST_FAIL:"AD_VAST_SEND_AD_REQUEST_FAIL",AD_VAST_GV_FAIL:"AD_VAST_GV_FAIL",SSC_NO_XHR:"SSC_NO_XHR",SSC_TIMEOUT:"SSC_TIMEOUT",SSC_BAD_XHR_STATUS:"SSC_BAD_XHR_STATUS",SSC_JSON_PARSE_ERROR:"SSC_JSON_PARSE_ERROR",SSC_RESULT_ERROR:"SSC_RESULT_ERROR",SSC_XHR_ERROR:"SSC_XHR_ERROR",SSC_UNKNOWN_ERROR:"SSC_UNKNOWN_ERROR",SSC_UNKNOWN_ERROR_2:"SSC_UNKNOWN_ERROR_2",SSC_MAKE_DEMAND_REQUEST_ERROR:"SSC_MAKE_DEMAND_REQUEST_ERROR",SSC_MAKE_DEMAND_REQUEST_ERROR_2:"SSC_MAKE_DEMAND_REQUEST_ERROR_2",SSC_JS_VPAID_BR_ERROR:"SSC_JS_VPAID_BR_ERROR",SSC_JS_VPAID_BR_ERROR_2:"SSC_JS_VPAID_BR_ERROR_2",SSC_CALL_LOG_EVENT_ERROR:"SSC_CALL_LOG_EVENT_ERROR",NOT_JS_DEMAND_RESPONSE:"NOT_JS_DEMAND_RESPONSE",ALREADY_SENT_DEMAND_RESPONSE:"ALREADY_SENT_DEMAND_RESPONSE",NEED_SSC_RESULT_IN_AD_CONTAINER:"NEED_SSC_RESULT_IN_AD_CONTAINER",JS_VPAID_BRIDGE_BEGIN_ERROR:"JS_VPAID_BRIDGE_BEGIN_ERROR",JS_BRIDGE_MANAGER_CREATE_ERROR:"JS_BRIDGE_MANAGER_CREATE_ERROR",BROADCAST_TIMEOUT:"BROADCAST_TIMEOUT",MAX_BROADCAST_TIMEOUT:"MAX_BROADCAST_TIMEOUT",ADS_MANAGER_LOAD_ERROR:"ADS_MANAGER_LOAD_ERROR",IMA_ADS_LOADER_EXCEPTION:"IMA_ADS_LOADER_EXCEPTION",IMA_ADS_LOADER_ERROR:"IMA_ADS_LOADER_ERROR",IMA_ADS_ERROR:"IMA_ADS_ERROR",IMA_INIT_AD_ERROR:"IMA_INIT_AD_ERROR",IMA_ADS_MANAGER_INIT_ERROR:"IMA_ADS_MANAGER_INIT_ERROR",IMA_MANAGER_CREATE_ERROR:"IMA_MANAGER_CREATE_ERROR",PROCESSOR_SUPPLY_ERROR:"PROCESSOR_SUPPLY_ERROR",AD_CONTROLLER_ERROR:"AD_CONTROLLER_ERROR",INIT_AD_ERROR_EXCEPTION:"INIT_AD_ERROR_EXCEPTION",INIT_AD_EMPTY_ERROR:"INIT_AD_EMPTY_ERROR",INIT_AD_NULL_ERROR:"INIT_AD_NULL_ERROR",RECEIVED_NULL_STRING:"RECEIVED_NULL_STRING",APPNEXUS_TIMEOUT:"APPNEXUS_TIMEOUT",OPENX_TIMEOUT:"OPENX_TIMEOUT",TELARIA_TIMEOUT:"TELARIA_TIMEOUT",RUBICON_TIMEOUT:"RUBICON_TIMEOUT",IMA_AD_CONTAINER_TIMEOUT:"IMA_AD_CONTAINER_TIMEOUT",AD_PIXEL_ERROR:"AD_PIXEL_ERROR",UNLOAD_DETECTION_INIT_ERROR:"UNLOAD_DETECTION_INIT_ERROR"},n.VPAID_EVENTS={AdStarted:"AdStarted",AdStopped:"AdStopped",AdSkipped:"AdSkipped",AdLoaded:"AdLoaded",AdLinearChange:"AdLinearChange",AdSizeChange:"AdSizeChange",AdExpandedChange:"AdExpandedChange",AdSkippableStateChange:"AdSkippableStateChange",AdDurationChange:"AdDurationChange",AdRemainingTimeChange:"AdRemainingTimeChange",AdVolumeChange:"AdVolumeChange",AdImpression:"AdImpression",AdClickThru:"AdClickThru",AdInteraction:"AdInteraction",AdVideoStart:"AdVideoStart",AdVideoFirstQuartile:"AdVideoFirstQuartile",AdVideoMidpoint:"AdVideoMidpoint",AdVideoThirdQuartile:"AdVideoThirdQuartile",AdVideoComplete:"AdVideoComplete",AdUserAcceptInvitation:"AdUserAcceptInvitation",AdUserMinimize:"AdUserMinimize",AdUserClose:"AdUserClose",AdPaused:"AdPaused",AdPlaying:"AdPlaying",AdError:"AdError",AdLog:"AdLog"}),a=(n.MANIFEST_PIXEL_EVENTS={initAd:"initAd"},n.PIXEL_EVENTS={AdStarted:"AdStarted",AdImpression:"AdImpression",AdStopped:"AdStopped",AdSkipped:"AdSkipped",AdLoaded:"AdLoaded",AdError:"AdError",AdVideoStart:"AdVideoStart",AdVideoFirstQuartile:"AdVideoFirstQuartile",AdVideoMidpoint:"AdVideoMidpoint",AdVideoThirdQuartile:"AdVideoThirdQuartile",AdVideoComplete:"AdVideoComplete",AdClickThru:"AdClickThru",AdUserAcceptInvitation:"AdUserAcceptInvitation"},n.VPAID_FINAL_EVENTS={AdError:"AdError",AdStopped:"AdStopped",AdSkipped:"AdSkipped"},n.VPAID_ONCE_EVENTS={AdLoaded:"AdLoaded",AdStarted:"AdStarted",AdImpression:"AdImpression",AdVideoStart:"AdVideoStart",AdVideoFirstQuartile:"AdVideoFirstQuartile",AdVideoMidpoint:"AdVideoMidpoint",AdVideoThirdQuartile:"AdVideoThirdQuartile",AdVideoComplete:"AdVideoComplete"},n.VIDEO_EVENTS={abort:"abort",canplay:"canplay",canplaythrough:"canplaythrough",click:"click",durationchange:"durationchange",emptied:"emptied",ended:"ended",error:"error",loadeddata:"loadeddata",loadedmetadata:"loadedmetadata",loadstart:"loadstart",pause:"pause",play:"play",playing:"playing",progress:"progress",ratechange:"ratechange",suspend:"suspend",seeked:"seeked",seeking:"seeking",timeupdate:"timeupdate",waiting:"waiting"},n.ELEMENT_EVENTS={click:"click"},n.VIDEO_ATTRIBUTES={currentTime:"currentTime",duration:"duration",ended:"ended",paused:"paused",playbackRate:"playbackRate",src:"src",type:"type"},n.VIDEO_ATTRIBUTES_POSTER="poster",n.VPAID_CONSTANTS={NOT_IMPLEMENTED:-1,UNKNOWN:-2});n.VID_IO_PARAMS={instanceId:"instanceId",event:"event",dtidx:"dtidx",dtnum:"dtnum",yh_id:"yh_id",platform:"platform",bv:"bv",cb:"cb",timestamp:"timestamp",id:"id",aid:"aid",d:"d",w:"w",h:"h",cc:"cc",v:"v",ol:"ol",ov:"ov",vastVersion:"vv",uuid:"uuid",vastErrorCode:"vec",auctionCallChain:"a_cc",callChainIndicies:"cc_i",initialStage_notnull:"i_sn",initialStage_w:"i_w",initialStage_h:"i_h",initialStageWidth:"i_sw",initialStageHeight:"i_sh",initialStageDisplayState:"i_sds",initialStateInfoExternalInterface__objectID:"i_E_o",initialStateInfoExternalInterface__available:"i_E_a",initialStateInfoExternalInterface__error__getQualifiedClassName:"i_E_e",initialNo_element:"i_ne",initialOffsetWidth:"i_ow",initialOffsetHeight:"i_oh",initialClientWidth:"i_cw",initialClientHeight:"i_ch",initialScrollWidth:"i_Sw",initialScrollHeight:"i_Sh",initialGetBoundingClientRect__left:"i_bl",initialGetBoundingClientRect__top:"i_bt",initialGetBoundingClientRect__right:"i_br",initialGetBoundingClientRect__bottom:"i_bb",initialVpaidWidth:"vw",initialVpaidHeight:"vh",initialVpaidViewMode:"i_vv",inView:"in_v",loaderInfo__swfVersion:"l_s",loaderInfo__loaderURL:"l_l",loaderInfo__actionScriptVersion:"l_a",ExternalInterface__available:"E_a",ExternalInterface__error__getQualifiedClassName:"E_e",window__top__location__href:"d_wtlh",window__location__href:"d_wlh",window__top__location:"d_wtl",window__location__ancestorOrigins:"d_wla",Security__pageDomain:"d_Sp",document__referrer:"d_dr",ancestorOrigins:"d_ao",parentHostnames:"d_ph",domain_match:"d_m",domain_match_source:"d_ms",overflow_required:"o_r",overflow_optional:"o_o",overflow_exclude:"o_e",environmentInfoError:"e_e",stage_notnull:"s_sn",stage_w:"s_w",stage_h:"s_h",stageWidth:"s_sw",stageHeight:"s_sh",stageDisplayState:"s_sds",stateInfoExternalInterface__objectID:"s_E_o",stateInfoExternalInterface__available:"s_E_a",stateInfoExternalInterface__error__getQualifiedClassName:"s_E_e",no_element:"s_ne",offsetWidth:"s_ow",offsetHeight:"s_oh",clientWidth:"s_cw",clientHeight:"s_ch",scrollWidth:"s_Sw",scrollHeight:"s_Sh",getBoundingClientRect__left:"s_bl",getBoundingClientRect__top:"s_bt",getBoundingClientRect__right:"s_br",getBoundingClientRect__bottom:"s_bb",vpaidWidth:"s_vw",vpaidHeight:"s_vh",vpaidViewMode:"s_vv",detected_size_width:"ds_w",detected_size_height:"ds_h",detected_size_match_source:"ds_ms",idx:"idx",adLoaded:"adl"},n.SSC_TO={UNKNOWN:-1,NOT_CALLED:0,TIMEOUT:1,ERROR:2,NON_ERROR:3,OTHER:4},n.MAX_URL_LENGTH=2e3,n.VAST_ERRORCODES={VAST_ERRORCODE_100:100,VAST_ERRORCODE_101:101,VAST_ERRORCODE_102:102,VAST_ERRORCODE_200:200,VAST_ERRORCODE_201:201,VAST_ERRORCODE_202:202,VAST_ERRORCODE_203:203,VAST_ERRORCODE_300:300,VAST_ERRORCODE_301:301,VAST_ERRORCODE_302:302,VAST_ERRORCODE_303:303,VAST_ERRORCODE_400:400,VAST_ERRORCODE_401:401,VAST_ERRORCODE_402:402,VAST_ERRORCODE_403:403,VAST_ERRORCODE_405:405,VAST_ERRORCODE_500:500,VAST_ERRORCODE_501:501,VAST_ERRORCODE_502:502,VAST_ERRORCODE_503:503,VAST_ERRORCODE_600:600,VAST_ERRORCODE_601:601,VAST_ERRORCODE_602:602,VAST_ERRORCODE_603:603,VAST_ERRORCODE_604:604,VAST_ERRORCODE_900:900,VAST_ERRORCODE_901:901,SS_VAST_ERRORCODE_1501:1501,SS_VAST_ERRORCODE_1502:1502,SS_VAST_ERRORCODE_1503:1503,SS_VAST_ERRORCODE_1504:1504,SS_VAST_ERRORCODE_1505:1505,SS_VAST_ERRORCODE_1506:1506,SS_VAST_ERRORCODE_1507:1507,SS_VAST_ERRORCODE_1508:1508,SS_VAST_ERRORCODE_1509:1509,SS_VAST_ERRORCODE_1510:1510,SS_VAST_ERRORCODE_1511:1511},n.VAST_MACROS={ERRORCODE:"[ERRORCODE]",CACHEBUSTING:"[CACHEBUSTING]"},n.QUARTILE_EVENTS=[{event:r.AdVideoStart,pixel:null,value:0},{event:r.AdVideoFirstQuartile,pixel:i.js_first_quartile,value:25},{event:r.AdVideoMidpoint,pixel:i.js_midpoint,value:50},{event:r.AdVideoThirdQuartile,pixel:i.js_third_quartile,value:75}],n.RETRY_MS=200,n.STOP_AD_TIMEOUT=75,n.VOLUME_EVENTS={AdLoaded:!0,AdStarted:!0,AdVideoStart:!0},n.LOG_EVENTS={SSC_INIT:"SSC_INIT",MOAT_INIT:"MOAT_INIT",IAS_INIT:"IAS_INIT",CREATE_VIDEO_SLOT:"CREATE_VIDEO_SLOT",CREATE_VIDEO_SLOT_LOGIC_ERROR:"CREATE_VIDEO_SLOT_LOGIC_ERROR",CREATE_VAST_VIDEO_SLOT:"CREATE_VAST_VIDEO_SLOT",CREATE_VIDEO_SLOT_ERROR:"CREATE_VIDEO_SLOT_ERROR",BRIDGE_SHOW:"BRIDGE_SHOW",BRIDGE_HIDE:"BRIDGE_HIDE",JS_VPAID_SLOT_CLICK:"JS_VPAID_SLOT_CLICK",VPAID_VIDEO_WRAPPER_SLOT_CLICK:"VPAID_VIDEO_WRAPPER_SLOT_CLICK",FLASH_BRIDGE_SLOT_CLICK:"FLASH_BRIDGE_SLOT_CLICK",JS_VPAID_VIDEO_SLOT_CLICK:"JS_VPAID_VIDEO_SLOT_CLICK",SSC_ENDPOINT:"SSC_ENDPOINT",SSC_VALID_EVENT:"SSC_VALID_EVENT",VAST_FIRE_PIXEL:"VAST_FIRE_PIXEL",VAST_FIRE_PIXEL_ERROR:"VAST_FIRE_PIXEL_ERROR"},n.FLASH_DIV_ID="vdDiv",n.FLASH_OBJECT_ID="vdObj",n.BRIDGE_EVENTS={EMBED_SUCCESS:"EMBED_SUCCESS",EMBED_FAIL:"EMBED_FAIL",SWF_IS_READY:"SWF_IS_READY",SWF_IS_READY_TIMEOUT:"SWF_IS_READY_TIMEOUT"},n.CREATIVE_TYPES={MEDIA:"MEDIA",JS_VPAID:"JS_VPAID",XFLV:"XFLV",FLASH_VPAID:"FLASH_VPAID",IMA:"IMA"},n.VAST_PIXEL_TYPES={VAST_ERROR:"VAST_ERROR",VAST_IMPRESSION:"VAST_IMPRESSION",VAST_CLICKTRACKING:"VAST_CLICKTRACKING",VAST_CREATIVEVIEW:"VAST_CREATIVEVIEW",VAST_START:"VAST_START",VAST_FIRSTQUARTILE:"VAST_FIRSTQUARTILE",VAST_MIDPOINT:"VAST_MIDPOINT",VAST_THIRDQUARTILE:"VAST_THIRDQUARTILE",VAST_COMPLETE:"VAST_COMPLETE",VAST_MUTE:"VAST_MUTE",VAST_UNMUTE:"VAST_UNMUTE",VAST_PAUSE:"VAST_PAUSE",VAST_REWIND:"VAST_REWIND",VAST_RESUME:"VAST_RESUME",VAST_FULLSCREEN:"VAST_FULLSCREEN",VAST_EXITFULLSCREEN:"VAST_EXITFULLSCREEN",VAST_EXPAND:"VAST_EXPAND",VAST_COLLAPSE:"VAST_COLLAPSE",VAST_ACCEPTINVITATIONLINEAR:"VAST_ACCEPTINVITATIONLINEAR",VAST_ACCEPTINVITATION:"VAST_ACCEPTINVITATION",VAST_CLOSELINEAR:"VAST_CLOSELINEAR",VAST_SKIP:"VAST_SKIP",VAST_PROGRESS:"VAST_PROGRESS"},n.JSON_PIXEL_PARAMS={url:"url",w:"w",h:"h",declaredDomain:"decl_d",declaredWidth:"decl_w",declaredHeight:"decl_h",detectedDomain:"det_d",detectedWidth:"det_w",detectedHeight:"det_h",fullUrl:"fullUrl",td:"td",ts:"ts",cb:"cb"},n.IAS_EXTRA_PARAMS={aCc:"a_cc",aId:"advId",country:"country",declaredDomain:"decl_d",declaredWidth:"decl_w",declaredHeight:"decl_h",detectedDomain:"det_d",detectedWidth:"det_w",detectedHeight:"det_h",ssId:"ssid"},n.IAS_EVENTS={AdLoaded:"AdLoaded",AdStarted:"AdStarted",AdStopped:"AdStopped",AdSkipped:"AdSkipped",AdSkippableStateChange:"AdSkippableStateChange",AdDurationChange:"AdDurationChange",AdVolumeChange:"AdVolumeChange",AdImpression:"AdImpression",AdVideoStart:"AdVideoStart",AdVideoFirstQuartile:"AdVideoFirstQuartile",AdVideoMidpoint:"AdVideoMidpoint",AdVideoThirdQuartile:"AdVideoThirdQuartile",AdVideoComplete:"AdVideoComplete",AdClickThru:"AdClickThru",AdPaused:"AdPaused",AdPlaying:"AdPlaying",AdError:"AdError"};n.ORTB_DETAIL="ortb-detail",n.CALL_CHAIN_IDENTIFIERS={SUPPLY:"s",DEMAND:"d",ACCOUNT:"a",MOAT_USED:"mt"},n.CALL_CHAIN_IDENTIFIER_BLACKLIST={sf:!0,a:!0},n.SIZE={XS:0,S:250,M:350,L:500,XL:800,UNKNOWN:-1},n.POSTER_SIZES={"16:9":[{width:426,height:240,filename:"426x240"},{width:640,height:360,filename:"640x360"},{width:720,height:480,filename:"720x480"},{width:1280,height:720,filename:"1280x720"},{width:1920,height:1080,filename:"1920x1080"}],"4:3":[{width:176,height:144,filename:"176x144"},{width:320,height:240,filename:"320x240"},{width:480,height:360,filename:"480x360"},{width:640,height:480,filename:"640x480"},{width:1280,height:960,filename:"1280x960"}]},n.CALL_CHAIN_LINK_SEPARATOR="_",n.CALL_CHAIN_VARIABLE_SEPARATOR="-",n.CALL_CHAIN_VARIABLE_ID_SEPARATOR=".",n.SLOT_STATES={DEMAND_TAG_READY:"DEMAND_TAG_READY",REQUESTING_VAST:"REQUESTING_VAST",NO_VAST:"NO_VAST",VAST_READY:"VAST_READY",REQUESTING_VPAID:"REQUESTING_VPAID",VPAID_FAILED:"VPAID_FAILED"};var o=n.SLOT_EVENTS={VastDone:"VastDone"},s=(n.BROADCAST_STATES={INIT:"INIT",REQUESTING:"REQUESTING",DONE:"DONE"},n.BROADCAST_EVENTS={VastReady:"VastReady",Done:"Done",VastRequestTimerTimeout:"VastRequestTimerTimeout"});n.EVENT_TYPES={_:i,Slot:o,Broadcast:s},n.TRUST_BUT_VERIFY_MACROS={DETECTED_DOMAIN:"{{DETECTED_DOMAIN}}",DETECTED_URL:"{{DETECTED_URL}}",DETECTED_ENCODED_URL:"{{DETECTED_ENCODED_URL}}",DETECTED_DOUBLE_ENCODED_URL:"{{DETECTED_DOUBLE_ENCODED_URL}}",DETECTED_HEIGHT:"{{DETECTED_HEIGHT}}",DETECTED_WIDTH:"{{DETECTED_WIDTH}}",DETECTED_IN_VIEW:"{{IS_INVIEW}}",DETECTED_IS_VISIBLE:"{{IS_VISIBLE}}"},n.HB_BID_PRICE_MACRO="{{BID_PRICE}}",n.VIEWABILITY={UNKNOWN:-1,NOT_VIEWABLE:0,VIEWABLE:1},n.DEMAND_PARTNER_MACROS={D_WIDTH:"{{D_WIDTH}}",D_HEIGHT:"{{D_HEIGHT}}"},n.NO_TIMER=0,n.POST_IMP_PROVIDER_ID_IAS="i",n.POST_IMP_PROVIDER_ID_MOAT="m",n.POST_IMP_PROVIDER_ID_WHITEOPS="w",n.IMA_MANAGER_STATES={INIT:"INIT",REQUEST_SCRIPT:"REQUEST_SCRIPT",SCRIPT_LOADED:"SCRIPT_LOADED",LOADED:"LOADED",LOAD_ERROR:"LOAD_ERROR"},n.IMA_MANAGER_EVENT_TYPES={LOADED:"LOADED",LOAD_ERROR:"LOAD_ERROR"},n.IMA_NONLINEAR_SLOT_HEIGHT=150,n.BID_PLATFORMS={rubicon:"rubicon",spotx:"spotx",stickyads:"stickyads",telaria:"telaria",appnexus:"appnexus",openx:"openx",ima:"ima"},n.PIXEL_FORMATS={js:"js",image:"image"},n.DOUBLECLICK_URLS=["//googleads.g.doubleclick.net","//pubads.g.doubleclick.net"],n.HTML5_PIXEL_EVENTS={cached:"cached",error:"error",abort:"abort",load:"load"},n.AD_PIXEL_EVENTS={DONE:"DONE"},n.WINDOW_EVENTS={unload:"unload"},n.DOMAIN_MATCH_SOURCES={WINDOW_LOCATION_ANCESTORORIGINS:"d_wla",WINDOW_TOP_LOCATION:"d_wtl",WINDOW_LOCATION:"d_wl",TOP_PARENT:"d_p",DOCUMENT_REFERRER:"d_r"},n.PARENT_WIN="win",n.UNLOAD_DETECTION_INIT_EXCEPTION_IDX=-1,n.VAST_VERSION={UNKNOWN:"-1.0","1.0":"1.0","2.0":"2.0","3.0":"3.0","4.0":"4.0"},n.DO_NOT_USE_WITHCREDS=["//ads.nexage.com"]},{}],235:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var r=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._mutexEvents=e,this._onceEvents=n,this._finalEvent=null,this._sentOnceEvent={}}return i(t,[{key:"sendEventType",value:function(t){var e=void 0;return this.isMutexEvent(t)?!this.sentFinalEvent&&(this._finalEvent=t,!0):!this.isOnceEvent(t)||(e=this.sentOnceEvent(t),this._sentOnceEvent[t]=!0,!e)}},{key:"sentOnceEvent",value:function(t){return this._sentOnceEvent.hasOwnProperty(t)&&this._sentOnceEvent[t]}},{key:"isMutexEvent",value:function(t){return this._mutexEvents.hasOwnProperty(t)}},{key:"isOnceEvent",value:function(t){return this._onceEvents.hasOwnProperty(t)}},{key:"sentFinalEvent",get:function(){return null!==this._finalEvent}},{key:"finalEvent",get:function(){return this._finalEvent}}]),t}();n.default=r},{}],236:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=u(t("lodash/remove")),a=u(t("./ss_utils/async_js_loader")),o=_(t("./constants")),s=_(t("./utils"));function _(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function u(t){return t&&t.__esModule?t:{default:t}}var l=function(){function t(e,n,i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._uuid=e,this._pageProtocol=n,this._videoElementManager=i,this._environmentVars=r,this._state=o.IMA_MANAGER_STATES.INIT,this._adDisplayContainer=null,this._adsLoader=null,this._imaManagerEventListeners={},this._contentComplete=!1}return i(t,[{key:"loadIma",value:function(t){var e=this;this._state=o.IMA_MANAGER_STATES.REQUEST_SCRIPT,(0,a.default)(this._pageProtocol+this.imaUrl,function(){e._state=o.IMA_MANAGER_STATES.SCRIPT_LOADED,t()},!0)}},{key:"setUpIMA",value:function(){try{s.maybeCreateVideoSlot(this._environmentVars,this._videoElementManager)}catch(t){return this._state=o.IMA_MANAGER_STATES.LOAD_ERROR,void this.callImaManagerEvent(o.IMA_MANAGER_EVENT_TYPES.LOAD_ERROR)}this._adDisplayContainer=new google.ima.AdDisplayContainer(this._environmentVars.slot,this._environmentVars.videoSlot),this._environmentVars.videoSlotCanAutoPlay,this._adDisplayContainer.initialize(),this._adsLoader=new google.ima.AdsLoader(this._adDisplayContainer),this._adsLoader.getSettings().setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.INSECURE),this._state=o.IMA_MANAGER_STATES.LOADED,this.callImaManagerEvent(o.IMA_MANAGER_EVENT_TYPES.LOADED)}},{key:"doContentComplete",value:function(){this._adsLoader&&!this._contentComplete&&(this._adsLoader.contentComplete(),this._contentComplete=!0)}},{key:"loadAndStartIma",value:function(){this.loadIma(this.setUpIMA.bind(this))}},{key:"callImaManagerEvent",value:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];if(this._imaManagerEventListeners.hasOwnProperty(t))for(var r=0;r<this._imaManagerEventListeners[t].length;r++)this._imaManagerEventListeners[t][r].apply(this._imaManagerEventListeners[t][r],n)}},{key:"subscribeImaManagerEvent",value:function(t,e,n){this._imaManagerEventListeners.hasOwnProperty(e)||(this._imaManagerEventListeners[e]=[]),this._imaManagerEventListeners[e].push(t.bind(n))}},{key:"unsubscribeImaManagerEvent",value:function(t,e){this._imaManagerEventListeners.hasOwnProperty(t)&&(0,r.default)(this._imaManagerEventListeners[t],function(t){return t===e})}},{key:"imaUrl",get:function(){return"//imasdk.googleapis.com/js/sdkloader/ima3.js"}},{key:"contentComplete",get:function(){return this._contentComplete},set:function(t){this._contentComplete=t}},{key:"adsLoader",get:function(){return this._adsLoader}},{key:"state",get:function(){return this._state}}]),t}();n.default=l},{"./constants":234,"./ss_utils/async_js_loader":240,"./utils":245,"lodash/remove":187}],237:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.initMoatTracking=function(t,e,n,i,r){return function(t,e,n,i,r){var a=document.createElement("script"),o=[];e={adData:{ids:e,duration:n,url:r},dispatchEvent:function(t){this.sendEvent?(o&&(o.push(t),t=o,o=!1),this.sendEvent(t)):o.push(t)}},n="_moatApi"+Math.floor(1e8*Math.random());var s=void 0,_=void 0;try{s=t.ownerDocument,_=s.defaultView||s.parentWindow}catch(t){s=document,_=window}return _[n]=e,a.type="text/javascript",t&&t.insertBefore(a,t.childNodes[0]||null),a.src="https://z.moatads.com/"+i+"/moatvideo.js#"+n,e}(t,e,n,i,r)}},{}],238:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.shouldFireLink=s,n.shouldFire=function(t,e,n){for(var i=e.callChain.callChainLinks,r=0;r<i.length;r++){var a=i[r];if(s(t,a,n))return!0}return!1},n.addMoatToCallChain=function(t,e){for(var n=e.callChain.callChainLinks,i=[],r=0;r<n.length;r++){var a=n[r];s(t,a,o.POST_IMP_PROVIDER_ID_MOAT)?i.push(a.toMoatUsedString()):i.push(a.toString())}return i.join(o.CALL_CHAIN_LINK_SEPARATOR)};var i,r=t("lodash/indexOf"),a=(i=r)&&i.__esModule?i:{default:i},o=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(t("./constants"));function s(t,e,n){var i=t.pimps,r=(i.s||{})[n]||[],o=(i.d||{})[n]||[],s=e.supplyTagId,_=e.demandTagId;return(0,a.default)(r,s)>-1||(0,a.default)(o,_)>-1}},{"./constants":234,"lodash/indexOf":158}],239:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};n.ajax=function(t,e,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};try{var u=void 0,l=!1,c=o.method||(r?"POST":"GET"),d="object"===(void 0===n?"undefined":i(n))?n:{success:function(){console.log("xhr success")},error:function(t){console.log("xhr error",null,t)}};if("function"==typeof n&&(d.success=n),window.XMLHttpRequest?void 0===(u=new window.XMLHttpRequest).responseType&&(l=!0):l=!0,l?((u=new window.XDomainRequest).onload=function(){d.success(u.responseText,u)},u.onerror=function(){d.error("error",u)},u.ontimeout=function(){d.error("timeout",u)},u.onprogress=function(){console.log("xhr onprogress")}):u.onreadystatechange=function(){if(u.readyState===_){var t=u.status;t>=200&&t<300||304===t?d.success(u.responseText,u):d.error(u.statusText,u)}},"GET"===c&&r){var h=(0,a.parse)(t,o);Object.assign(h.search,r),t=(0,a.format)(h)}u.open(c,t),u.timeout=e.timeout,l||(o.withCredentials&&(u.withCredentials=!0),(0,s.default)(o.customHeaders,function(t,e){u.setRequestHeader(e,t)}),o.preflight&&u.setRequestHeader("X-Requested-With","XMLHttpRequest"),u.setRequestHeader("Content-Type",o.contentType||"text/plain")),u.send("POST"===c&&r)}catch(t){console.log("xhr construction",t)}};var r,a=t("./url"),o=t("lodash/forEach"),s=(r=o)&&r.__esModule?r:{default:r};var _=4},{"./url":241,"lodash/forEach":153}],240:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,e,n){if(!t)return;n?i[t]?e&&"function"==typeof e&&(i[t].loaded?e():i[t].callbacks.push(e)):(i[t]={loaded:!1,callbacks:[]},e&&"function"==typeof e&&i[t].callbacks.push(e),r(t,function(){i[t].loaded=!0;try{for(var e=0;e<i[t].callbacks.length;e++)i[t].callbacks[e]()}catch(t){}})):r(t,e)};var i={};function r(t,e){var n=document.createElement("script");n.type="text/javascript",n.async=!0,e&&"function"==typeof e&&(n.readyState?n.onreadystatechange=function(){"loaded"!==n.readyState&&"complete"!==n.readyState||(n.onreadystatechange=null,e())}:n.onload=function(){e()}),n.src=t;var i=document.getElementsByTagName("head");(i=i.length?i:document.getElementsByTagName("body")).length&&(i=i[0]).insertBefore(n,i.firstChild)}},{}],241:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){r=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw a}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function r(t){return t?t.replace(/^\?/,"").split("&").reduce(function(t,e){var n=e.split("="),r=i(n,2),a=r[0],o=r[1];return/\[\]$/.test(a)?(t[a=a.replace("[]","")]=t[a]||[],t[a].push(o)):t[a]=o||"",t},{}):{}}function a(t){return Object.keys(t).map(function(e){return Array.isArray(t[e])?t[e].map(function(t){return e+"[]="+t}).join("&"):e+"="+t[e]}).join("&")}n.parseQS=r,n.formatQS=a,n.parse=function(t,e){var n=document.createElement("a");e&&"noDecodeWholeURL"in e&&e.noDecodeWholeURL?n.href=t:n.href=decodeURIComponent(t);return{protocol:(n.protocol||"").replace(/:$/,""),hostname:n.hostname,port:+n.port,pathname:n.pathname.replace(/^(?!\/)/,"/"),search:r(n.search||""),hash:(n.hash||"").replace(/^#/,""),host:n.host||window.location.host}},n.format=function(t){return(t.protocol||"http")+"://"+(t.host||t.hostname+(t.port?":"+t.port:""))+(t.pathname||"")+(t.search?"?"+a(t.search||""):"")+(t.hash?"#"+t.hash:"")},n.resolve=function(t,e){var n=document.getElementsByTagName("base")[0],i=n&&n.href,r=document.head||document.getElementsByTagName("head")[0]||document.body||document.getElementsByTagName("body")[0],a=n||r.appendChild(document.createElement("base")),o=document.createElement("a");a.href=t,o.href=e;var s=o.href;n?n.href=i:r.removeChild(a);return s}},{}],242:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getDatas=l,n.load=function(t,e,n,i,r,o,_){for(var u=l(e,n,i,r,o),c=0;c<u.length;c++)a.addScript(t,a.makeUrl(_,s.default.url,u[c]));return u};var i,r=u(t("./constants")),a=u(t("./utils")),o=t("../../../configs/vendor/ssc.json"),s=(i=o)&&i.__esModule?i:{default:i},_=u(t("./post_imp_detection"));function u(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function l(t,e,n,i,a){for(var o,u,l,c,d,h,f=[],p=e.callChain.callChainLinks,E=0;E<p.length;E++){var A=p[E];if(_.shouldFireLink(t,A,r.POST_IMP_PROVIDER_ID_WHITEOPS)){var v=void 0;v=0===E?t.aid:A.getFirstOtherTagId(r.CALL_CHAIN_IDENTIFIERS.ACCOUNT),f.push((o=t,l=n,c=i,d=a,h=void 0,h={ai:v,si:(u=A).supplyTagId,sr:u.demandTagId,dm:l+"x"+c,di:o.domain,c1:d,ui:o.ssid,r1:u.toString(),ti:o.uuid,gt:o.country,dt:s.default.dt},o.hasOwnProperty("pimps")&&(o.pimps.hasOwnProperty("w_pv")&&""!==o.pimps.w_pv&&(h.pv=o.pimps.w_pv),o.pimps.hasOwnProperty("w_to")&&o.pimps.w_to>r.SSC_TO.UNKNOWN&&(h.to=o.pimps.w_to)),h))}}return f}},{"../../../configs/vendor/ssc.json":5,"./constants":234,"./post_imp_detection":238,"./utils":245}],243:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getStateInfo=void 0;var i,r=t("lodash/isElement"),a=(i=r)&&i.__esModule?i:{default:i};n.getStateInfo=function(t,e,n){var i=t.width,r=t.height,o=t.environmentVars.videoSlot;(0,a.default)(o)||(o=t.environmentVars.slot);var s={no_element:null,offsetWidth:null,offsetHeight:null,clientWidth:null,clientHeight:null,detectedHeight:null,detectedWidth:null,detectedSizeSource:null,scrollWidth:null,scrollHeight:null,getBoundingClientRect__left:null,getBoundingClientRect__top:null,getBoundingClientRect__right:null,getBoundingClientRect__bottom:null,other:{}};try{window.jwplayer&&(s.other.jwplayer_version=window.jwplayer.version),window.vidible&&(s.other.vidible_version=window.vidible.version()),window.videojs&&(s.other.videojs_version=videojs.VERSION),window.google&&window.google.ima&&(s.other.google_ima_version=window.google.ima.VERSION)}catch(t){}try{if(s.no_element=null===o,!s.no_element&&(0,a.default)(o)){s.offsetWidth=o.offsetWidth,s.offsetHeight=o.offsetHeight,s.clientWidth=o.clientWidth,s.clientHeight=o.clientHeight,s.scrollWidth=o.scrollWidth,s.scrollHeight=o.scrollHeight;var _=o.getBoundingClientRect();null!==_&&(s.getBoundingClientRect__left=_.left,s.getBoundingClientRect__top=_.top,s.getBoundingClientRect__right=_.right,s.getBoundingClientRect__bottom=_.bottom)}else s.clientWidth=i||e,s.clientHeight=r||n;isNaN(parseFloat(s.clientWidth))?s.detectedWidth=i:s.detectedWidth=parseFloat(s.clientWidth),isNaN(parseFloat(s.clientHeight))?s.detectedHeight=r:s.detectedHeight=parseFloat(s.clientHeight),s.detectedSizeSource=isNaN(parseFloat(s.clientHeight))?"vpaid":"client"}catch(t){}return s}},{"lodash/isElement":164}],244:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=u(t("lodash/forEach")),a=u(t("./ad_pixel")),o=_(t("./constants")),s=_(t("./utils"));function _(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function u(t){return t&&t.__esModule?t:{default:t}}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var c=function(){function t(e,n,i,r,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._cabinet=e,this._initParams=n,this._fsmVpaidEvent=i,this._sendBeacon=r,this._adPixel=a,this._unloadFunctions={}}return i(t,[{key:"registerUnloads",value:function(){var t=this;(0,r.default)(this._cabinet.locationInfo.parents.slice(0,1),function(e,n){e.hasOwnProperty(o.PARENT_WIN)&&t.registerUnload(e[o.PARENT_WIN],n)})}},{key:"_makePixel",value:function(t){var e;return a.default.makeVidIoPixel(this._cabinet,this._initParams,o.VID_IO_EVENTS.js_unload,null,(l(e={},o.VID_IO_PARAMS.idx,t),l(e,o.VID_IO_PARAMS.adLoaded,this._fsmVpaidEvent.sentOnceEvent(o.VPAID_EVENTS.AdLoaded)?1:0),e))}},{key:"registerUnload",value:function(t,e){var n=this;try{if(t&&"function"==typeof t.addEventListener){var i,r=function(){if(!n._fsmVpaidEvent.sentOnceEvent(o.VPAID_EVENTS.AdImpression)&&!n._fsmVpaidEvent.finalEvent){var i=n._makePixel(e);n._sendBeacon?n._sendBeacon(i):t.navigator&&t.navigator.sendBeacon?t.navigator.sendBeacon(i,null):s.addImage(t.document,i,function(){},function(){})}};t.addEventListener(o.WINDOW_EVENTS.unload,r,!1),this._unloadFunctions[e]=(l(i={},o.PARENT_WIN,t),l(i,"fn",r),i)}}catch(t){var a=this._makePixel(-(e+1));this._sendBeacon?this._sendBeacon(a):this._adPixel.addImage(a)}}},{key:"unregisterUnload",value:function(t){var e=this._unloadFunctions[t];e&&(e.win&&"function"==typeof e.win.removeEventListener&&e.win.removeEventListener(o.WINDOW_EVENTS.unload,e.fn,!1),delete this._unloadFunctions[t])}}]),t}();n.default=c},{"./ad_pixel":217,"./constants":234,"./utils":245,"lodash/forEach":153}],245:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.INSECURE_PROTOCOL=n.SECURE_PROTOCOL=void 0,n.getCb=function(){return Math.floor(1e7*Math.random())},n.getProtocol=c,n.stringStartsWith=d,n.promoteProtocol=function(t,e){if(!t)throw new Error(s.PROMOTE_PROTOCOL_NO_URL);return e===u&&d(t,l)?e+t.substr(l.length):t},n.getPageProtocol=function(){var t=null,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;for(;e&&e!==e.parent;)try{if((t=e.location.protocol)&&(t===u||t===l))return t;e=e.parent}catch(n){try{if(e.document.referrer&&e.document.referrer.length>0){t=e.document.referrer.match(/^(https?:)\/\//)[1];break}}catch(t){break}}if(null===t)return l;if(t!==u&&t!==l)return u;return t},n.makeUrl=h,n.getScriptLocation=f,n.addImage=p,n.addScript=E,n.firePixels=function(t,e){if((0,i.default)(e))for(var n=0;n<e.length;n++){var r=e[n];(0,a.default)(r)?p(t,r,function(){},function(){}):r.format===s.PIXEL_FORMATS.image?p(t,r.url,function(){},function(){}):r.format===s.PIXEL_FORMATS.js&&E(t,r.url)}},n.checkVPAIDInterface=function(t){return t.handshakeVersion&&"function"==typeof t.handshakeVersion&&t.initAd&&"function"==typeof t.initAd&&t.startAd&&"function"==typeof t.startAd&&t.stopAd&&"function"==typeof t.stopAd&&t.skipAd&&"function"==typeof t.skipAd&&t.resizeAd&&"function"==typeof t.resizeAd&&t.pauseAd&&"function"==typeof t.pauseAd&&t.resumeAd&&"function"==typeof t.resumeAd&&t.expandAd&&"function"==typeof t.expandAd&&t.collapseAd&&"function"==typeof t.collapseAd&&t.subscribe&&"function"==typeof t.subscribe&&t.unsubscribe&&"function"==typeof t.unsubscribe&&t.getAdVolume&&"function"==typeof t.getAdVolume&&t.getAdExpanded&&"function"==typeof t.getAdExpanded&&t.getAdCompanions&&"function"==typeof t.getAdCompanions&&t.getAdDuration&&"function"==typeof t.getAdDuration&&t.getAdHeight&&"function"==typeof t.getAdHeight&&t.getAdIcons&&"function"==typeof t.getAdIcons&&t.getAdLinear&&"function"==typeof t.getAdLinear&&t.getAdRemainingTime&&"function"==typeof t.getAdRemainingTime&&t.getAdSkippableState&&"function"==typeof t.getAdSkippableState&&t.getAdWidth&&"function"==typeof t.getAdWidth},n.getRequestMethod=function(t,e){var n=new XMLHttpRequest,i=!1;if("withCredentials"in n)n.open("GET",t,!0),e&&(n.withCredentials=!0,i=!0);else{if("undefined"==typeof XDomainRequest)return null;(n=new XDomainRequest).open("GET",t)}return{xhr:n,withCredentials:i}},n.canPlayVideo=function(t,e){return t.canPlayType&&""!==t.canPlayType(e).replace(/no/,"")||!t.canPlayType},n.getTruncatedString=A,n.getDigest=function(t){return A(t,s.DIGEST_LENGTH)},n.getDocumentAndWindow=function(t){var e=void 0,n=void 0;try{e=t.ownerDocument,n=e.defaultView||e.parentWindow}catch(t){e=document,n=window}null!==e&&null!==n||(e=document,n=window);return{document:e,window:n}},n.printError=function(t){return t.fileName+":"+t.lineNumber+" "+t.message},n.getSize=v,n.sizeMatch=function(t,e){return v(t.width)===v(e.detectedWidth)},n.isOrtbDemandTag=function(t){return t.hasOwnProperty("ortb")&&1===t.ortb},n.getORtbElement=function(t,e,n){try{var i=t.getElementsByTagName(e)[0].textContent.trim();try{return n(i)}catch(t){return i}}catch(t){return""}},n.getHistoryManager=function(){return{demand_events:{request:{},response:{},opportunity:{},error:{}},blockedRequests:{},supplyTagOpportunities:{}}},n.identityWrapper=function(t){return t},n.forEachType=function(t,e){(0,r.default)(t,function(t,n){(0,r.default)(t,function(t,i){e(t,n,i)})})},n.getClosestAspectRatio=R,n.getPosterFilename=function(t,e){for(var n=s.POSTER_SIZES[R(t,e)],i=0;i<n.length;i++){var r=n[i];if(t<=r.width)return r.filename}return n[n.length-1].filename},n.getPoster=function(t,e,n){return h(c(t),e+n+".jpg",null)},n.cleanDomain=O,n.domainMatch=function(t,e){return O(t.domain)===O(e.domain_match)},n.cssreset=function(t){t.style.margin=0,t.style.padding=0,t.style.border=0,t.style.outline=0,t.style["font-size"]="100%",t.style["vertical-align"]="baseline",t.style.background="transparent"},n.maybeCreateVideoSlot=function(t,e){t.hasOwnProperty("videoSlot")&&null!==t.videoSlot||(null===e.videoSlot&&e.createVideoSlot(),t.videoSlot=e.videoSlot,t.slot.appendChild(t.videoSlot))},n.isUrlPrefix=S,n.shouldUseWithCreds=function(t){return!S(s.DO_NOT_USE_WITHCREDS,t)};var i=_(t("lodash/isArray")),r=_(t("lodash/forEach")),a=_(t("lodash/isString")),o=_(t("lodash/find")),s=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(t("./constants"));function _(t){return t&&t.__esModule?t:{default:t}}var u=n.SECURE_PROTOCOL="https:",l=n.INSECURE_PROTOCOL="http:";function c(t){return t?u:l}function d(t,e,n){return t.substr(n||0,e.length)===e}function h(t,e,n){var i=t+"//"+e;if(null===n)return i;var r=[];for(var a in n)n.hasOwnProperty(a)&&r.push(a+"="+encodeURIComponent(n[a]));return i+"?"+r.join("&")}function f(t){return null!==t.getElementsByTagName("script")?t.getElementsByTagName("script")[0]:null}function p(t,e,n,i){var r=new Image(1,1);r.addEventListener(s.HTML5_PIXEL_EVENTS.load,n),r.addEventListener(s.HTML5_PIXEL_EVENTS.error,i),r.src=e,t.body.appendChild(r)}function E(t,e){var n=t.createElement("script");n.type="text/javascript",n.async=!0;var i=f(t);i?i.parentNode.insertBefore(n,i):t.head.appendChild(n),n.src=e}function A(t,e){return t&&t.length>e?t.slice(0,e):t}function v(t){return isNaN(t)||t<0?s.SIZE.UNKNOWN:t<s.SIZE.S?s.SIZE.XS:t<s.SIZE.M?s.SIZE.S:t<=s.SIZE.L?s.SIZE.M:t<s.SIZE.XL?s.SIZE.L:s.SIZE.XL}function R(t,e){return 3*t/e>4?"16:9":"4:3"}function O(t){return(0,a.default)(t)&&0===t.indexOf("www.")?t.substr(4):t}function S(t,e){return!!(0,o.default)(t,function(t){return d(e,u+t)||d(e,l+t)})}},{"./constants":234,"lodash/find":150,"lodash/forEach":153,"lodash/isArray":160,"lodash/isString":173}],246:[function(t,e,n){"use strict";function i(t,e){var n=e.getElementsByTagName(t);return n.length>0?n[0]:null}function r(t){var e=t.trim().split(":");if(3!==e.length)return null;var n=e[2].split("."),i=parseInt(n[0]);2===n.length&&(i+=parseFloat("0."+n[1]));var r=60*parseInt(e[1]),a=60*parseInt(e[0])*60;return isNaN(a)||isNaN(r)||isNaN(i)||r>3600||i>60?null:a+r+i}Object.defineProperty(n,"__esModule",{value:!0}),n.getFirstElement=i,n.getTextFromTagName=function(t,e){var n=i(t,e);if(null!==n){var r=n.textContent.trim();if(""!==r)return r}return null},n.parseDuration=r,n.getSkipOffset=function(t,e){var n=t.trim();return"%"===n[n.length-1]?null!==e&&e>0?parseFloat(n)/100*e:null:r(n)}},{}],247:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(t("./constants"));var a=function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._pixelNotifier=e,this._historyManager=n,this._demandTag=i}return i(t,[{key:"send",value:function(t,e,n,i,r){this._pixelNotifier(t,e,n,i,r)}},{key:"internalError",value:function(t,e){this.send(r.VID_IO_EVENTS.cm_js_demand_req_resp,this._demandTag,{cc_i:this._demandTag.callChain.getCallChainIndices(this._historyManager.demand_events.response,!0).join(","),response_time:0,wrapper_count:0,has_ad:!1,timeout:e,reason:t,dtype:r.DEMAND_TYPES.UNKNOWN},null)}},{key:"missedOpportunity",value:function(t,e){this.send(r.VID_IO_EVENTS.js_demand_missed_opportunity,this._demandTag,{cc_i:this._demandTag.callChain.getCallChainIndices(this._historyManager.demand_events.opportunity,!0).join(","),td:t,ts:e},null)}},{key:"fireChain",value:function(t,e){for(var n=e.callChain.getSupplyTagHistory(this._historyManager.supplyTagOpportunities),i=e.callChain.callChainLinks,a=[],o=0;o<n.length;o++){var s=n[o];s>0&&a.push(r.CALL_CHAIN_IDENTIFIERS.SUPPLY+r.CALL_CHAIN_VARIABLE_ID_SEPARATOR+i[s].supplyTagId)}a.length>0&&this.send(r.VID_IO_EVENTS.cm_req_js_opp,null,t,null,a.join(r.CALL_CHAIN_LINK_SEPARATOR))}},{key:"jsDemandResponse",value:function(t,e){this.send(r.VID_IO_EVENTS.cm_js_demand_req_resp,t,e)}},{key:"jsDemandRequest",value:function(t){this.fireChain(t,this._demandTag)}}]),t}();n.default=a},{"./constants":234}],248:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ViewabilityDetection=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();n._set=l,n.init=function(t,e,n){l(new _(t,e));var i=n||function(){u._hasBeenDetected=!0};return u.setViewRightNow(i),u.poll(),u},n.detector=function(){return u};var r,a=t("lodash/isElement"),o=(r=a)&&r.__esModule?r:{default:r};t("oath-viewability/dist/clj");var s=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(t("./constants"));var _=n.ViewabilityDetection=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.slot=e,this.doc=n||document,this._isInView=s.VIEWABILITY.UNKNOWN,this._viewablePercent=-1,this._tabIsInView=!0,this._hasBeenDetected=!1,this.hiddenAttribute=null,this.visibilityChangeEvent=null}return i(t,[{key:"setViewRightNow",value:function(t){var e=this;(0,o.default)(this.slot)&&window.oath.viewability.then(function(n){e._viewablePercent=n.getPercent(e.slot),e._isInView=n.getVisible(e.slot),e._hasBeenDetected=!0,t()}).catch(function(e){t()})}},{key:"poll",value:function(){var t=this;setInterval(function(){t.setViewRightNow(function(){})},1e3)}},{key:"hasBeenDetected",get:function(){return this._hasBeenDetected}},{key:"viewabilityPercent",get:function(){return this._viewablePercent}},{key:"isInView",get:function(){return this._isInView}}]),t}(),u=null;function l(t){u=t}},{"./constants":234,"lodash/isElement":164,"oath-viewability/dist/clj":195}]},{},[215])(215)});