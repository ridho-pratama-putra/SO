!function(t){window.Beachfront&&window.Beachfront.Neptune||function(){function t(){}function e(t,e){return function(){t.apply(e,arguments)}}function n(t,e){for(;3===t._state;)t=t._value;if(0===t._state)return void t._deferreds.push(e);t._handled=!0,d._immediateFn(function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null===n)return void(1===t._state?i:r)(e.promise,t._value);var o;try{o=n(t._value)}catch(t){return void r(e.promise,t)}i(e.promise,o)})}function i(t,n){try{if(n===t)throw new TypeError("A promise cannot be resolved with itself.");if(n&&("object"===(void 0===n?"undefined":bn(n))||"function"==typeof n)){var i=n.then;if(n instanceof d)return t._state=3,t._value=n,void o(t);if("function"==typeof i)return void s(e(i,n),t)}t._state=1,t._value=n,o(t)}catch(e){r(t,e)}}function r(t,e){t._state=2,t._value=e,o(t)}function o(t){2===t._state&&0===t._deferreds.length&&d._immediateFn(function(){t._handled||d._unhandledRejectionFn(t._value)});for(var e=0,i=t._deferreds.length;e<i;e++)n(t,t._deferreds[e]);t._deferreds=null}function a(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function s(t,e){var n=!1;try{t(function(t){n||(n=!0,i(e,t))},function(t){n||(n=!0,r(e,t))})}catch(t){if(n)return;n=!0,r(e,t)}}function d(t){if(!(this instanceof d))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],s(t,this)}function c(){}function u(t){return null===t}function l(t){return void 0!==t}function h(t){return void 0===t}function f(t){return"object"===(void 0===t?"undefined":bn(t))}function p(t){return"function"==typeof t}function m(t){return"number"==typeof t}function v(t){return"string"==typeof t}function A(t){return v(t)&&0!==t.length}function g(t){return/^\d+(\.\d+)?%$/g.test(t)}function _(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function E(t){return"[object Array]"===Object.prototype.toString.call(t)}function y(t){return E(t)?t:[t]}function T(t){return Array.prototype.slice.call(t)}function w(t){return t.charAt(0).toLowerCase()+t.slice(1)}function k(){return Math.round(1e8*Math.random()).toString()}function b(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})}function R(t,e,n){if(t)if(E(t))t.forEach(e,n);else for(var i in t)_(t,i)&&e.call(n,t[i],i,t);return t}function I(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return n.forEach(function(e){for(var n in e)_(e,n)&&(!f(t[n])||u(t[n])||E(t[n])||E(e[n])||!f(e[n])?t[n]=e[n]:t[n]=I({},t[n],e[n]))}),t}function S(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return n.forEach(function(e){Object.keys(Object(e)).forEach(function(n){t[n]=e[n]})}),t}function C(t,e){return-1!==t.indexOf(e)}function D(t,e){t=E(t)?t:[],e=p(e)?e:c;for(var n=0,i=t.length;n<i;n++){var r=t[n];if(e(r,n,t))return r}return null}function M(t){var e=window.getComputedStyle(t);return!e||"none"===e.display}function O(t){var e="none"===t.style.display?"":t.style.display;t.__prev_style_display_=t.__prev_style_display_||e,t.style.display="none"}function L(t){t.style.display="",M(t)&&(t.style.display=t.__prev_style_display_||"initial"),t.__prev_style_display_=void 0}function x(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function P(t,e){if(A(e)){if(t.classList)return t.classList.contains(e);var n=v(t.getAttribute("class"))?t.getAttribute("class").split(/\s+/):[];e=e||"";for(var i=0,r=n.length;i<r;i++)if(n[i]===e)return!0}return!1}function N(t,e){if(A(e)){if(t.classList)return t.classList.add(e);var n=v(t.getAttribute("class"))?t.getAttribute("class").split(/\s+/):[];v(e)&&A(e.replace(/\s+/,""))&&(n.push(e),t.setAttribute("class",n.join(" ")))}}function V(t,e){if(A(e)){if(t.classList)return t.classList.remove(e);var n=v(t.getAttribute("class"))?t.getAttribute("class").split(/\s+/):[],i=[];if(v(e)&&A(e.replace(/\s+/,""))){for(var r=0,o=n.length;r<o;r++)e!==n[r]&&i.push(n[r]);t.setAttribute("class",i.join(" "))}}}function U(t,e,n){return E(t)?void R(t,function(t){return U(t,e,n)}):E(e)?void R(e,function(e){return U(t,e,n)}):void(t.addEventListener&&t.addEventListener(e,n,!1))}function F(t,e,n){return E(t)?void R(t,function(t){return F(t,e,n)}):E(e)?void R(e,function(e){return F(t,e,n)}):void(t.removeEventListener&&t.removeEventListener(e,n,!1))}function q(t,e,n){U(t,e,function i(){n.apply(null,arguments),F(t,e,i)})}function B(t){return"object"===("undefined"==typeof HTMLElement?"undefined":bn(HTMLElement))?t instanceof HTMLElement:t&&"object"===(void 0===t?"undefined":bn(t))&&1===t.nodeType&&"string"==typeof t.nodeName}function W(t){for(var e=t,n=t.ownerDocument.defaultView,i=[];e;)if(e.parentNode)e=e.parentNode,i.push(e);else if(e.nodeType===Node.DOCUMENT_NODE&&n!==n.parent){try{var r=T(n.parent.document.getElementsByTagName("iframe"));e=D(r,function(t){return t.contentWindow===n}),n=n.parent}catch(t){e=null}e&&i.push(e)}else e=null;return i}function j(t){if(t.getBoundingClientRect){var e=t.getBoundingClientRect();return{width:e.width,height:e.height}}return{width:t.offsetWidth,height:t.offsetHeight}}function H(t,e,n,i){function r(n,i){var r=document.createElement("script");r.type="text/javascript",r.async=!0,r.onload=n,r.onerror=i,r.src=t,e.appendChild(r)}return n?r(n,i):new Promise(r)}function z(t){var e=t.href,n=t.css,i=t.id,r=t.doc,o=void 0===r?document:r;if(!(i&&o.getElementById(i)||e&&D(o.styleSheets,function(t){return t.href===e})))if(e){var a=o.createElement("link");a.type="text/css",a.rel="stylesheet",a.href=e,i&&(a.id=i),o.head.appendChild(a)}else if(n){var s=o.createElement("style");s.type="text/css",s.appendChild(o.createTextNode(n)),i&&(s.id=i),o.head.appendChild(s)}}function G(t){return function(){if(p(t)){var e=t;t=null,e.apply(this,arguments)}}}function Q(t){var e={},n=function(n){var i=String(n);return _(e,i)||(e[i]=t.apply(this,arguments)),e[i]};return n.clear=function(){return e={}},n}function X(t){return function(){return!t.apply(this,arguments)}}function Y(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];if(0===e.length)return function(t){return t};if(1===e.length)return e[0];var i=e.length-1;return function(){for(var t=i,n=e[i].apply(this,arguments);t--;)n=e[t].call(this,n);return n}}function $(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(){for(var t=this,n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=i[i.length-1],a=p(o)?G(i.pop()):c,s=0;!function n(i){if(s===e.length)return a.apply(t,[null].concat(i));var r=G(function(e){for(var i=arguments.length,r=Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];return e?a.apply(t,[e].concat(r)):n(r)});i.push(r),e[s++].apply(t,i)}(i)}}function K(){return Qn.connection?Qn.connection.type:""}function J(t,e){return new Promise(function(n){setTimeout(function(){return n(e)},t)})}function Z(){for(var t={reason:null,listeners:[]},e=G(function(e){t.reason=e||new Error("Operation Canceled"),t.listeners.forEach(Jn(t.reason))}),n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];return i.map(function(t){return t.subscribe(e)}),{token:{isCanceled:function(){return Boolean(t.reason)},throwIfCanceled:function(){if(t.reason)throw t.reason},subscribe:function(e){return t.reason?(Jn(t.reason)(e),{unsubscribe:function(){}}):(t.listeners.push(e),{unsubscribe:function(){t.listeners=t.listeners.filter(function(t){return t!==e})}})}},cancel:e}}function tt(t){return document.documentMode&&(Zn.setAttribute("href",t),t=Zn.href),Zn.setAttribute("href",t),{href:Zn.href,protocol:Zn.protocol?Zn.protocol.replace(/:$/,""):"",host:Zn.host,search:Zn.search?Zn.search.replace(/^\?/,""):"",hash:Zn.hash?Zn.hash.replace(/^#/,""):"",hostname:Zn.hostname,port:A(Zn.port)?Zn.port:"80",pathname:"/"===Zn.pathname.charAt(0)?Zn.pathname:"/"+Zn.pathname}}function et(t){return/^(?:[a-z]+:)?\/\//.test(t)}function nt(t){t=String(t).trim().replace(/.*?\?/,"");var e=t.split("&"),n={};return R(e,function(t){if(""!==t){var e=t.split("="),i=In(e,2),r=i[0],o=i[1];n[r]=decodeURIComponent(o)}}),n}function it(t){var e=[];return R(t,function(t,n){l(t)&&e.push(n+"="+encodeURIComponent(t))}),e.join("&")}function rt(t,e){var n=-1!==String(t).indexOf("?"),i=n?"&":"?",r=it(e);return r?t+i+r:t}function ot(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.CACHEBUSTING=e.CACHEBUSTING||k(),R(e,function(e,n){l(e)&&(e=p(e)?e():e,t=String(t).replace(new RegExp("\\["+n+"\\]","gm"),e).replace(new RegExp(n,"gm"),e))}),String(t)}function at(t,e,n){t=y(t),n=G(n);var i=t.filter(function(t){return Boolean(t)}).map(function(t){return ot(t,e)}),r=i.length;return i.map(function(t){var e=new Image(1,1),i=function(){e.onload=e.onerror=null,0==--r&&n()};return e.onload=i,e.onerror=i,e.src=t,e})}function st(t){try{return{window:t.top,location:tt(t.top.location)}}catch(i){var e=t.location.ancestorOrigins,n=dt(t);return e&&e.length&&!ut(e[e.length-1])&&(n.location=tt(e[e.length-1])),ct(n)}}function dt(t){var e=tt(t.location),n=tt(t.document.referrer),i=n.hostname!==e.hostname||n.protocol!==e.protocol;return t===t.parent?{window:t,location:e}:i?{window:t,location:n}:dt(t.parent)}function ct(t){var e=t.window,n=t.location,i=ut(n.hostname);if(i){var r=nt(n.search),o=r[i.param];if(A(o))return{window:e,location:tt(o)}}return{window:e,location:n}}function ut(t){return D(ti,function(e){return C(t,e.domain)})}function lt(t){if(A(t)){var e=decodeURIComponent(t);return tt((et(e)?"":"//")+e)}return ei.location}function ht(t,e){at(t.pixels),R(t.iframes,function(t){var n=document.createElement("iframe");n.src=t,n.width="0",n.height="0",n.frameBorder="0",e.appendChild(n)})}function ft(t){return Promise.resolve().then(function(){return vt(t.ownerDocument.defaultView,pt(t))}).catch(function(){return"err"})}function pt(t){var e=t.getBoundingClientRect(),n=W(t).filter(function(t){return"IFRAME"===t.tagName}).map(function(t){return t.getBoundingClientRect()}).reduce(mt,{top:0,left:0});return{top:e.top+n.top,left:e.left+n.left,bottom:e.bottom+n.top,right:e.right+n.left}}function mt(t,e){return t.top+=e.top,t.left+=e.left,t}function vt(t,e){if(D(T(t.document.getElementsByTagName("video")).filter(function(t){var e=A(t.prevSrc__)||A(t.src)&&!_(t,"prevSrc__"),n=P(t,"vjs-tech")||P(t,"jw-video");return e||n}),function(t){var n=pt(t);return Math.abs(e.top-n.top)<8&&Math.abs(e.left-n.left)<8&&Math.abs(e.bottom-n.bottom)<8&&Math.abs(e.right-n.right)<8}))return"in";if(t===t.parent)return"out";try{t.parent.location.toString()}catch(t){return"na"}return vt(t.parent,e)}function At(t){return new Promise(function(e){t.setAttribute("playsinline","true"),t.muted=!1,t.prevSrc__=t.src,t.src="data:audio/mpeg;base64,/+MYxAAAAANIAUAAAASEEB/jwOFM/0MM/90b/+RhST//w4NFwOjf///PZu////9lns5GFDv//l9GlUIEEIAAAgIg8Ir/JGq3/+MYxDsLIj5QMYcoAP0dv9HIjUcH//yYSg+CIbkGP//8w0bLVjUP///3Z0x5QCAv/yLjwtGKTEFNRTMuOTeqqqqqqqqqqqqq/+MYxEkNmdJkUYc4AKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq";var n=t.play();n?n.then(function(){t.pause(),e(1)}).catch(function(n){if("NotSupportedError"===n.name)return e(1);t.muted=!0,t.play().then(function(){t.pause(),e(2)}).catch(function(){e(3)})}):(t.pause(),e(1))})}function gt(t){var e=lt(t.page_url),n={BFM_EMBEDDING_PAGE_URL_FULL:e.href||"NA",BFM_EMBEDDING_PAGE_URL_QUERY:e.search||"",BFM_EMBEDDING_PAGE_URL_UNESC:function(){return e.hostname||"NA"},BFM_EMBEDDING_PAGE_URL:e.hostname||"NA",BFM_VIDEO_WIDTH:t.width,BFM_VIDEO_HEIGHT:t.height,BFM_VIDEO_URL:t.video_source,BFM_VIDEO_POSITION:t.video_current_time,BFM_VIDEO_DURATION:t.video_duration,BFM_VIDEO_DESCRIPTION:t.content.description,BFM_VIDEO_KEYWORDS:t.content.keywords,BFM_VIDEO_ID:t.content.id,BFM_VIDEO_TITLE:t.content.title,BFM_VIDEO_COUNT:t.content.count,BFM_REACH_PLAYER_ID:t.player_id,BFM_REACH_PUBLISHER_ID:t.publisher_id,BFM_REACH_CATEGORY:E(t.content.category)?t.content.category[0]:void 0,BFM_REACH_IAB_CATEGORY:t.content.iab_category,BFM_REACH_PROVIDER_ID:t.content.provider,BFM_REACH_CONTRIBUTOR_ID:t.content.contributor,BFM_REACH_FEED_ID:t.content.feed,BFM_OS:Yn(),BFM_CACHE_BREAKER_TS:Date.now,BFM_CACHE_BREAKER:k};return R(t.content.macro,function(t,e){n[e]=t}),R(n,function(t,e){n[e]=p(t)?t:encodeURIComponent(t)}),n}function _t(t,e,n,i){var r=lt(t.page_url);return A(t.ad_tag_url)?t.ad_tag_url:rt(Pn,{v:"1",apv:"nep-"+On.replace(/\./g,"-"),width:t.width,height:t.height,i_type:t.inventory_type,aid:t.inventory_id,dsp:t.dsp,cat:t.cat,pageurl:u(t.page_url)?void 0:r.href||"NA",playerid:t.player_id,publisherid:t.publisher_id,feedid:t.content.feed,providerid:t.content.provider,contentid:t.content.id,contributorid:t.content.contributor,iabc:t.content.iab_category,categoryid:E(t.content.category)?t.content.category[0]:void 0,custom_content_id:f(t.content.macro)?t.content.macro.BFM_VIDEO_CUSTOM_CONTENT_ID:void 0,osvers:Yn(),network:"cellular"===K()?"c":"wifi"===K()?"w":"u",cm:!Number(t.server_side_mediation),te:!Number(t.do_not_track),flash:!!t.ad_request_flash&&void 0,vjs:Boolean(t.ad_request_js),appurl:t.app_url,bundleid:t.bundle_id,idfa:t.idfa,iv:e,stream:i,playback:n,cb:k()})}function Et(t){var e=t.map(function(t){return t.findIOExtension()}).filter(Boolean);return e.length?e.map(function(t){return t.data.getGlobalTimeout()||jn}).reduce(function(t,e){return Math.max(t,e)},Hn):jn}function yt(t,e){e=Number(e)||0;var n=t.findIOExtension(),i=n?n.data.getTimeout()||Bn:Bn;return i=Math.max(i,Wn),i=Math.max(i-e,0)}function Tt(){return Fn}function wt(t){var e=t.findIOExtension();return e?e.data.getWeight():zn}function kt(t){return D(y(t),function(t){return t&&t.wrapper&&C(tt(t.wrapper.vastAdTagUri).host,".g.doubleclick.net")})}function bt(t,e){for(var n=0,i=t.length;n<i;n++){var r=t[n].listener;if(r===e||r[ni]===e)return n}return-1}function Rt(){}function It(){var t=Object.create(this.prototype);return this.apply(t,arguments),t}function St(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.statics||{},n=t.decorators||[],i=t.autoBind,r=t.init||this.prototype.init||function(){},o=function t(){if(i)for(var e in t.prototype)p(t.prototype[e])&&"constructor"!==e&&(this[e]=t.prototype[e].bind(this));r.apply(this,arguments)};return delete t.statics,delete t.decorators,delete t.autoBind,o.prototype=Object.create(this.prototype),o.prototype.constructor=o,o.extend=St.bind(o),o.create=It.bind(o),S(o.prototype,t),S(o,e),n.forEach(function(t){return t(o.prototype)}),o}function Ct(t,e){for(var n={},i=[],r=Object.getPrototypeOf(t);r&&r!==Rt.prototype;)f(r.options)&&i.push(r.options),r=Object.getPrototypeOf(r);return i.reverse().forEach(function(t){return I(n,t)}),I(n,e)}function Dt(t){var e=t.el||document.createElement(t.tagName||"div");return t.id&&(e.id=t.id),t.className&&(e.className=t.className),t.innerHTML&&(e.innerHTML=t.innerHTML),t.textContent&&(e.textContent=t.textContent),t.hide&&(e.style.display="none"),R(t.tagAttributes,function(t,n){return e.setAttribute(n,t)}),e}function Mt(t){return Promise.resolve().then(function(){if(!t.settings.ima_enabled)throw new Error("Google IMA SDK disabled");if(!window.google||!window.google.ima)return H(Nn,document.body)}).then(function(){var e=window.google.ima,n=oi.create({className:"bfm-ima-slot"});t.slot.appendChild(n.el());var i=new e.AdDisplayContainer(n.el());i.initialize();var r=new e.AdsLoader(i);return r.getSettings().setVpaidMode(e.ImaSdkSettings.VpaidMode.ENABLED),{adDisplayContainer:i,adsLoader:r,component:n}}).catch(function(t){var e=t.message,n=t.stack;hi.warn({type:"ima.error",message:e,stack:n})})}function Ot(t){return function(e){if("AdClickThru"===e.type){var n=e.data||{},i=n.url,r=n.id,o=n.playerHandles;t.call(this,i,r,o)}else t.call(this)}}function Lt(){var t=0,e=null;return{currentTime:function(){return e?t+(Date.now()-e):t},start:function(){e||(e=Date.now())},stop:function(){e&&(t+=Date.now()-e,e=null)}}}function xt(t){return bi===ki?t.getElementsByTagName("parsererror").length>0:t.getElementsByTagNameNS(bi,"parsererror").length>0}function Pt(t){try{var e=Ei.parseFromString(t,"application/xml");if(xt(e)||!t)throw new Error;return e}catch(t){throw new Error("XML Parsing Error")}}function Nt(t){return Ti.test(t)?null:wi.test(t)?"true"===t.toLowerCase():isFinite(t)?parseFloat(t):t.trim()}function Vt(t){return t?t.keyValue:void 0}function Ut(t,e){return t?t[Ri(e)]:void 0}function Ft(t){if(v(t))return t.replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&")}function qt(t,e){return Wt("GET",t,e)}function Bt(t,e){return Wt("POST",t,e)}function Wt(t,e,n){e=v(e)?{url:e}:e,e=S({},Di,e),e.method=t,e.callback=G(n),e.cancelToken=e.cancelToken||Kn;var i=e.xhr=p(e.createXhr)?e.createXhr():Gt(),r="GET"===t?rt(e.url,e.data):e.url,o="POST"===t&&e.data?Qt(e.data):null,a=zt(e);if(!r)throw new Error("Http Request Error: Invalid URL");if(e.cancelToken.isCanceled())return e.cancelToken.subscribe(a);i.open(t,tt(r).href,!0),i.withCredentials=Boolean(e.withCredentials),Xt(i,e.headers),e.timeout&&(e.timeoutId=setTimeout(a,e.timeout)),i.onload=jt(e),i.onerror=Ht(e),i.send(o),e.cancelToken.subscribe(a)}function jt(t){return function(){var e=t.xhr,n=t.timeoutId,i=t.callback;clearTimeout(n),e.onload=null,e.onerror=null,e.getAllResponseHeaders||(e.getAllResponseHeaders=function(){return null}),e.status||(e.status=200),i(Yt(e.status)?null:new Error(e.statusText||"Http Request Error"),"response"in e?e.response:e.responseText,e.getAllResponseHeaders())}}function Ht(t){return function(){var e=t.xhr,n=t.timeoutId,i=t.method,r=t.cancelToken,o=t.callback;if(e.onload=null,e.onerror=null,t.withCredentials&&t.retryWithoutCredentials){Wt(i,S({},t,{withCredentials:!1,retryWithoutCredentials:!1,cancelToken:r}),o)}else{var a=new Error("Http Request Error");clearTimeout(n),o(a,null,null)}}}function zt(t){return function(e){var n=t.xhr,i=t.timeoutId,r=t.callback,o=e||new Error("Http Request Canceled");n.onload=null,n.onerror=null,n.abort(),clearTimeout(i),r(o,null,null)}}function Gt(){var t=new XMLHttpRequest;return"withCredentials"in t?t:new XDomainRequest}function Qt(t){var e=new FormData;return Object.keys(Object(t)).forEach(function(n){e.append(n,t[n])}),e}function Xt(t,e){R(e,function(e,n){l(e)&&t.setRequestHeader(n,e)})}function Yt(t){return t>=200&&t<300}function $t(t){var e=parseInt(t,10),n=-1===String(t).indexOf("%")?"px":"%";return isNaN(e)?"":e+n}function Kt(t){return String(t).replace(/[A-Z]/g,function(t,e){return(e?"_":"")+t.toLowerCase()})}function Jt(t,e){var n=String(t);if(e=m(e)?e:0,t=m(t)?t:parseInt(t,10),m(t)&&!isNaN(t)){for(n=String(t);n.length<e;)n="0"+n;return n}return String(NaN)}function Zt(t){return t?{advertiser:Vt(t.advertiser),campaignid:Vt(t.campaignid),to:Vt(t.to),gto:Vt(t.gto),rurl:Vt(t.rurl),crurl:Vt(t.crurl)}:null}function te(t){return t?{marketplace:Vt(t.marketplace),level:Vt(t.level),weight:Vt(t.weight)}:null}function ee(t){return t?{moat:Vt(t.moat),moat_imp:Vt(t.moat_imp),appid:Vt(t.appid),ts:Vt(t.ts),rid:Vt(t.rid)}:null}function ne(t){return t?{start:Vt(t.start),complete:Vt(t.complete)}:null}function ie(t){return l(t)&&l(t.jSInject)?y(t.jSInject).map(function(t){return{name:t.attr("name"),onload:t.attr("onload"),url:Vt(t)}}):[]}function re(t,e){return g(t)?oe(t,e):ae(t)}function oe(t,e){return e?e*parseFloat(t.replace("%",""))/100:null}function ae(t){var e=/(\d\d):(\d\d):(\d\d)(\.(\d\d\d))?/,n=void 0;if(v(t)){var i=t.match(e);i&&(n=function(t){return 60*parseInt(t,10)*60*1e3}(i[1])+function(t){return 60*parseInt(t,10)*1e3}(i[2])+function(t){return 1e3*parseInt(t,10)}(i[3])+parseInt(i[5]||0,10))}return isNaN(n)?null:n}function se(t){var e=Math.floor(t/36e5),n=Math.floor(t/6e4%60),i=Math.floor(t/1e3%60),r=t%1e3;return Jt(e,2)+":"+Jt(n,2)+":"+Jt(i,2)+"."+Jt(r,3)}function de(t){return t?y(t).map(xi.create):[]}function ce(t){return t?y(t).map(function(t){return t.keyValue}).filter(A):[]}function ue(t){return t?y(t).map(function(t){return t.keyValue}).filter(A):[]}function le(t){return t?y(t).filter(function(t){return t&&l(t.keyValue)}).map(function(t){return{uri:t.keyValue,type:t.attr("type")}}):[]}function he(t){return t?y(t).filter(function(t){return t&&l(t.keyValue)}).map(function(t){return t.keyValue}):[]}function fe(t,e){return t&&t.tracking?y(t.tracking).map(function(t){return Pi.create(t,e)}):[]}function pe(t){return t&&t.creative?y(t.creative).map(Ui.create):[]}function me(t){return t&&t.extension?y(t.extension).map(Fi.create):[]}function ve(t){return t&&t.mediaFile?y(t.mediaFile).map(qi.create):[]}function Ae(t){return t&&t.icon?y(t.icon).map(Wi.create):[]}function ge(t){if(v(t))try{t=Si(t)}catch(t){return[]}return t&&t.companion?y(t.companion).map(ji.create):[]}function _e(t,e,n){var i=[t],r=Ie(t);r?n(r,i):t.wrapper?Ee(t.wrapper,i,e,n):setTimeout(function(){return n(null,i)})}function Ee(t,e,n,i){var r=t.vastAdTagUri,o=t.followAdditionalWrappers,a=n.shouldStop;return e.length>=qn?i(mi.WRAPPER_LIMIT.create(),e):p(a)&&a(e)?i(null,e):void $(ye,Te,we,ke)(r,n,function(t,r){return r&&e.push(r),t?i(t,e):r.wrapper&&o?Ee(r.wrapper,e,n,i):r.wrapper&&!o?i(mi.EXPECTED_INLINE.create(),e):i(null,e)})}function ye(t,e,n){n(null,ot(t,e.macroVars),e)}function Te(t,e,n){var i=e.cancelToken;try{Ci.get({url:t,cancelToken:i,withCredentials:!0,retryWithoutCredentials:!0},function(t,e){var r=i&&i.isCanceled();t&&!r?n(mi.UNAVAILABLE_AD_TAG.create()):n(t,e)})}catch(t){n(t)}}function we(t,e){try{var n=Hi.create(Si(t)),i=Re(n);e(i,n)}catch(t){e(mi.XML_PARSING_ERROR.create())}}function ke(t,e){var n=t.ads.filter(function(t){return t.inLine}),i=t.ads.filter(function(t){return t.wrapper}),r=[].concat(Sn(n),Sn(i)),o=D(r,X(Ie))||r[0];e(Ie(o),o)}function be(t,e,n){n(y(t).reduce(function(t,e){return e.errors&&(t=t.concat(e.errors)),e.wrapper&&(t=t.concat(e.wrapper.errors)),e.inLine&&(t=t.concat(e.inLine.errors)),t},[]),{ERRORCODE:e.code||900})}function Re(t){var e=t.version;return 0===t.ads.length?mi.NO_AD.create():e&&e<xn?mi.UNSUPPORTED_VAST_VERSION.create():null}function Ie(t){var e=t.wrapper,n=t.inLine;return n&&e?mi.BOTH_INLINE_AND_WRAPPER.create():n||e?n&&0===n.creatives.length?mi.NO_CREATIVE.create():e&&!e.vastAdTagUri?mi.NO_AD_TAG_URI.create():null:mi.NO_INLINE_OR_WRAPPER.create()}function Se(t){return function(e){return e.width===t.width&&e.height===t.height}}function Ce(t,e){t=E(t)?t:[],e=e||{};var n=l(e.width)||l(e.height),i=l(e.bitrate),r=Number(e.width)||1,o=Number(e.height)||1,a=Number(e.bitrate)||0;return t.reduce(function(t,s){var d=s.width||1,c=s.height||1,u=s.bitrate||0,l=1/0,h=1/0;return n&&(l=e.useAspectRatio?Math.abs(r/o-d/c):Math.sqrt(Math.pow(r-d,2)+Math.pow(o-c,2))),i&&(h=Math.abs(u-a)),l<t.dim||l===t.dim&&h<t.bit?{item:s,dim:l,bit:h}:t},{item:null,dim:1/0,bit:1/0}).item}function De(t){var e=[],n=function(){return e.filter(Yi).forEach(Ki(t))};return t.addEventListener("playing",n),t.addEventListener("timeupdate",n),{add:function(t,n){y(t).map(function(t){e.push({offset:t,handler:n,triggered:!1,enabled:!0})})},remove:function(t){l(t)?(t=y(t),e=e.filter(function(e){return-1===t.indexOf(e.offset)})):e=[]},offsets:function(){return e.map(function(t){return t.offset})},disable:function(){e.forEach(function(t){t.enabled=!1})},enable:function(){e.forEach(function(t){t.enabled=!0})},reset:function(){e.forEach(function(t){t.triggered=!1})},dispose:function(){e=[],t.removeEventListener("playing",n),t.removeEventListener("timeupdate",n)}}}function Me(t){return'<html>\n\t\t\t<head>\n\t\t\t\t<meta charset="UTF-8">\n\t\t\t</head>\n\t\t\t<body style="padding:0;margin:0;cursor:pointer;">'+t+"</body>\n\t\t</html>"}function Oe(t){var e=t.creativeType,n=t.staticResource,i=t.altText;return e=e.toLowerCase(),C(Ji.IMAGE,e)?'<img src="'+n+'" title="'+(i||"")+'"></img>':C(Ji.HTML5,e)?'<script type="text/javascript" src="'+n+'"><\/script>':""}function Le(t,e,n){var i=document.createElement("iframe");return i.src=t||"about:blank",i.width=e||"100%",i.height=n||"100%",i.frameBorder="0",i.scrolling="no",i.style.position="absolute",i.style.left="0",i.style.top="0",i}function xe(t,e){var n=t.adUnit,i=t.adResponse;t.once([tr.AD_START,tr.AD_CANCEL],function(e){if(e.type===tr.AD_START){var r="VPAID"===n.type?ge(n.getAdCompanions()):[],o=i.companionAds.concat(r),a=er.map(nr(o)).filter(Boolean);a.map(function(t){return t.inject()}),t.once([tr.AD_STOP,tr.AD_CANCEL],function(){a.map(function(t){return t.dispose()})})}}),e(null,t)}function Pe(t,e,n){return Math.max(e,Math.min(n,t))}function Ne(t,e){var n=t.adUnit,i=t.container;return t.once([tr.AD_START,tr.AD_CANCEL],function(t){if(t.type===tr.AD_START){var e=rr.create();i.addChild(e),n.on(["AdDurationChange","AdRemainingTimeChange"],function(){e.update(n.getAdRemainingTime(),n.getAdDuration())})}}),e(null,t)}function Ve(t,e){var n=t.adUnit,i=t.adResponse,r=t.video;return t.once([tr.AD_START,tr.AD_CANCEL],function(t){if(t.type===tr.AD_START){var e=i.findIOExtension(),o=e&&e.data.getCreativeUploadUrl();"VAST"===n.type&&o&&q(r,"loadedmetadata",function(){at(o,{"\\$cr_width\\$":r.videoWidth,"\\$cr_height\\$":r.videoHeight,"\\$cr_uri\\$":r.src,"\\$cr_type\\$":r.type})})}}),e(null,t)}function Ue(t,e){var n=t.adUnit,i=t.adResponse;t.once([tr.AD_START,tr.AD_CANCEL],function(e){if(e.type===tr.AD_START){var r=i.findIOExtension();if(r){var o=Date.now(),a=r.data.getTrackingStart(),s=r.data.getTrackingComplete(),d={io_playing_time:function(){return Date.now()-o},io_ad_length:1e3*n.getAdDuration(),io_timestamp:Date.now};at(a,d),t.once([tr.AD_STOP,tr.AD_ERROR,tr.AD_CANCEL],function(){at(s,d)})}}}),e(null,t)}function Fe(t,e,n,i,r){var o=document.createElement("script"),a={events:[],addEvent:function(t){d.sendEvent?(a.events&&(d.sendEvent(a.events),a.events=!1),d.sendEvent(t)):a.events.push(t)}},s=function(e){return function(){var n,i=-1;if(t&&t.getAdVolume&&(n=t.getAdVolume()),"number"==typeof n&&!isNaN(n)&&0<=n&&(i=n),a.addEvent({type:e,adVolume:i}),-1!==l.indexOf(e)&&t&&t.unsubscribe&&!u){u=!0;for(var r in c)if(c.hasOwnProperty&&c.hasOwnProperty(r))try{t.unsubscribe(c[r],r)}catch(t){}}}},d={adData:{ids:n,duration:r,vpaid:t,build:"cc07a80-clean"},dispatchEvent:a.addEvent};n="_moatApi"+Math.floor(1e8*Math.random());var c={AdStarted:s("AdStarted"),AdStopped:s("AdStopped"),AdSkipped:s("AdSkipped"),AdLoaded:s("AdLoaded"),AdLinearChange:s("AdLinearChange"),AdSizeChange:s("AdSizeChange"),AdExpandedChange:s("AdExpandedChange"),AdSkippableStateChange:s("AdSkippableStateChange"),AdDurationChange:s("AdDurationChange"),AdRemainingTimeChange:s("AdRemainingTimeChange"),AdVolumeChange:s("AdVolumeChange"),AdImpression:s("AdImpression"),AdClickThru:s("AdClickThru"),AdInteraction:s("AdInteraction"),AdVideoStart:s("AdVideoStart"),AdVideoFirstQuartile:s("AdVideoFirstQuartile"),AdVideoMidpoint:s("AdVideoMidpoint"),AdVideoThirdQuartile:s("AdVideoThirdQuartile"),AdVideoComplete:s("AdVideoComplete"),AdUserAcceptInvitation:s("AdUserAcceptInvitation"),AdUserMinimize:s("AdUserMinimize"),AdUserClose:s("AdUserClose"),AdPaused:s("AdPaused"),AdPlaying:s("AdPlaying"),AdError:s("AdError")},u=!1,l=["AdStopped","AdSkipped","AdVideoComplete"];!function(){if(t&&t.subscribe)for(var e in c)c.hasOwnProperty&&c.hasOwnProperty(e)&&t.subscribe(c[e],e)}();var h,f;try{h=e.ownerDocument,f=h.defaultView||h.parentWindow}catch(t){h=document,f=window}return f[n]=d,o.type="text/javascript",e&&e.insertBefore(o,e.childNodes[0]||null),o.src="https://z.moatads.com/"+i+"/moatvideo.js#"+n,d}function qe(t,e){var n=t.adUnit,i=t.adResponse,r=t.container,o=t.settings;t.once([tr.AD_START,tr.AD_CANCEL],function(t){var e=i.findIOExtension(),a=e&&e.data.isMoatEnabled(),s=e&&e.data.getMoatImpression();t.type===tr.AD_START&&a&&s&&n.once("AdImpression",function(){var t=i.ads[0],a=n.getAdDuration(),d=lt(o.page_url),c=tt(s),u=nt(c.search),l=or.reduce(function(t,e){return A(u[e])&&(t[e]=u[e]),t},{}),h={level1:e.data.getAdvertiser(),level2:e.data.getCampaignId(),level3:t&&1!==t.id?t.id:u.adomain,level4:u.bidcrid,slicer1:d.hostname,slicer2:o.inventory_id,zMoatIMP:e.data.getImpressionId(),zMoatTS:e.data.getTimeStamp()+"&"+it(l),zMoatTI:e.data.getTransactionId(),zMoatPG:d.hostname,zMoatPT:"html5"};Fe(n,r.el(),h,Vn,a).dispatchEvent({type:"AdStarted"}),at(s)})}),e(null,t)}function Be(t,e){var n=t.adUnit,i=t.adResponse;n.once("AdImpression",function(){var t=i.findIOExtension();t&&t.data.jSInjects&&t.data.jSInjects.forEach(function(t){H(t.url,document.body).then(function(){p(window[t.onload])&&window[t.onload]()})})}),e(null,t)}function We(t,e){var n=t.adResponse;try{n.validate(),e(null,t)}catch(t){e(t)}}function je(t,e){var n=t.adResponse,i=t.settings,r=n.mediaFiles.filter(function(t){return Qi.canPlayType(t.type)}).filter(function(t){return A(t.src)}).filter(function(t){return"streaming"!==t.delivery}),o={width:i.width,height:i.height,bitrate:0},a=t.mediaFile=Ce(r,o);a?(hi.info({type:"ad.mediaFileSelected",adId:n.ads[0].id,mediaFile:a}),e(null,t)):e(mi.UNSUPPORTED_MEDIA_FILE.create())}function He(t,e){var n=t.video,i=t.adResponse,r=t.mediaFile,o=i.companionAds;t.adUnit=ur.create(n,r,o),e(null,t)}function ze(t,e){var n=t.adResponse,i=t.mediaFile;t.adTracker=cr.create(n,{assetUri:i.src}),e(null,t)}function Ge(t,e){function n(){t.off("video.timeupdate",l),x(u)}function i(t){var e={ASSETURI:encodeURIComponent(c.src),CONTENTPLAYHEAD:se(1e3*s.currentTime)};return t?ot(t,e):"#"}var r=t.adUnit,o=t.adResponse,a=t.adTracker,s=t.video,d=t.container,c=r._src,u=function(t,e){var n=window.document.createElement("a"),o=e.clickThrough;return N(n,"bfm-vast-blocker"),n.href=i(o),v(o)&&(n.target="_blank"),n.onclick=function(e){if(s.paused)return s.play(),void 0!==window.Event.prototype.stopPropagation&&e.stopPropagation(),!1;var n={url:"",id:"",playerHandles:!1};s.pause(),t.trackClick(),r.dispatch({type:"AdClickThru",data:n})},n}(a,o),l=function(t,e){return function(){return t.href=i(e.clickThrough)}}(u,o);return t.once([tr.AD_START,tr.AD_CANCEL],function(e){e.type===tr.AD_START&&(d.el().insertBefore(u,d.el().lastChild),t.on("video.timeupdate",l),t.once([tr.AD_STOP,tr.AD_CANCEL],n))}),e(null,t)}function Qe(t,e){var n=t.adResponse,i=t.container,r=t.video,o=t.adTracker;return t.once([tr.AD_START,tr.AD_CANCEL],function(e){if(e.type===tr.AD_START&&m(n.skipoffset)){var a=ar.create();a.el().addEventListener("click",function(){r.pause(),o.trackSkip(),t.cancelSource.cancel()}),t.on(["video.timeupdate"],function e(){1e3*r.currentTime>=n.skipoffset&&(t.off("video.timeupdate",e),i.addChild(a))})}}),e(null,t)}function Xe(t,e){function n(){t.off("video.timeupdate",i),t.off("video.timeupdate",r),t.off("video.ended",o),t.off("video.pause",u),t.off("video.volumechange",l),f.off("AdSizeChange",h),v.dispose()}function i(){t.off("video.timeupdate",i),p.trackImpressions(),f.dispatch("AdImpression")}function r(){var t=1e3*m.currentTime;p.trackProgress(t),f.dispatch("AdRemainingTimeChange")}function o(){p.trackComplete(),f.dispatch("AdVideoComplete")}function a(){p.trackCreativeView(),p.trackStart(),f.dispatch("AdVideoStart")}function s(){p.trackFirstQuartile(),f.dispatch("AdVideoFirstQuartile")}function d(){p.trackMidpoint(),f.dispatch("AdVideoMidpoint")}function c(){p.trackThirdQuartile(),f.dispatch("AdVideoThirdQuartile")}function u(){Math.abs(m.duration-m.currentTime)<.25||(p.trackPause(),f.dispatch("AdPaused"),t.once(["video.play",tr.AD_STOP,tr.AD_CANCEL],function(t){"video.play"===t.type&&(p.trackResume(),f.dispatch("AdPlaying"))}))}function l(){var t=m.muted||!m.volume;t?p.trackMute():g&&p.trackUnmute(),g=t,f.dispatch("AdVolumeChange")}function h(){var t=f._viewMode;"fullscreen"!==A&&"fullscreen"===t?p.trackFullscreen():"fullscreen"===A&&"fullscreen"!==t&&p.trackExitFullscreen(),A=t}var f=t.adUnit,p=t.adTracker,m=t.video,v=Xi.create(m),A=f._viewMode,g=!1;return t.once([tr.AD_START,tr.AD_CANCEL],function(e){e.type===tr.AD_START&&(t.on("video.timeupdate",i),t.on("video.timeupdate",r),t.on("video.ended",o),t.on("video.pause",u),t.on("video.volumechange",l),f.on("AdSizeChange",h),
v.add(.01,a),v.add("25%",s),v.add("50%",d),v.add("75%",c),t.once([tr.AD_STOP,tr.AD_CANCEL],n))}),e(null,t)}function Ye(t,e){var n=t.adUnit,i=t.adTracker,r=t.video,o=t.settings,a=t.imaPromise,s=n._src;if(r.autoplay=o.ad_auto_play,r.type=s.type,r.src=s.src,r.load(),o.ad_auto_play){var d=r.play();d&&d.then&&d.catch(function(t){hi.info({type:"ad.autoplayWithSoundBlocked",error:t}),r.muted=!0,r.play()})}t.once([tr.AD_CANCEL,"video.durationchange","video.error"],function(r){"video.durationchange"===r.type?(t.dispatch(tr.AD_START),t.once([tr.AD_CANCEL,"video.ended"],function(){e()}),a.then(function(t){t.adDisplayContainer.destroy(),t.adsLoader.destroy(),t.component.dispose()}).catch(c),i.duration=n.getAdDuration(),n.dispatch("AdDurationChange")):"video.error"===r.type&&e(mi.MEDIA_FILE_ERROR.create())})}function $e(t){return Boolean(t)&&vr.every(function(e){return p(t[e])})}function Ke(t,e){var n=Je(t,null),i=n.contentWindow&&n.contentWindow.document;return i?(i.write(e),n):null}function Je(t,e){var n=document.createElement("iframe");return n.setAttribute("SCROLLING","NO"),n.src=e||"about:blank",n.marginWidth="0",n.marginHeight="0",n.frameBorder="0",n.width="100%",n.height="100%",Ze(n),t.appendChild(n),n}function Ze(t){t&&(t.style.position="absolute",t.style.left="0",t.style.top="0",t.style.margin="0px",t.style.padding="0px",t.style.border="none",t.style.width="100%",t.style.height="100%")}function tn(t){Gn.GETTERS.forEach(function(e){t[e]=function(){try{return this.creative[e]()}catch(t){return vi.prototype[e]()}}})}function en(){var t=this;if(Gn.EVENTS.forEach(function(e){"AdClickThru"===e?t.creative.subscribe(function(e,n,i){t.dispatch({type:"AdClickThru",data:{url:e,id:n,playerHandles:i}})},"AdClickThru"):t.creative.subscribe(function(){t.dispatch(e)},e)}),this.videoSlot&&this.iframe){var e=this.iframe.contentDocument.documentElement;e.addEventListener("click",function(n){n.target===e&&t.videoSlot.click()})}}function nn(t){Gi.PROPS.forEach(function(e){Object.defineProperty(t,e,{get:function(){return this._video?this._video[e]:null},set:function(t){this._video&&(this._video[e]=t)}})})}function rn(t,e,n){return e.guid__=e.guid__||b(),t+String(e.guid__)+Boolean(n)}function on(t,e){var n=t.adResponse;try{n.validate(),e(null,t)}catch(t){e(t)}}function an(t,e){var n=t.adResponse,i=n.mediaFiles.filter(function(t){return A(t.src)}).filter(function(t){return C(Ji.HTML5,t.type)}),r=t.mediaFile=i[0];r?(hi.info({type:"ad.mediaFileSelected",adId:n.ads[0].id,mediaFile:r}),e(null,t)):e(mi.UNSUPPORTED_MEDIA_FILE.create())}function sn(t,e){var n=t.video,i=t.settings,r=t.videoProxy=_r.create(Xn()?n:null);t.once([tr.AD_STOP,tr.AD_CANCEL],function(){r.dispose()}),t.once([tr.AD_START,tr.AD_CANCEL],function(t){t.type===tr.AD_START&&(n.autoplay=i.ad_auto_play,Xn()||r.replace(n))}),e(null,t)}function dn(t,e){var n=t.container,i=t.videoProxy,r=t.mediaFile,o=t.vpaidClient=gr.create(n.el(),i);t.once([tr.AD_STOP,tr.AD_CANCEL],function(){}),o.loadAd(r.src).then(function(n){t.adUnit=n,e(null,t)},function(t){e(t)})}function cn(t,e){function n(t){var e=String(t).split("."),n=parseInt(e[0],10);return n>=1&&n<=2}t.adUnit.handshakeVersion(Ln).then(function(i){n(i)?e(null,t):e(mi.UNSUPPORTED_VPAID_VERSION.create())},function(t){e(t)})}function un(t,e){var n=t.adUnit,i=t.adResponse,r=t.settings,o=r.width,a=r.height,s=Number(r.desired_bitrate)||-1,d={AdParameters:i.adParameters||""};n.initAd(o,a,pr.NORMAL,s,d).then(function(){e(null,t)},function(t){e(t)})}function ln(t,e){var n=t.adUnit,i=t.adResponse,r=t.mediaFile,o=t.video,a=o.muted?0:o.volume,s=t.adTracker=cr.create(i,{assetUri:r.src});n.on("AdSkipped",function(){return s.trackSkip()}),n.once("AdImpression",function(){return s.trackImpressions()}),n.once("AdVideoStart",function(){return s.trackStart()}),n.once("AdVideoStart",function(){return s.trackCreativeView()}),n.on("AdPlaying",function(){return s.trackResume()}),n.on("AdPaused",function(){return s.trackPause()}),n.on("AdVideoFirstQuartile",function(){return s.trackFirstQuartile()}),n.on("AdVideoMidpoint",function(){return s.trackMidpoint()}),n.on("AdVideoThirdQuartile",function(){return s.trackThirdQuartile()}),n.on("AdVideoComplete",function(){return s.trackComplete()}),n.on("AdUserMinimize",function(){return s.trackCollapse()}),n.on("AdError",function(){return s.trackError(901)}),n.on("AdStopped",function(){s.isTrackedOnce("thirdQuartile")&&s.trackComplete()}),n.on("AdUserClose",function(){s.trackClose(),s.trackCloseLinear()}),n.on("AdUserAcceptInvitation",function(){s.trackAcceptInvitation(),s.trackAcceptInvitationLinear()}),n.on("AdClickThru",function(t){var e=t.data||{},n=e.url,o=e.playerHandles,a=A(n)?n:function(t){var e={ASSETURI:encodeURIComponent(r.src),CONTENTPLAYHEAD:0};return t?ot(t,e):null}(i.clickThrough);s.trackClick(),o&&a&&window.open(a,"_blank"),t.data={url:"",id:"",playerHandles:!1}}),n.on("AdVolumeChange",function(){var t=n.getAdVolume();0===t&&a>0&&s.trackMute(),t>0&&0===a&&s.trackUnmute(),a=t}),e(null,t)}function hn(t,e){var n=t.adUnit,i=t.adTracker,r=t.adResponse,o=t.settings,a=!1,s=!1,d=function(){s&&n.dispatch("AdVideoStart")},c=function(){a&&n.dispatch("AdImpression")},u=function(){Xn()?(t.dispatch(tr.AD_START),d(),c()):a?(t.dispatch(tr.AD_START),d(),n.dispatch("AdImpression")):n.once("AdImpression",function(){t.dispatch(tr.AD_START),d(),n.dispatch("AdImpression")})},l=function(){n.pauseAd().then(function(){t.dispatch(tr.AD_START),e(null,t)},function(t){e(t)})};n.once("AdImpression",function(){return a=!0}),n.once("AdVideoStart",function(){return s=!0}),n.startAd().then(function(){o.ad_auto_play?(i.duration=Math.max(n.getAdDuration(),0)||r.duration/1e3,u(),e(null,t)):l()},function(t){e(t)})}function fn(t,e){var n=t.adUnit,i=t.imaPromise,r=void 0;i.then(function(t){t.adDisplayContainer.destroy(),t.adsLoader.destroy(),t.component.dispose()}).catch(c),t.once(["video.ended","AdVideoComplete"],function(){r=setTimeout(function(){return n.stopAd().then(e)},Un)}),n.once(["AdStopped","AdSkipped"],function(){clearTimeout(r),e()}),n.on("AdError",function(){e(mi.VPAID_ERROR.create())})}function pn(t,e){var n=t.adResponse;t.adTracker=cr.create(n),e(null,t)}function mn(t,e){var n=this,i=t.adResponse,r=t.video,o=t.settings,a=t.macroVars,s=t.imaPromise,d=i.googleAd;s.then(function(i){var s=i.adsLoader,c=window.google.ima;s.addEventListener(c.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(i){if(i.getUserRequestContext()===n){var o=new c.AdsRenderingSettings;o.loadVideoTimeout=br,o.bitrate=Rr,t.adsManager=i.getAdsManager(r,o),t.adUnit=wr.create(t),t.once([tr.AD_STOP,tr.AD_CANCEL],function(){return t.adsManager.destroy()}),e(null,t)}}),s.addEventListener(c.AdErrorEvent.Type.AD_ERROR,function(t){e(mi.create("IMA SDK Error: "+t.getError().getMessage()))});var u=new c.AdsRequest;u.adTagUrl=ot(d.wrapper.vastAdTagUri,a),u.linearAdSlotWidth=o.width,u.linearAdSlotHeight=o.height,u.setAdWillAutoPlay(!0),hi.info({type:"ad.imaAdTag",adTag:u.adTagUrl}),s.requestAds(u,n)}).catch(function(){e(mi.create("Exception while loading the IMA ad unit"))})}function vn(t){var e=t.adsManager,n=t.adUnit,i=t.adTracker,r=t.video,o=window.google.ima,a=r.muted?0:r.volume;e.addEventListener(o.AdEvent.Type.SKIPPED,function(){i.trackSkip(),n.dispatch("AdSkipped")}),e.addEventListener(o.AdEvent.Type.RESUMED,function(){i.trackResume(),n.dispatch("AdPlaying")}),e.addEventListener(o.AdEvent.Type.PAUSED,function(){i.trackPause(),n.dispatch("AdPaused")}),e.addEventListener(o.AdEvent.Type.STARTED,function(){i.trackStart(),i.trackCreativeView(),n.dispatch("AdVideoStart")}),e.addEventListener(o.AdEvent.Type.FIRST_QUARTILE,function(){i.trackFirstQuartile(),n.dispatch("AdVideoFirstQuartile")}),e.addEventListener(o.AdEvent.Type.MIDPOINT,function(){i.trackMidpoint(),n.dispatch("AdVideoMidpoint")}),e.addEventListener(o.AdEvent.Type.THIRD_QUARTILE,function(){i.trackThirdQuartile(),n.dispatch("AdVideoThirdQuartile")}),e.addEventListener(o.AdEvent.Type.COMPLETE,function(){i.trackComplete(),n.dispatch("AdVideoComplete")}),e.addEventListener(o.AdEvent.Type.CLICK,function(){i.trackClick(),n.dispatch("AdClickThru")}),e.addEventListener(o.AdEvent.Type.USER_CLOSE,function(){i.trackClose(),i.trackCloseLinear(),n.dispatch("AdUserClose")}),e.addEventListener(o.AdEvent.Type.INTERACTION,function(){n.dispatch("AdInteraction")}),e.addEventListener(o.AdEvent.Type.DURATION_CHANGE,function(){n.dispatch("AdDurationChange")}),e.addEventListener(o.AdEvent.Type.VOLUME_CHANGED,function(){var t=n.getAdVolume();0===t&&a>0&&i.trackMute(),t>0&&0===a&&i.trackUnmute(),a=t,n.dispatch("AdVolumeChange")})}function An(t,e){try{var n=function e(n){i.removeEventListener(s.AdEvent.Type.LOADED,e),i.removeEventListener(s.AdEvent.Type.IMPRESSION,e),t.currentAd=n.getAd(),t.dispatch(tr.AD_START),o.duration=r.getAdDuration(),vn(t),n.type===s.AdEvent.Type.IMPRESSION?(o.trackImpressions(),r.dispatch("AdImpression")):i.addEventListener(s.AdEvent.Type.IMPRESSION,function(){o.trackImpressions(),r.dispatch("AdImpression")})},i=t.adsManager,r=t.adUnit,o=t.adTracker,a=t.settings,s=window.google.ima;i.addEventListener(s.AdEvent.Type.LOADED,n),i.addEventListener(s.AdEvent.Type.IMPRESSION,n),i.addEventListener(s.AdErrorEvent.Type.AD_ERROR,function(t){e(mi.create("IMA SDK Error: "+t.getError().getMessage()))}),i.addEventListener(s.AdEvent.Type.ALL_ADS_COMPLETED,function(){setTimeout(e,kr)}),i.init(a.width,a.height,s.ViewMode.NORMAL),i.start()}catch(t){e(mi.create("Exception while starting the IMA ad unit"))}}function gn(t,e){function n(){return o}function i(t){var e=!0;return a.push(t),function(){if(e){var n=a.indexOf(t);a.splice(n,1),e=!1}}}function r(e){if(p(e))return e(r,o);if(h(e.type))throw new Error('Actions must define a "type" property');if(s)throw new Error("Reducers may not dispatch actions");try{s=!0,o=t(o,e)}finally{s=!1}return a.slice().forEach(function(t){return t()}),e}var o=e,a=[],s=!1;return r({type:"@@store/INIT"}),{getState:n,subscribe:i,dispatch:r}}function _n(t,e){return Object.keys(t).reduce(function(n,i){return n[i]=Y(e,t[i]),n},{})}function En(t){var e=xr.create(yn,{data:t.data}),n=_n(t.actions,e.dispatch),i=null,r=null;return{start:function(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c;hi.info({type:"mediation.start",ads:t.length,timeout:o.timeout});var s=e.getState(),d=o.cancelToken||Kn,u=e.subscribe(function(){var o=e.getState(),s=D(o.tasks,Fr("started")),d=o.tasks.every(Fr("error"));hi.info({type:"mediation.stateChange",tasks:o.tasks.map(function(t){return{status:t.status,adId:t.ad.id,weight:t.ad.weight}})}),s?(hi.info("mediation.complete"),clearTimeout(r),clearTimeout(i),u(),n.cancelAds(),t.forEach(function(t){return t.off()}),t.filter(function(t){return t!==s.ad}).forEach(function(t){return t.cancelSource.cancel(Ai.AD_DISCARDED.create())}),a(null,s.ad)):d&&(hi.info("mediation.failed"),clearTimeout(r),clearTimeout(i),u(),a(Ai.create("Mediation failed")))});if(t.forEach(function(t){d.subscribe(t.cancelSource.cancel),t.once(_i.AD_ERROR,function(t){return n.adError({time:Date.now(),ad:t.target})}),t.once(_i.AD_LOAD,function(t){return n.adLoaded({time:Date.now(),ad:t.target})}),t.once(_i.AD_START,function(t){return n.adStarted({time:Date.now(),ad:t.target})})}),s.data.delay&&(r=setTimeout(function(){n.delayComplete({time:Date.now()})},s.data.delay)),o.timeout&&(i=setTimeout(function(){n.cancelAds(),t.forEach(function(t){return t.cancelSource.cancel(Ai.INVENTORY_TIMEOUT.create())})},o.timeout)),d.isCanceled())return n.cancelAds();d.subscribe(n.cancelAds),n.startAds({time:Date.now(),ads:t})}}}function yn(t,e){return{tasks:Tn(t.tasks,e),data:wn(t.data,e)}}function Tn(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.tasks){var n=t.filter(function(t){return null===D(e.tasks,function(e){return e.ad===t.ad})});return[].concat(Sn(n),Sn(e.tasks)).sort(Nr)}return t}function wn(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.data?S({},t,e.data):t}function kn(){var t=["isVPAID","on","off","once"].concat(Gn.METHODS,Gn.GETTERS,Gn.SETTERS),e=io.create(),n={};return t.forEach(function(t){n[t]=e[t]}),e.dispatch=function(t){var i=io.prototype.dispatch.bind(e,t,n),r=v(t)?t:t.type,o=C(oo,r)?ro:0;try{return o?setTimeout(i,o):i()}catch(t){}},n}var bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rn=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},In=function(){function t(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Sn=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)},Cn=setTimeout,Dn=d.prototype;Dn.catch=function(t){return this.then(null,t)},Dn.then=function(e,i){var r=new this.constructor(t);return n(this,new a(e,i,r)),r},d.all=function(t){return new d(function(e,n){function i(t,a){try{if(a&&("object"===(void 0===a?"undefined":bn(a))||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(e){i(t,e)},n)}r[t]=a,0==--o&&e(r)}catch(t){n(t)}}if(!t||void 0===t.length)throw new TypeError("Promise.all accepts an array");var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);for(var o=r.length,a=0;a<r.length;a++)i(a,r[a])})},d.resolve=function(t){return t&&"object"===(void 0===t?"undefined":bn(t))&&t.constructor===d?t:new d(function(e){e(t)})},d.reject=function(t){return new d(function(e,n){n(t)})},d.race=function(t){return new d(function(e,n){for(var i=0,r=t.length;i<r;i++)t[i].then(e,n)})},d._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){Cn(t,0)},d._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var Mn=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==Mn)return Mn;throw new Error("unable to locate global object")}();Mn.Promise||(Mn.Promise=d),function(t,e){"use strict";function n(t){this.time=t.time,this.target=t.target,this.rootBounds=t.rootBounds,this.boundingClientRect=t.boundingClientRect,this.intersectionRect=t.intersectionRect||u(),this.isIntersecting=!!t.intersectionRect;var e=this.boundingClientRect,n=e.width*e.height,i=this.intersectionRect,r=i.width*i.height;this.intersectionRatio=n?r/n:this.isIntersecting?1:0}function i(t,e){var n=e||{};if("function"!=typeof t)throw new Error("callback must be a function");if(n.root&&1!=n.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=o(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=t,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(n.rootMargin),this.thresholds=this._initThresholds(n.threshold),this.root=n.root||null,this.rootMargin=this._rootMarginValues.map(function(t){return t.value+t.unit}).join(" ")}function r(){return t.performance&&performance.now&&performance.now()}function o(t,e){var n=null;return function(){n||(n=setTimeout(function(){t(),n=null},e))}}function a(t,e,n,i){"function"==typeof t.addEventListener?t.addEventListener(e,n,i||!1):"function"==typeof t.attachEvent&&t.attachEvent("on"+e,n)}function s(t,e,n,i){"function"==typeof t.removeEventListener?t.removeEventListener(e,n,i||!1):"function"==typeof t.detatchEvent&&t.detatchEvent("on"+e,n)}function d(t,e){var n=Math.max(t.top,e.top),i=Math.min(t.bottom,e.bottom),r=Math.max(t.left,e.left),o=Math.min(t.right,e.right),a=o-r,s=i-n;return a>=0&&s>=0&&{top:n,bottom:i,left:r,right:o,width:a,height:s}}function c(t){var e;try{e=t.getBoundingClientRect()}catch(t){}return e?(e.width&&e.height||(e={top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.right-e.left,height:e.bottom-e.top}),e):u()}function u(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}function l(t,e){for(var n=e;n;){if(n==t)return!0;n=h(n)}return!1}function h(t){var e=t.parentNode;return e&&11==e.nodeType&&e.host?e.host:e}if("IntersectionObserver"in t&&"IntersectionObserverEntry"in t&&"intersectionRatio"in t.IntersectionObserverEntry.prototype)return void("isIntersecting"in t.IntersectionObserverEntry.prototype||Object.defineProperty(t.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}}));var f=[];i.prototype.THROTTLE_TIMEOUT=100,i.prototype.POLL_INTERVAL=null,i.prototype.observe=function(t){if(!this._observationTargets.some(function(e){return e.element==t})){if(!t||1!=t.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:t,entry:null}),this._monitorIntersections(),this._checkForIntersections()}},i.prototype.unobserve=function(t){this._observationTargets=this._observationTargets.filter(function(e){return e.element!=t}),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},i.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},i.prototype.takeRecords=function(){var t=this._queuedEntries.slice();return this._queuedEntries=[],t},i.prototype._initThresholds=function(t){var e=t||[0];return Array.isArray(e)||(e=[e]),e.sort().filter(function(t,e,n){if("number"!=typeof t||isNaN(t)||t<0||t>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return t!==n[e-1]})},i.prototype._parseRootMargin=function(t){var e=t||"0px",n=e.split(/\s+/).map(function(t){var e=/^(-?\d*\.?\d+)(px|%)$/.exec(t);if(!e)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(e[1]),unit:e[2]}});return n[1]=n[1]||n[0],n[2]=n[2]||n[0],n[3]=n[3]||n[1],n},i.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(a(t,"resize",this._checkForIntersections,!0),a(e,"scroll",this._checkForIntersections,!0),"MutationObserver"in t&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(e,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},i.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,s(t,"resize",this._checkForIntersections,!0),s(e,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},i.prototype._checkForIntersections=function(){var t=this._rootIsInDom(),e=t?this._getRootRect():u();this._observationTargets.forEach(function(i){var o=i.element,a=c(o),s=this._rootContainsTarget(o),d=i.entry,u=t&&s&&this._computeTargetAndRootIntersection(o,e),l=i.entry=new n({time:r(),target:o,boundingClientRect:a,rootBounds:e,intersectionRect:u});d?t&&s?this._hasCrossedThreshold(d,l)&&this._queuedEntries.push(l):d&&d.isIntersecting&&this._queuedEntries.push(l):this._queuedEntries.push(l)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},i.prototype._computeTargetAndRootIntersection=function(n,i){if("none"!=t.getComputedStyle(n).display){for(var r=c(n),o=r,a=h(n),s=!1;!s;){var u=null,l=1==a.nodeType?t.getComputedStyle(a):{};if("none"==l.display)return;if(a==this.root||a==e?(s=!0,u=i):a!=e.body&&a!=e.documentElement&&"visible"!=l.overflow&&(u=c(a)),u&&!(o=d(u,o)))break;a=h(a)}return o}},i.prototype._getRootRect=function(){var t;if(this.root)t=c(this.root);else{var n=e.documentElement,i=e.body;t={top:0,left:0,right:n.clientWidth||i.clientWidth,width:n.clientWidth||i.clientWidth,bottom:n.clientHeight||i.clientHeight,height:n.clientHeight||i.clientHeight}}return this._expandRectByRootMargin(t)},i.prototype._expandRectByRootMargin=function(t){var e=this._rootMarginValues.map(function(e,n){return"px"==e.unit?e.value:e.value*(n%2?t.width:t.height)/100}),n={top:t.top-e[0],right:t.right+e[1],bottom:t.bottom+e[2],left:t.left-e[3]};return n.width=n.right-n.left,n.height=n.bottom-n.top,n},i.prototype._hasCrossedThreshold=function(t,e){var n=t&&t.isIntersecting?t.intersectionRatio||0:-1,i=e.isIntersecting?e.intersectionRatio||0:-1;if(n!==i)for(var r=0;r<this.thresholds.length;r++){var o=this.thresholds[r];if(o==n||o==i||o<n!=o<i)return!0}},i.prototype._rootIsInDom=function(){return!this.root||l(e,this.root)},i.prototype._rootContainsTarget=function(t){return l(this.root||e,t)},i.prototype._registerInstance=function(){f.indexOf(this)<0&&f.push(this)},i.prototype._unregisterInstance=function(){var t=f.indexOf(this);-1!=t&&f.splice(t,1)},t.IntersectionObserver=i,t.IntersectionObserverEntry=n}(window,document);var On="3.3.0",Ln="2.0",xn="2.0",Pn="//reachms.bfmio.com/getmu",Nn="https://imasdk.googleapis.com/js/sdkloader/ima3.js",Vn="beachfrontvpaidtwoint364442147540",Un=1e3,Fn=8e3,qn=5,Bn=6e4,Wn=500,jn=6e4,Hn=500,zn=0,Gn=Object.freeze({EVENTS:["AdLoaded","AdStarted","AdStopped","AdSkipped","AdSkippableStateChange","AdSizeChange","AdLinearChange","AdDurationChange","AdExpandedChange","AdRemainingTimeChange","AdVolumeChange","AdImpression","AdVideoStart","AdVideoFirstQuartile","AdVideoMidpoint","AdVideoThirdQuartile","AdVideoComplete","AdClickThru","AdInteraction","AdUserAcceptInvitation","AdUserMinimize","AdUserClose","AdPaused","AdPlaying","AdLog","AdError"],METHODS:["handshakeVersion","initAd","startAd","stopAd","skipAd","resizeAd","pauseAd","resumeAd","expandAd","collapseAd","subscribe","unsubscribe"],GETTERS:["getAdLinear","getAdWidth","getAdHeight","getAdExpanded","getAdSkippableState","getAdRemainingTime","getAdDuration","getAdVolume","getAdCompanions","getAdIcons"],SETTERS:["setAdVolume"]}),Qn={UA:navigator.userAgent,connection:navigator.connection||navigator.mozConnection||navigator.webkitConnection},Xn=Q(function(){return/Mobi|iP(hone|ad|od)|Android|Windows Phone/.test(Qn.UA)}),Yn=(Q(function(){return/Android/.test(Qn.UA)}),Q(function(){return/iP(hone|ad|od)/.test(Qn.UA)}),Q(function(){var t=Qn.UA.match(/Chrom(e|ium)\/([0-9]+)\./);return t?Number(t[2]):-1}),Q(function(){var t=Qn.UA.match(/Firefox\/([0-9]+)\./);return t?Number(t[1]):-1}),Q(function(){var t=Qn.UA.match(/Version\/([0-9]+)\..*Safari/);return t?Number(t[1]):-1}),Q(function(){var t=[{s:"Android",r:/Android/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"Linux",r:/(Linux|X11)/},{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}],e=D(t,function(t){return t.r.test(Qn.UA)});return e?e.s:"unknown"})),$n={create:Z},Kn=Z().token,Jn=function(t){return function(e){try{e(t)}catch(t){setTimeout(function(){throw t})}}},Zn=document.createElement("a"),ti=[{domain:"doubleclick.net",param:"url"},{domain:"disqusads.com",param:"sourceUrl"}],ei=function(t){try{return st(t)}catch(e){return ct({window:t,location:tt(t.location)})}}(window),ni="inner_"+Math.random(),ii=function(){return S(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{on:function(t,e,n){var i=this;return E(t)?(t.forEach(function(t){return i.on(t,e,n)}),this):(void 0===this._listeners&&(this._listeners={}),void 0===this._listeners[t]&&(this._listeners[t]=[]),-1===bt(this._listeners[t],e)&&this._listeners[t].push({listener:e,context:n}),this)},off:function(t,e){var n=this;if(void 0===this._listeners)return this;if(E(t))return t.forEach(function(t){return n.off(t,e)}),this;if(0===arguments.length)return this._listeners=void 0,this;if(1===arguments.length)return this._listeners[t]=[],this;var i=this._listeners[t];if(void 0!==i){var r=bt(i,e);-1!==r&&i.splice(r,1)}return this},once:function(t,e,n){var i=this,r=function n(){i.off(t,n),e.apply(this,arguments)};return r[ni]=e,this.on(t,r,n),this},hasListener:function(t,e){if(void 0===this._listeners)return!1;var n=this._listeners[t];return void 0!==n&&-1!==bt(n,e)},dispatch:function(t,e){if(void 0!==this._listeners&&(v(t)&&(t={type:t}),"*"!==t.type)){var n=this._listeners["*"]||[],i=this._listeners[t.type]||[],r=n.concat(i);t.target=e||this,r.forEach(function(e){var n=e.listener,i=e.context;n.call(i,t)})}}})};Rt.create=It,Rt.extend=St;for(var ri,oi=Rt.extend({decorators:[ii],init:function(t){var e=this;this.options=Ct(this,t),this._el=Dt(this.options),this._children=[],R(this.options.children,function(t,n){e[n]=e.addChild(n,t)}),this.el().addEventListener("click",function(){return e.dispatch("click")})},addChild:function(t,e){var n=t;if(v(t)){var i=(f(e)?e.componentClass:e)||oi;e=f(e)?e:{},e.name=t,n=i.create(e)}return p(n.el)&&B(n.el())&&(this._el.appendChild(n.el()),this._children.push(n)),n},removeChild:function(t){v(t)&&(t=this.getChild(t)),t&&(this._children=this._children.filter(function(e){return e!==t}),t.el().parentNode===this._el&&this._el.removeChild(t.el()))},getChild:function(t){return D(this._children,function(e){return e.options.name===t})},getChildren:function(){return this._children},addClass:function(t){N(this._el,t)},removeClass:function(t){V(this._el,t)},hasClass:function(t){return P(this._el,t)},toggleClass:function(t){return this.hasClass(t)?this.removeClass(t):this.addClass(t)},getDimension:function(){return j(this._el)},el:function(){return this._el},hide:function(){O(this._el)},show:function(){L(this._el)},isHidden:function(){return M(this._el)},remove:function(){x(this._el)},update:function(t){R(this._children,function(e){return e.update(t)})},dispose:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dispatch("dispose"),R(this._children,function(t){return t.dispose(!1)}),t&&x(this._el),this.off()}}),ai={OFF:0,ERROR:1,WARN:2,INFO:3,DEBUG:4,ALL:5},si=(ri={DEFAULT:"black"},Rn(ri,ai.ERROR,"red"),Rn(ri,ai.WARN,"orange"),Rn(ri,ai.INFO,"blue"),Rn(ri,ai.DEBUG,"black"),ri),di=function(t,e){var n=e.events,i=e.output,r=n[0].time,o=(t.time-r)/1e3;i.innerHTML+="<strong>"+t.type+"</strong> -- "+o+" seconds<br />"},ci=function(t,e){var n=e.console,i=si[t.level]||si.DEFAULT;try{n.groupCollapsed("%c"+t.type,"color:"+i)}catch(t){}n.log(t);try{n.groupEnd()}catch(t){}},ui=function(t,e){(0,e.ping)(rt(e.endpoint,S({},e.payload,{event:t.type,metadata:JSON.stringify(t),timestamp:Date.now()})))},li=Rt.extend({random:Math.random,console:window.console,ping:at,init:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.endpoint=t.endpoint||"",this.payload=t.payload||{},this.freq=t.freq||0,this.events=[],this.level=ai.OFF,this.output=null},clear:function(){this.events=[]},setLevel:function(t){this.level=m(t)?t:ai[t]||ai.OFF},setOutput:function(t){this.output=B(t)?t:A(t)&&document.getElementById(t)},error:function(t){this.push(t,ai.ERROR)},warn:function(t){this.push(t,ai.WARN)},info:function(t){this.push(t,ai.INFO)},log:function(t){this.push(t,ai.DEBUG)},push:function(t,e){v(t)&&(t={type:t}),t.level=m(e)?e:ai.DEBUG,t.time=Date.now(),this.events.push(t),t.level<=this.level&&(ci(t,this),this.endpoint&&t.level===ai.ERROR&&this.random()<this.freq&&ui(t,this),B(this.output)&&di(t,this))}}),hi=li.create({endpoint:"http://metrics.beachfront.com/metrics/video/log",freq:.05,payload:{product:"neptune",version:On,sessionId:b(),domain:ei.location.href}}),fi=oi.extend({options:{className:"bfm-ad-poster"}}),pi=Rt.extend.call(Error,{name:"Error",defaultMessage:"",defaultCode:0,init:function(t,e){this.message=t||this.defaultMessage,this.code=e||this.defaultCode,this.stack=Error().stack||""},toString:function(){return this.name+": "+this.code+": "+this.message}}),mi=pi.extend({name:"VASTError",defaultMessage:"Undefined error",defaultCode:900,statics:{XML_PARSING_ERROR:{create:function(){return mi.create("Error parsing xml",100)}},BOTH_INLINE_AND_WRAPPER:{create:function(){return mi.create("Both InLine and Wrapper found on the same Ad",101)}},NO_INLINE_OR_WRAPPER:{create:function(){return mi.create("No InLine or Wrapper found on the Ad",101)}},NO_CREATIVE:{create:function(){return mi.create("No creative in InLine",101)}},NO_AD_TAG_URI:{create:function(){return mi.create("No VASTAdTagURI in wrapper",101)}},UNSUPPORTED_VAST_VERSION:{create:function(){return mi.create("VAST version not supported",102)}},UNSUPPORTED_VPAID_VERSION:{create:function(){return mi.create("VPAID version not supported",901)}},INVALID_VPAID_CREATIVE:{create:function(){return mi.create("Creative is not fully complaint with the VPAID spec",901)}},VPAID_ERROR:{create:function(){return mi.create("Error occurred in the VPAID ad unit",901)}},VPAID_TIMEOUT:{create:function(t){return mi.create('Timeout while waiting for event "'+t+'"',901)}},IFRAME_LOAD_ERROR:{create:function(){return mi.create("Player is unable to load iframe",901)}},UNSUPPORTED_AD_TYPE:{create:function(){return mi.create("Received an Ad type that is not supported",200)}},MEDIA_FILE_TIMEOUT:{create:function(){return mi.create("Timeout while loading the MediaFile",402)}},UNSUPPORTED_MEDIA_FILE:{create:function(){return mi.create("Could not find MediaFile supported by this player",403)}},MEDIA_FILE_ERROR:{create:function(){return mi.create("Player is unable to load the MediaFile",405)}},EXPECTED_INLINE:{create:function(){return mi.create("Expected InLine instead of Wrapper",300)}},UNAVAILABLE_AD_TAG:{create:function(){return mi.create("Error requesting VAST XML with an ad tag URL",301)}},WRAPPER_LIMIT:{create:function(){return mi.create("Wrapper limit reached",302)}},NO_AD:{create:function(){return mi.create("No Ad in VAST tree",303)}}}}),vi=Rt.extend({decorators:[ii],version:Ln,timeout:6e4,handshakeVersion:function(){return this.version},initAd:function(){},startAd:function(){},stopAd:function(){},pauseAd:function(){},resumeAd:function(){},expandAd:function(){},collapseAd:function(){},skipAd:function(){},resizeAd:function(){},setAdVolume:function(){},getAdVolume:function(){return-2},getAdWidth:function(){return 0},getAdHeight:function(){return 0},getAdRemainingTime:function(){return-2},getAdDuration:function(){return-2},getAdSkippableState:function(){return!1},getAdExpanded:function(){return!1},getAdIcons:function(){return!1},getAdCompanions:function(){return""},getAdLinear:function(){return!0},subscribe:function(t,e,n){var i=Ot(t);i[ni]=t,this.on(e,i,n)},unsubscribe:function(t,e){this.off(e,t)},nextEvent:function(t){var e=this;return new Promise(function(n){e.once(t,n)})},waitForEvent:function(t){return Promise.race([J(this.timeout).then(function(){throw mi.VPAID_TIMEOUT.create(t)}),this.nextEvent("AdError").then(function(){throw mi.VPAID_ERROR.create()}),this.nextEvent(t)])}}),Ai=pi.extend({name:"AdError",defaultMessage:"Undefined error",defaultCode:900,statics:{
AD_DISCARDED:{create:function(){return Ai.create("Ad discarded during mediation",990033)}},AD_TIMEOUT:{create:function(){return Ai.create("Ad timeout reached",990034)}},INVENTORY_TIMEOUT:{create:function(){return Ai.create("Inventory timeout reached",990035)}},EXTERNAL_TIMEOUT:{create:function(){return Ai.create("External timeout reached",990036)}},VAST_TIMEOUT:{create:function(){return Ai.create("VAST timeout reached",99001)}},VAST_OPT_OUT:{create:function(){return Ai.create("VAST opt-out occurred",99002)}},VPAID_OPT_OUT:{create:function(){return Ai.create("VPAID opt-out occurred",990031)}},TECH_ERROR:{create:function(){return Ai.create("Tech error",990032)}}}}),gi={create:Lt},_i={AD_LOAD:"source.adLoad",AD_START:"source.adStart",AD_ERROR:"source.adError"},Ei=new DOMParser,yi=new XMLSerializer,Ti=/^\s*$/,wi=/^(?:true|false)$/i,ki="http://www.w3.org/1999/xhtml",bi=function(){try{return Ei.parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI}catch(t){return ki}}(),Ri=function(t){return"@"+w(t)},Ii=Rt.extend({init:function(t){if(t.documentElement&&(t=t.documentElement),this._domNode=t,t.hasChildNodes()){for(var e="",n=0;n<t.childNodes.length;n++){var i=t.childNodes.item(n);if(3===i.nodeType||4===i.nodeType)e+=3===i.nodeType?i.nodeValue.trim():i.nodeValue;else if(1===i.nodeType&&!i.prefix){var r=w(i.nodeName),o=Ii.create(i);_(this,r)?(this[r].constructor!==Array&&(this[r]=[this[r]]),this[r].push(o)):this[r]=o}}e&&(this.keyValue=Nt(e))}if(t.hasAttributes())for(var a=0;a<t.attributes.length;a++){var s=t.attributes.item(a),d=s.name,c=s.value;this[Ri(d)]=Nt(c.trim())}},toXmlString:function(){return yi.serializeToString(this._domNode)},nodeName:function(){return this._domNode.nodeName},attr:function(t){return this[Ri(t)]}}),Si=Y(Ii.create,Pt),Ci={get:qt,post:Bt,send:Wt},Di={headers:{},data:{},withCredentials:!1,retryWithoutCredentials:!1,timeout:6e4,timeoutId:-1,cancelToken:null},Mi=Rt.extend({init:function(t){this.adTitle=Vt(t.adTitle),this.adSystem=Vt(t.adSystem),this.impressions=ue(t.impression),this.creatives=pe(t.creatives),this.description=Vt(t.description),this.advertiser=Vt(t.advertiser),this.pricing=Vt(t.pricing),this.errors=ce(t.error),this.surveys=le(t.survey),this.extensions=me(t.extensions)}}),Oi=Rt.extend({init:function(t){this.adSystem=Vt(t.adSystem),this.vastAdTagUri=Vt(t.vASTAdTagURI),this.impressions=ue(t.impression),this.errors=ce(t.error),this.creatives=pe(t.creatives),this.extensions=me(t.extensions),this.allowMultipleAds=Ut(t,"allowMultipleAds"),this.fallbackOnNoAd=Ut(t,"fallbackOnNoAd"),this.followAdditionalWrappers=!l(Ut(t,"followAdditionalWrappers"))||Ut(t,"followAdditionalWrappers")}}),Li=Rt.extend({statics:{TYPE:"beachfront-io",isType:function(t){return t&&"beachfront-io"===t.type}},init:function(t){this.vpaidMeta=Zt(t.vpaidMeta),this.priorities=te(t.priorities),this.viewability=ee(t.viewability),this.tracking=ne(t.tracking),this.jSInjects=ie(t.jSInjects)},merge:function(t){t&&t.data&&(this.vpaidMeta=this.vpaidMeta?I({},t.data.vpaidMeta,this.vpaidMeta):t.data.vpaidMeta,this.priorities=this.priorities?I({},t.data.priorities,this.priorities):t.data.priorities,this.viewability=this.viewability?I({},t.data.viewability,this.viewability):t.data.viewability,E(t.data.jSInjects)&&(this.jSInjects=this.jSInjects.concat(t.data.jSInjects)))},getAdvertiser:function(){return this.vpaidMeta&&this.vpaidMeta.advertiser},getCampaignId:function(){return this.vpaidMeta&&this.vpaidMeta.campaignid},getTimeout:function(){return this.vpaidMeta&&this.vpaidMeta.to},getGlobalTimeout:function(){return this.vpaidMeta&&this.vpaidMeta.gto},getResponseUrl:function(){return this.vpaidMeta&&this.vpaidMeta.rurl},getCreativeUploadUrl:function(){return this.vpaidMeta&&this.vpaidMeta.crurl},getMarketplace:function(){return this.priorities&&this.priorities.marketplace},getLevel:function(){return this.priorities&&this.priorities.level},getWeight:function(){return this.priorities&&this.priorities.weight},isMoatEnabled:function(){return Boolean(this.viewability&&this.viewability.moat)},getMoatImpression:function(){return this.viewability&&this.viewability.moat_imp},getImpressionId:function(){return this.viewability&&this.viewability.appid},getTimeStamp:function(){return this.viewability&&this.viewability.ts},getTransactionId:function(){return this.viewability&&this.viewability.rid},getTrackingStart:function(){return this.tracking&&this.tracking.start},getTrackingComplete:function(){return this.tracking&&this.tracking.complete}}),xi=Rt.extend({init:function(t){this.id=t.attr("id"),this.sequence=t.attr("sequence"),t.inLine&&(this.inLine=Mi.create(t.inLine)),t.wrapper&&(this.wrapper=Oi.create(t.wrapper))},findExtension:function(t){return this.inLine?D(this.inLine.extensions,t):this.wrapper?D(this.wrapper.extensions,t):null},findIOExtension:function(){return this.findExtension(Li.isType)}}),Pi=Rt.extend({init:function(t,e){this.uri=Vt(t),this.name=t.attr("event"),"progress"===this.name&&(this.offset=re(t.attr("offset"),e))}}),Ni=Rt.extend({init:function(t){this.clickThrough=Vt(t.clickThrough),this.clickTrackings=he(t.clickTracking),this.customClicks=he(t.customClick)}}),Vi=Rt.extend({init:function(t){this.duration=ae(Vt(t.duration)),this.mediaFiles=ve(t.mediaFiles),this.trackingEvents=fe(t.trackingEvents,this.duration),this.skipoffset=re(Ut(t,"skipoffset"),this.duration),this.icons=Ae(t.icons),t.videoClicks&&(this.videoClicks=Ni.create(t.videoClicks)),t.adParameters&&(this.adParameters=Vt(t.adParameters),Ut(t.adParameters,"xmlEncoded")&&(this.adParameters=Ft(this.adParameters)))}}),Ui=Rt.extend({init:function(t){this.id=t.attr("id"),this.sequence=t.attr("sequence"),this.adId=t.attr("adId"),this.apiFramework=t.attr("apiFramework"),t.linear?this.linear=Vi.create(t.linear):t.companionAds&&(this.companionAds=ge(t.companionAds))}}),Fi=Rt.extend({init:function(t){this.type=t.attr("type"),this.type===Li.TYPE?this.data=Li.create(t):this.data=t}}),qi=Rt.extend({init:function(t){this.src=Vt(t),this.delivery=t.attr("delivery"),this.type=t.attr("type"),this.width=t.attr("width"),this.height=t.attr("height"),this.codec=t.attr("codec"),this.id=t.attr("id"),this.bitrate=t.attr("bitrate"),this.minBitrate=t.attr("minBitrate"),this.maxBitrate=t.attr("maxBitrate"),this.scalable=t.attr("scalable"),this.maintainAspectRatio=t.attr("maintainAspectRatio"),this.apiFramework=t.attr("apiFramework")},isVPAID:function(){return"VPAID"===this.apiFramework}}),Bi=Rt.extend({init:function(t){this.clickThrough=Vt(t.iconClickThrough),this.clickTrackings=he(t.iconClickTracking)}}),Wi=Rt.extend({init:function(t){this.program=t.attr("program"),this.width=t.attr("width"),this.height=t.attr("height"),this.xPosition=t.attr("xPosition"),this.yPosition=t.attr("yPosition"),this.duration=ae(t.attr("duration")),this.offset=re(t.attr("offset")),this.apiFramework=t.attr("apiFramework"),this.viewTracking=he(t.iconViewTracking),t.iconClicks&&(this.iconClicks=Bi.create(t.iconClicks)),this.htmlResource=Vt(t.hTMLResource),this.iframeResource=Vt(t.iFrameResource),this.staticResource=Vt(t.staticResource),this.creativeType=Ut(t.staticResource,"creativeType")}}),ji=Rt.extend({init:function(t){this.width=t.attr("width"),this.height=t.attr("height"),this.id=t.attr("id"),this.expandedWidth=t.attr("expandedWidth"),this.expandedHeight=t.attr("expandedHeight"),this.apiFramework=t.attr("apiFramework"),this.altText=Vt(t.altText),this.clickThrough=Vt(t.companionClickThrough),this.clickTracking=Vt(t.companionClickTracking),this.trackingEvents=fe(t.trackingEvents),this.htmlResource=Vt(t.hTMLResource),this.iframeResource=Vt(t.iFrameResource),this.staticResource=Vt(t.staticResource),this.creativeType=Ut(t.staticResource,"creativeType"),t.adParameters&&(this.adParameters=Vt(t.adParameters),Ut(t.adParameters,"xmlEncoded")&&(this.adParameters=Ft(this.adParameters))),this.toXmlString=Q(function(){return t.toXmlString()})}}),Hi=Rt.extend({init:function(t){var e=t.vpaids?y(t.vpaids).map(function(t){return t.ad}):t.ad;this.version=Ut(t,"version"),this.ads=de(e),this.errors=ce(t.error)}}),zi=Rt.extend({ping:at,fetchVAST:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c;$(ye,Te,we)(t,n,function(n,r){hi.push({type:"vast.fetched",adTag:t,error:String(n)},n?ai.WARN:ai.DEBUG),n&&r&&be(r,n,e.ping),i(n,r)})},processVAST:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c;$(_e)(t,n,function(n,r){hi.push({type:"vast.processed",adId:t.id,error:String(n)},n?ai.WARN:ai.DEBUG),n&&r&&be(r,n,e.ping),i(n,r)})}}),Gi=Object.freeze({EVENTS:["abort","canplay","canplaythrough","durationchange","emptied","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"],PROPS:["audioTracks","autoplay","buffered","controller","controls","crossOrigin","currentSrc","currentTime","defaultMuted","defaultPlaybackRate","duration","ended","error","loop","mediaGroup","muted","networkState","paused","playbackRate","played","preload","readyState","seekable","seeking","src","startDate","textTracks","type","volume"]}),Qi=document.createElement("video"),Xi={create:De},Yi=function(t){return t.enabled&&!t.triggered},$i=function(t,e){return g(t)?parseFloat(t)/100*e:parseFloat(t)},Ki=function(t){return function(e){var n=$i(e.offset,t.duration);t.currentTime>=n&&(e.triggered=!0,setTimeout(function(){return e.handler({offset:e.offset})},0))}},Ji=Object.freeze({FLASH:["application/x-shockwave-flash"],HTML5:["text/javascript","text/javascript1.0","text/javascript1.2","text/javascript1.4","text/jscript","application/javascript","application/x-javascript","text/ecmascript","text/ecmascript1.0","text/ecmascript1.2","text/ecmascript1.4","text/livescript","application/ecmascript","application/x-ecmascript"],VIDEO:["video/mp4","video/webm","video/ogg"],IMAGE:["image/gif","image/jpeg","image/png"]}),Zi=oi.extend({autoBind:!0,options:{className:"bfm-companion-view"},init:function(t,e){oi.call(this),this.slot=t,this.data=e},inject:function(){var t=this.el(),e=this.slot,n=this.data,i=n.width,r=n.height,o=n.trackingEvents;t.style.position="relative",t.style.width=e.style.width=$t(i),t.style.height=e.style.height=$t(r),e.appendChild(t),this._fill(),R(o,function(t){"creativeView"===t.name&&at(t.uri)})},_fill:function(){var t=this.data,e=t.width,n=t.height,i=t.htmlResource,r=t.iframeResource,o=t.staticResource,a=this.el();if(i){var s=Le();a.appendChild(s);(s.contentWindow&&s.contentWindow.document||s.contentDocument).write(Me(i))}else if(r){var d=Le(r,e,n);a.appendChild(d)}else if(o){var c=Le();a.appendChild(c);var u=c.contentWindow&&c.contentWindow.document||c.contentDocument;u.write(Me(Oe(this.data))),u.body.addEventListener("click",this._handleClick)}},_handleClick:function(){var t=this.data,e=t.clickThrough,n=t.clickTracking;e&&window.open(e),n&&at(n)}}),tr={AD_LOAD:"module.adLoad",AD_START:"module.adStart",AD_STOP:"module.adStop",AD_ERROR:"module.adError",AD_CANCEL:"module.adCancel"},er=[{id:"bfm_comp_any",matches:function(){return!0}},{id:"bfm_comp_300x250",matches:Se({width:300,height:250})},{id:"bfm_comp_300x60",matches:Se({width:300,height:60})},{id:"bfm_comp_728x90",matches:Se({width:728,height:90})}],nr=function(t){return function(e){var n=document.getElementById(e.id),i=D(t,e.matches);return n&&i?(L(n),Zi.create(n,i)):null}},ir=oi.extend({options:{className:"bfm-progress-circle",children:{leftCircle:{className:"bfm-circle-part"},rightCircle:{className:"bfm-circle-part"}}},setProgress:function(t,e){t=Pe(t,0,1);var n=void 0,i=void 0,r="";e?(n="rotate("+(360*t-180)+"deg)",i="rotate("+180*Math.max(2*t-1,0)+"deg)",this.el().style.clip=t<.5?"auto":"",this.addClass("bfm-invert")):(n="rotate("+360*t+"deg)",i="rotate("+180*Math.min(2*t,1)+"deg)",r=1===t?"auto":"",this.el().style.clip=t>.5?"auto":"",this.removeClass("bfm-invert")),I(this.leftCircle.el().style,{transform:n,webkitTransform:n,clip:r}),I(this.rightCircle.el().style,{transform:i,webkitTransform:i,clip:r})}}),rr=oi.extend({options:{hide:!0,invert:!0,className:"bfm-ad-countdown",children:{label:{className:"bfm-ad-countdown-label",textContent:"Ad"},time:{className:"bfm-ad-countdown-time"},progress:ir}},init:function(t){oi.call(this,t),this.initialRemainingTime=-1},update:function(t,e){if(this.initialRemainingTime=this.initialRemainingTime<0?t:this.initialRemainingTime,e=e<0?this.initialRemainingTime:e,t<0||e<0)this.hide();else{var n=1-t/e;this.show(),this.setProgress(n),this.setRemainingTime(t)}},setProgress:function(t){this.progress.setProgress(t,this.options.invert)},setRemainingTime:function(t){this.time.el().textContent=Math.round(t)||0}}),or=["ext","aid","isexch","isOwn","pc","adser","c","dspid","seatid","adomain","bidcrid","wr","settle"],ar=oi.extend({options:{className:"bfm-ad-skip-button",children:{label:{className:"bfm-ad-skip-button-label",textContent:"Skip Ad"}}}}),sr=function(t,e){return t-e>3e3},dr=function(t){return function(e){return m(e.offset)&&e.offset<=t}},cr=Rt.extend({ping:at,init:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.response=t,this.assetUri=e.assetUri||"",this.duration=e.duration||0,this.progress=e.progress||0,this._tracked=[]},isTrackedOnce:function(t){return C(this._tracked,t)},trackUrls:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};E(t)&&t.length>0&&(e=S({ASSETURI:this.assetUri,CONTENTPLAYHEAD:se(this.progress),"\\${IO_DUR}":Math.round(this.duration)},e),this.ping(t,e))},trackEvent:function(t,e){if(!C(this._tracked,t)){var n=this.response.trackingEvents[t];if(E(n)){var i=n.map(function(t){return t.uri}).filter(Boolean);this.trackUrls(i)}e&&this._tracked.push(t),hi.log({type:"ad.trackEvent",eventName:t,adId:this.response.ads[0].id})}},trackProgress:function(t){var e=this;if(m(t)){sr(this.progress,t)&&this.trackRewind();var n=this.response.trackingEvents.progress,i=function(t){return!C(e._tracked,t)};if(E(n)){var r=n.filter(i).filter(dr(t)),o=r.map(function(t){return t.uri}).filter(Boolean);this._tracked=this._tracked.concat(r),this.trackUrls(o)}this.progress=t}},trackError:function(t){this.trackUrls(this.response.errorURLMacros,{ERRORCODE:t||900}),hi.log({type:"ad.trackEvent",eventName:"error",adId:this.response.ads[0].id})},trackImpressions:function(){this.trackUrls(this.response.impressions),hi.log({type:"ad.trackEvent",eventName:"impression",adId:this.response.ads[0].id})},trackClick:function(){this.trackUrls(this.response.clickTrackings),hi.log({type:"ad.trackEvent",eventName:"click",adId:this.response.ads[0].id})},trackCreativeView:function(){this.trackEvent("creativeView",!0)},trackFirstQuartile:function(){this.trackEvent("firstQuartile",!0)},trackMidpoint:function(){this.trackEvent("midpoint",!0)},trackThirdQuartile:function(){this.trackEvent("thirdQuartile",!0)},trackComplete:function(){this.trackEvent("complete",!0)},trackRewind:function(){this.trackEvent("rewind")},trackFullscreen:function(){this.trackEvent("fullscreen")},trackExitFullscreen:function(){this.trackEvent("exitFullscreen")},trackPause:function(){this.trackEvent("pause")},trackResume:function(){this.trackEvent("resume")},trackMute:function(){this.trackEvent("mute")},trackUnmute:function(){this.trackEvent("unmute")},trackAcceptInvitation:function(){this.trackEvent("acceptInvitation")},trackAcceptInvitationLinear:function(){this.trackEvent("acceptInvitationLinear")},trackCollapse:function(){this.trackEvent("collapse")},trackExpand:function(){this.trackEvent("expand")},trackStart:function(){this.trackEvent("start",!0)},trackSkip:function(){this.trackEvent("skip",!0)},trackClose:function(){this.trackEvent("close",!0)},trackCloseLinear:function(){this.trackEvent("closeLinear",!0)}}),ur=vi.extend({init:function(t,e,n){this._video=t,this._src=e,this._companionAds=n,this._width=null,this._height=null,this._viewMode=null,this.type="VAST"},pauseAd:function(){this._video.pause()},resumeAd:function(){this._video.play()},resizeAd:function(t,e,n){this._width=t,this._height=e,this._viewMode=n,this.dispatch("AdSizeChange")},setAdVolume:function(t){t=Pe(t,0,1),this._video.volume=t,this._video.muted=!t},getAdVolume:function(){return this._video.muted?0:this._video.volume},getAdWidth:function(){return this._width},getAdHeight:function(){return this._height},getAdRemainingTime:function(){return this._video.duration-this._video.currentTime},getAdDuration:function(){return this._video.duration},getAdCompanions:function(){return"<CompanionAds>"+this._companionAds.map(function(t){return t.toXmlString()})+"</CompanionAds>"}}),lr=$(We,je,He,ze),hr=$(Ge,Qe,Ve,Ne,xe,Be,qe,Ue,Xe,Ye),fr=Object.freeze({loadAd:lr,playAd:hr}),pr=Object.freeze({NORMAL:"normal",FULLSCREEN:"fullscreen",THUMBNAIL:"thumbnail"}),mr=["skipAd"],vr=Gn.METHODS.filter(function(t){return!C(mr,t)}),Ar=vi.extend({decorators:[tn],init:function(t,e,n,i){if(!$e(t))throw mi.INVALID_VPAID_CREATIVE.create();this.creative=t,this.slot=e,this.videoSlot=n,this.iframe=i,this.type="VPAID",Ze(e),en.call(this)},handshakeVersion:function(t){var e=this;return Promise.resolve().then(function(){return e.creative.handshakeVersion(t)})},initAd:function(t,e,n,i,r,o){var a=this,s=this.slot,d=this.videoSlot;return o=S({slot:s,videoSlot:d},o),new Promise(function(s,d){a.waitForEvent("AdLoaded").then(s,d),a.creative.initAd(t,e,n,i,r,o)})},startAd:function(){var t=this;return new Promise(function(e,n){t.waitForEvent("AdStarted").then(e,n),t.creative.startAd()})},stopAd:function(){var t=this;return new Promise(function(e,n){t.waitForEvent("AdStopped").then(e,n),t.creative.stopAd()})},pauseAd:function(){var t=this;return new Promise(function(e,n){t.waitForEvent("AdPaused").then(e,n),t.creative.pauseAd()})},resumeAd:function(){var t=this;return new Promise(function(e,n){t.waitForEvent("AdPlaying").then(e,n),t.creative.resumeAd()})},expandAd:function(){var t=this;return new Promise(function(e,n){t.waitForEvent("AdExpandedChange").then(e,n),t.creative.expandAd()})},collapseAd:function(){var t=this;return new Promise(function(e,n){t.waitForEvent("AdExpandedChange").then(e,n),t.creative.collapseAd()})},skipAd:function(){var t=this;return new Promise(function(e,n){t.waitForEvent("AdSkipped").then(e,n),t.creative.skipAd()})},resizeAd:function(t,e,n){var i=this;return new Promise(function(r,o){i.waitForEvent("AdSizeChange").then(r,o),i.creative.resizeAd(t,e,n)})},setAdVolume:function(t){var e=this;return new Promise(function(n,i){e.waitForEvent("AdVolumeChange").then(n,i),e.creative.setAdVolume(t)})}}),gr=Rt.extend({timeout:8e3,init:function(t,e){this.el=t,this.video=e},loadAd:function(t){var e=this,n=Ke(this.el,'<!DOCTYPE html>\n\t<html lang="en">\n\t\t<head><meta charset="UTF-8"></head>\n\t\t<body style="margin:0; padding:0">\n\t\t\t<div id="ad-element"></div>\n\t\t</body>\n\t</html>');return Promise.resolve().then(function(){return n.contentWindow.document.body}).catch(function(){throw mi.IFRAME_LOAD_ERROR.create()}).then(function(n){return Promise.race([J(e.timeout).then(function(){throw mi.MEDIA_FILE_TIMEOUT.create()}),H(t,n).catch(function(){throw mi.MEDIA_FILE_ERROR.create()})])}).then(function(){var t=n.contentWindow.getVPAIDAd(),i=n.contentWindow.document.getElementById("ad-element");return Ar.create(t,i,e.video,n)}).catch(function(t){throw x(n),t})}}),_r=Rt.extend({decorators:[nn],init:function(t){this._video=t||document.createElement("video"),this._listeners=[]},dispose:function(){var t=this;this._video&&this._listeners.forEach(function(e){t._video.removeEventListener(e.type,e.listener,e.useCapture)}),this._video=null,this._listeners=[]},addEventListener:function(t,e,n){if(this._video){var i=rn(t,e,n);D(this._listeners,function(t){return t.key===i})||(this._video.addEventListener(t,e,n),this._listeners.push({type:t,listener:e,useCapture:n,key:i}))}},removeEventListener:function(t,e,n){if(this._video){var i=rn(t,e,n),r=D(this._listeners,function(t){return t.key===i});r&&(this._video.removeEventListener(t,e,n),this._listeners=this._listeners.filter(function(t){return t!==r}))}},replace:function(t){var e=this;this._video&&(this._listeners.forEach(function(t){e._video.removeEventListener(t.type,t.listener,t.useCapture)}),t.playbackRate=this._video.playbackRate,t.muted=this._video.muted,t.volume=this._video.volume,t.type=this._video.type,t.src=this._video.src,t.load(),this._listeners.forEach(function(e){t.addEventListener(e.type,e.listener,e.useCapture)}),this._video.src=""),this._video=t},setAttribute:function(t,e){this._video&&this._video.setAttribute(t,e)},canPlayType:function(t){return this._video?this._video.canPlayType(t):""},load:function(){this._video&&this._video.load()},play:function(){if(this._video)return this._video.play()},pause:function(){this._video&&this._video.pause()},click:function(){this._video&&p(this._video.click)&&this._video.click()}}),Er=$(on,an,sn,dn,cn,un,ln,xe,Be,qe,Ue),yr=$(hn,fn),Tr=Object.freeze({loadAd:Er,playAd:yr}),wr=vi.extend({init:function(t){this.adModule=t,this.type="IMA"},stopAd:function(){try{this.adModule.adsManager.stop()}catch(t){}},pauseAd:function(){try{this.adModule.adsManager.pause()}catch(t){}},resumeAd:function(){try{this.adModule.adsManager.resume()}catch(t){}},skipAd:function(){try{this.adModule.adsManager.skip()}catch(t){}},resizeAd:function(t,e,n){try{this.adModule.adsManager.resize(t,e,n)}catch(t){}},setAdVolume:function(t){t=Pe(t,0,1);try{this.adModule.adsManager.setVolume(t)}catch(t){}},getAdVolume:function(){try{return this.adModule.adsManager.getVolume()}catch(t){return-2}},getAdWidth:function(){var t=this.adModule,e=t.currentAd,n=t.container,i=n.getDimension();try{return e.getWidth()||i.width}catch(t){return i.width}},getAdHeight:function(){var t=this.adModule,e=t.currentAd,n=t.container,i=n.getDimension();try{return e.getHeight()||i.height}catch(t){return i.height}},getAdRemainingTime:function(){try{return this.adModule.adsManager.getRemainingTime()}catch(t){return-2}},getAdDuration:function(){try{return this.adModule.currentAd.getDuration()}catch(t){return-2}},getAdSkippableState:function(){try{return this.adModule.adsManager.getAdSkippableState()}catch(t){return!1}},getAdLinear:function(){try{return this.adModule.currentAd.isLinear()}catch(t){return!0}}}),kr=750,br=12e3,Rr=400,Ir=$(pn,mn,Be,qe,Ue),Sr=$(An),Cr=Object.freeze({IMA_STOP_DELAY:kr,IMA_LOAD_TIMEOUT:br,IMA_MAX_BITRATE:Rr,loadAd:Ir,playAd:Sr}),Dr=Rt.extend({autoBind:!0,decorators:[ii],init:function(t,e){var n=this;this.adResponse=t,this.slot=e.slot,this.video=e.videoSlot,this.macroVars=e.macroVars,this.imaPromise=e.imaPromise,this.settings=e.settings,this.initialVolume=e.initialVolume,this.cancelSource=$n.create(),this.adUnit=null,this.container=oi.create({className:"bfm-vast-container"}),this.integrator=t.useIMA()?Cr:t.useVPAID()?Tr:fr,this._dispatchVideoEvent=function(t){return n.dispatch("video."+t.type)},this._inject()},_inject:function(){this.slot.insertBefore(this.container.el(),this.slot.firstChild),B(this.video)&&!this.video.parentNode&&this.container.el().appendChild(this.video)},_dispose:function(){this._unlinkVideoEvents(),this.container.dispose()},_linkVideoEvents:function(){var t=this;Gi.EVENTS.forEach(function(e){return t.video.addEventListener(e,t._dispatchVideoEvent)})},_unlinkVideoEvents:function(){var t=this;Gi.EVENTS.forEach(function(e){return t.video.removeEventListener(e,t._dispatchVideoEvent)})},loadAd:function(){var t=this;this._linkVideoEvents(),this.once([tr.AD_STOP,tr.AD_ERROR,tr.AD_CANCEL],this._dispose),this.cancelSource.token.subscribe(function(){return t.dispatch(tr.AD_CANCEL)}),this.integrator.loadAd(this,function(e){e?(hi.warn({type:"ad.error",adId:t.adResponse.ads[0].id,error:String(e)}),t.adResponse.trackError(e.code),t.dispatch({type:tr.AD_ERROR,adId:t.adResponse.ads[0].id,error:e})):t.dispatch({type:tr.AD_LOAD,adId:t.adResponse.ads[0].id})})},playAd:function(){var t=this;this.integrator.playAd(this,function(e){e?(hi.warn({type:"ad.error",adId:t.adResponse.ads[0].id,error:String(e)}),t.adResponse.trackError(e.code),t.dispatch({type:tr.AD_ERROR,adId:t.adResponse.ads[0].id,error:e})):t.dispatch({type:tr.AD_STOP,adId:t.adResponse.ads[0].id})})}}),Mr=Rt.extend({init:function(t){var e=this;this._linearAdded=!1,this.ads=[],this.errorURLMacros=[],this.impressions=[],this.clickTrackings=[],this.customClicks=[],this.trackingEvents={},this.mediaFiles=[],this.icons=[],this.companionAds=[],this.clickThrough=void 0,this.adTitle="",this.duration=void 0,this.skipoffset=void 0,this.extensions=[],this.googleAd=t&&kt(t[t.length-1]),R(t,function(t){return e._addAd(t)})},_addAd:function(t){if(t instanceof xi){var e=t.inLine,n=t.wrapper;this.ads.push(t),e&&this._addInLine(e),n&&this._addWrapper(n)}},_addInLine:function(t){var e=this;t instanceof Mi&&(this._addTitle(t.adTitle),this._addErrorTrackUrl(t.errors),this._addImpressions(t.impressions),this._addExtensions(t.extensions),t.creatives.forEach(function(t){t.linear?e._addLinear(t.linear):t.companionAds&&e._addCompanionAds(t.companionAds)}))},_addWrapper:function(t){var e=this;t instanceof Oi&&(this._addErrorTrackUrl(t.errors),this._addImpressions(t.impressions),this._addExtensions(t.extensions),t.creatives.forEach(function(t){t.linear?(e._addVideoClicks(t.linear.videoClicks),e.clickThrough=void 0,e._addTrackingEvents(t.linear.trackingEvents),e._addIcons(t.linear.icons)):t.companionAds&&e._addCompanionAds(t.companionAds)}))},_addErrorTrackUrl:function(t){var e=this,n=t instanceof Ii?Vt(t):t;n&&y(n).forEach(function(t){return e.errorURLMacros.push(t)})},_addImpressions:function(t){var e=this;E(t)&&t.forEach(function(t){return e.impressions.push(t)})},_addExtensions:function(t){var e=this;E(t)&&t.forEach(function(t){var n=void 0;Li.isType(t)&&(n=e.findIOExtension()),n?n.data.merge(t):e.extensions.push(t)})},_addClickThrough:function(t){A(t)&&(this.clickThrough=t)},_addClickTrackings:function(t){var e=this;E(t)&&t.forEach(function(t){return e.clickTrackings.push(t)})},_addCustomClicks:function(t){var e=this;E(t)&&t.forEach(function(t){return e.customClicks.push(t)})},_addTrackingEvents:function(t){var e=this;t&&y(t).forEach(function(t){e.trackingEvents[t.name]=e.trackingEvents[t.name]||[],e.trackingEvents[t.name].push(t)})},_addTitle:function(t){A(t)&&(this.adTitle=t)},_addDuration:function(t){m(t)&&(this.duration=t)},_addVideoClicks:function(t){t instanceof Ni&&(this._addClickThrough(t.clickThrough),this._addClickTrackings(t.clickTrackings),this._addCustomClicks(t.customClicks))},_addMediaFiles:function(t){var e=this;E(t)&&t.forEach(function(t){return e.mediaFiles.push(t)})},_addSkipoffset:function(t){t&&(this.skipoffset=t)},_addIcons:function(t){var e=this;E(t)&&t.forEach(function(t){return e.icons.push(t)})},_addAdParameters:function(t){t&&(this.adParameters=t)},_addLinear:function(t){t instanceof Vi&&(this._addDuration(t.duration),this._addTrackingEvents(t.trackingEvents),this._addVideoClicks(t.videoClicks),this._addMediaFiles(t.mediaFiles),this._addSkipoffset(t.skipoffset),this._addIcons(t.icons),this._addAdParameters(t.adParameters),this._linearAdded=!0)},_addCompanionAds:function(t){var e=this;E(t)&&t.forEach(function(t){return e.companionAds.push(t)})},hasLinear:function(){return this._linearAdded},findIOExtension:function(){return D(this.extensions,Li.isType)},trackError:function(t){var e={ERRORCODE:t||900};at(this.errorURLMacros,e)},useVPAID:function(){var t=this.mediaFiles.filter(function(t){return t.isVPAID()}),e=this.mediaFiles.filter(function(t){return Qi.canPlayType(t.type)});return 0!==t.length&&0===e.length},useIMA:function(){return Boolean(this.googleAd)},validate:function(){if(!this.hasLinear())throw mi.UNSUPPORTED_AD_TYPE.create()}}),Or=Rt.extend({ping:at,init:function(t){this.adResponse=t,this.tracked=!1},trackResponse:function(t,e){if(!this.tracked){var n=this.adResponse&&this.adResponse.findIOExtension(),i=n&&n.data.getResponseUrl(),r=e?e.code||900:void 0;i&&(this.tracked=!0,this.ping(i,{RES_TIME:t,ER_CODE:r}),hi.info({type:"health.trackResponse",adId:this.adResponse.ads[0].id,time:t,error:String(e)}))}}}),Lr=Rt.extend({autoBind:!0,decorators:[ii],init:function(t,e){this.id=t.id,this.firstAd=t,this.weight=wt(t),this.env=S({},e),this.cancelSource=$n.create(),this._adHealth=null,this._adModule=null,this._adTimer=gi.create(),this._vastClient=zi.create()},_setVastTimeout:function(){var t=this,e=function(){return t.cancelSource.cancel(Ai.VAST_TIMEOUT.create())},n=Tt();this._vastTimeoutId=setTimeout(e,n)},_setAdTimeout:function(){var t=this,e=function(){return t.cancelSource.cancel(Ai.AD_TIMEOUT.create())},n=this._adTimer.currentTime(),i=yt(this.firstAd,n);this._adTimeoutId=setTimeout(e,i),hi.info({type:"ad.setAdTimeout",adId:this.firstAd.id,timeout:i})},_trackResponse:function(t){this._adTimer.stop();var e=this._adTimer.currentTime();this._adHealth&&this._adHealth.trackResponse(e,t)},_vastHandler:function(t,e){var n=Mr.create(e);this._adHealth=Or.create(n),clearTimeout(this._vastTimeoutId),t?(clearTimeout(this._adTimeoutId),t=t&&303===t.code?Ai.VAST_OPT_OUT.create():t,this._trackResponse(t),this.dispatch(_i.AD_ERROR)):(this._adModule=Dr.create(n,this.env),this.cancelSource.token.subscribe(this._adModule.cancelSource.cancel),this._adModule.once([tr.AD_CANCEL,tr.AD_ERROR,tr.AD_LOAD],this._adLoadHandler),this._adModule.loadAd())},_adLoadHandler:function(t){var e=t.error;clearTimeout(this._adTimeoutId),t.type===tr.AD_LOAD?(hi.info({type:"ad.loaded",adId:this.firstAd.id,weight:this.weight}),this._adTimer.stop(),this.dispatch(_i.AD_LOAD)):(e=e&&e.code&&901!==e.code?e:Ai.TECH_ERROR.create(),this._trackResponse(e),this.dispatch(_i.AD_ERROR))},_adStartHandler:function(t){var e=t.error;clearTimeout(this._adTimeoutId),t.type===tr.AD_START?(hi.info({type:"ad.started",adId:this.firstAd.id,weight:this.weight}),this._trackResponse(),this.dispatch(_i.AD_START)):(e=e&&e.code&&901!==e.code?e:Ai.VPAID_OPT_OUT.create(),this._trackResponse(e),this.dispatch(_i.AD_ERROR))},loadAd:function(){hi.info({type:"ad.loading",adId:this.firstAd.id,weight:this.weight});var t=this.env,e=t.settings,n=t.macroVars,i=e.ima_enabled?kt:null;this._setVastTimeout(),this._setAdTimeout(),this._adTimer.start(),this._vastClient.processVAST(this.firstAd,{cancelToken:this.cancelSource.token,shouldStop:i,macroVars:n},this._vastHandler),this.cancelSource.token.subscribe(this._trackResponse)},startAd:function(){this._adModule&&(hi.info({type:"ad.starting",adId:this.firstAd.id,weight:this.weight}),this._adModule.once([tr.AD_CANCEL,tr.AD_ERROR,tr.AD_START],this._adStartHandler),this._setAdTimeout(),this._adTimer.start(),this._adModule.playAd())}}),xr={create:gn},Pr=function(t,e){return e.weight-t.weight},Nr=function(t,e){return e.ad.weight-t.ad.weight},Vr=function(t){return function(e){return{status:t,ad:e}}},Ur=function(t){return function(e){return{status:t,ad:e.ad}}},Fr=function(t){return function(e){return e.status===t}},qr=function(t){return function(e){return e.status!==t}},Br={create:En},Wr={START_ADS:"StartAds",CANCEL_ADS:"CancelAds",AD_LOADED:"AdLoaded",AD_STARTED:"AdStarted",AD_ERROR:"AdError",DELAY_COMPLETE:"DelayComplete"},jr={startAds:function(t){var e=t.time,n=t.ads;return function(t,i){var r=i.data,o=r.concurrency,a=void 0===o?1:o,s=r.delay,d=void 0===s?0:s,c={delay:d,startTime:e},u=n.slice().sort(Pr).map(Vr("pending"));u.slice(0,a).forEach(function(t){t.status="loading",t.ad.loadAd()}),t({type:Wr.START_ADS,tasks:u,data:c})}},adLoaded:function(t){var e=t.time,n=t.ad;return function(t,i){var r=i.tasks.filter(function(t){return t.ad!==n}),o=i.tasks.every(function(t){return n.weight>=t.ad.weight}),a=D(r,Fr("starting")),s=D(r,Fr("loading")),d=e-i.data.startTime>=i.data.delay||o||!s,c=[];a||!d?c.push({status:"loaded",ad:n}):(n.startAd(),c.push({status:"starting",ad:n})),t({type:Wr.AD_LOADED,tasks:c})}},adError:function(t){var e=t.time,n=t.ad;return function(t,i){var r=i.tasks.filter(function(t){return t.ad!==n
}),o=i.tasks.every(function(t){return n.weight>=t.ad.weight}),a=r.filter(qr("pending")).filter(qr("error")),s=D(r,Fr("pending")),d=D(r,Fr("starting")),c=D(r,Fr("started")),u=D(r,Fr("loading")),l=D(r,Fr("loaded")),h=e-i.data.startTime>=i.data.delay||o||!u,f=[{status:"error",ad:n}];a.length<i.data.concurrency&&s&&(s.ad.loadAd(),f.push({status:"loading",ad:s.ad})),!d&&!c&&l&&h&&(l.ad.startAd(),f.push({status:"starting",ad:l.ad})),t({type:Wr.AD_ERROR,tasks:f})}},adStarted:function(t){var e=t.ad;return function(t){t({type:Wr.AD_STARTED,tasks:[{status:"started",ad:e}]})}},cancelAds:function(){return function(t,e){t({type:Wr.CANCEL_ADS,tasks:e.tasks.filter(qr("started")).map(Ur("error"))})}},delayComplete:function(){return function(t,e){var n=D(e.tasks,Fr("starting")),i=D(e.tasks,Fr("loaded")),r=[];!n&&i&&(i.ad.startAd(),r.push({status:"starting",ad:i.ad})),t({type:Wr.DELAY_COMPLETE,tasks:r})}}},Hr={DESKTOP:{actions:jr,data:{concurrency:1,delay:5e3}},MOBILE:{actions:jr,data:{concurrency:1,delay:0}}},zr=function(t){if(!v(t))return Object(t);try{return JSON.parse(t)}catch(t){return{}}},Gr=function(t){return wi.test(t)?"true"===String(t).toLowerCase():t},Qr=function(t){return function(e){return Object.keys(e).filter(function(e){return _(t,Kt(e))}).reduce(function(t,n){return t[Kt(n)]=Gr(e[n]),t},{})}},Xr=function(t){return function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];return n=n.filter(Boolean).map(zr).map(Qr(t)),Object.freeze(S.apply(void 0,[{},t].concat(Sn(n))))}},Yr={create:Xr},$r=function(){if(void 0===document.currentScript){var t=document.getElementsByTagName("script");return t[t.length-1]||{}}return document.currentScript||{}}().dataset,Kr={width:0,height:0,view_mode:pr.NORMAL,desired_bitrate:-1,video_source:"",video_current_time:0,video_duration:0,content:{},pixels:[],iframes:[],inventory_type:"pre",inventory_id:"",ad_tag_url:"",ad_auto_play:!0,ad_request_flash:!1,ad_request_js:!0,server_side_mediation:!1,do_not_track:!1,ima_enabled:!Xn(),page_url:"",log_level:"",log_div:"",player_id:void 0,publisher_id:void 0,app_url:void 0,bundle_id:void 0,idfa:void 0,dsp:void 0,cat:void 0},Jr={create:Yr.create(Kr)},Zr=["AdLoaded","AdStarted","AdStopped","AdError"],to=Gn.EVENTS.filter(function(t){return-1===Zr.indexOf(t)}),eo=[],no=0;no<=100;no++)eo.push(no/100);var io=vi.extend({autoBind:!0,init:function(){var t=this;this.vastClient=null,this.adMediator=null,this.adUnit=null,this.slot=null,this.videoSlot=null,this.macroVars={},this.requestUrl="",this.settings={},this.initialVolume=1,this.streamType="na",this.playback=1,this.running=!1,this.poster=fi.create(),this.cancelSource=$n.create(),this.viewObserver=new IntersectionObserver(this._handleViewabilityChange,{threshold:eo}),this.intersectionRatio=1,this.on("AdStarted",function(){return t.poster.hide()}),this.on(["AdStopped","AdError"],function(){return t._dispose()}),this.on("*",function(t){return hi.info("player."+t.type)}),window.addEventListener("unload",function(){return t.stopAd()})},_handleViewabilityChange:function(t){var e=t.pop(),n=e.intersectionRatio;this.intersectionRatio=Math.round(100*n),hi.log({type:"player.viewability",intersectionRatio:n}),this.dispatch("viewabilityChange")},_dispose:function(){this.vastClient=null,this.adMediator=null,this.adUnit=null,this.running=!1,this.poster.remove(),this.cancelSource=$n.create(),B(this.slot)&&(T(this.slot.getElementsByClassName("bfm-vast-container")).forEach(x),V(this.slot,"bfm-ad-slot"),this.viewObserver.unobserve(this.slot)),hi.clear()},_injectStyle:function(){z({id:"neptune_player_css",css:'div.bfm-ad-slot,div.bfm-vast-container,div.bfm-ima-slot{font-family:"Lato",Arial,sans-serif !important;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;position:absolute;top:0;left:0;width:100% !important;height:100% !important}div.bfm-ad-slot iframe,div.bfm-vast-container iframe,div.bfm-ima-slot iframe{width:100% !important;height:100% !important;border:0 !important}div.bfm-ad-slot video,div.bfm-vast-container video,div.bfm-ima-slot video{background-color:black;position:absolute;top:0;left:0;width:100% !important;height:100% !important}div.bfm-ad-slot *,div.bfm-vast-container *,div.bfm-ima-slot *{-webkit-box-sizing:border-box !important;-moz-box-sizing:border-box !important;box-sizing:border-box !important}div.bfm-vast-container,div.bfm-ima-slot{z-index:1}div.bfm-ad-countdown{width:36px;height:36px;position:absolute;top:0;right:0;color:#f7f7f7;margin:8px;font-size:15px;font-weight:bold;filter:drop-shadow(0 0 1px rgba(0,0,0,0.5));z-index:1}div.bfm-ad-countdown div.bfm-ad-countdown-label{position:absolute;top:0;left:-44px;width:100%;height:100%;line-height:36px;text-align:right}div.bfm-ad-countdown div.bfm-ad-countdown-time{position:absolute;top:0;left:0;width:100%;height:100%;line-height:36px;text-align:center}.bfm-mraid div.bfm-ad-countdown{display:none !important}div.bfm-ad-poster{position:absolute;top:0;bottom:0;left:0;right:0;margin:0;padding:0;background-color:black;z-index:1}div.bfm-progress-circle{margin:0;width:36px;height:36px;position:absolute;top:0;left:0;clip:rect(0, 36px, 36px, 18px)}div.bfm-progress-circle.bfm-invert{clip:rect(0, 18px, 36px, 0)}div.bfm-progress-circle div.bfm-circle-part{width:100%;height:100%;border:3px solid #f7f7f7;border-radius:100%;position:absolute;clip:rect(0, 18px, 36px, 0);clip-path:inset(0 50% 0 0);-webkit-clip-path:inset(0 50% 0 0)}div.bfm-ad-skip-button{width:100px;height:32px;position:absolute;z-index:2;bottom:54px;right:0;font-size:15px;background-color:rgba(51,51,51,0.8);color:#f7f7f7;cursor:pointer}div.bfm-ad-skip-button div.bfm-ad-skip-button-label{position:absolute;top:0;width:100%;height:100%;line-height:32px;text-align:center;cursor:pointer}a.bfm-vast-blocker{display:block;position:absolute;z-index:2;margin:0;padding:0;height:100%;width:100%;top:0;left:0;right:0;bottom:0}',doc:this.slot&&this.slot.ownerDocument||document})},initAd:function(t,e,n,i,r,o){var a=this,s=r||{},d=s.AdParameters,c=o||{},u=c.slot,l=c.videoSlot,h=Jr.create($r,d,{width:Math.floor(t),height:Math.floor(e),view_mode:n,desired_bitrate:i,video_source:l.src,video_current_time:l.currentTime,video_duration:l.duration});this.slot=u,this.videoSlot=l,this.settings=h,ht(h,u),this.poster.hide(),u.appendChild(this.poster.el()),N(u,"bfm-ad-slot"),this.imaPromise=Mt(this),this._injectStyle(),hi.setLevel(h.log_level),hi.setOutput(h.log_div),hi.info({type:"player.settings",settings:h}),hi.info({type:"player.stack",stack:Error().stack}),this.viewObserver.observe(this.slot),Promise.all([J(0).then(function(){return At(a.videoSlot)}),J(0).then(function(){return ft(a.slot)}),this.nextEvent("viewabilityChange")]).then(function(t){var e=In(t,2),n=e[0],i=e[1];a.playback=n,a.streamType=i,a.dispatch("AdLoaded")})},startAd:function(){hi.log("player.startAd"),this.running||(this.running=!0,this.poster.show(),this.macroVars=gt(this.settings),this.requestUrl=_t(this.settings,this.intersectionRatio,this.playback,this.streamType),this.vastClient=zi.create(),this.vastClient.fetchVAST(this.requestUrl,{macroVars:this.macroVars,cancelToken:this.cancelSource.token},this._vastHandler))},_vastHandler:function(t,e){if(t)this.dispatch("AdError");else{var n={slot:this.slot,videoSlot:this.videoSlot,macroVars:this.macroVars,settings:this.settings,initialVolume:this.initialVolume,imaPromise:this.imaPromise},i=Xn()?Hr.MOBILE:Hr.DESKTOP,r=e.ads.map(function(t){return Lr.create(t,n)}),o=Et(e.ads),a=this.cancelSource.token;this.adMediator=Br.create(i),this.adMediator.start(r,{timeout:o,cancelToken:a},this._adHandler)}},_adHandler:function(t,e){var n=this;if(t)this.dispatch("AdError");else{var i=e._adModule,r=i.adUnit;to.forEach(function(t){r.on(t,function(t){var e=t.type,i=t.data;n.dispatch({type:e,data:i})})}),this.adUnit=r,i.once([tr.AD_ERROR,tr.AD_STOP],function(){return n.dispatch("AdStopped")}),this.dispatch("AdStarted")}},stopAd:function(){hi.log("player.stopAd"),this.cancelSource.cancel(Ai.EXTERNAL_TIMEOUT.create())},pauseAd:function(){return hi.log("player.pauseAd"),this.adUnit?this.adUnit.pauseAd():void 0},resumeAd:function(){return hi.log("player.resumeAd"),this.adUnit?this.adUnit.resumeAd():void 0},expandAd:function(){return hi.log("player.expandAd"),this.adUnit?this.adUnit.expandAd():void 0},collapseAd:function(){return hi.log("player.collapseAd"),this.adUnit?this.adUnit.collapseAd():void 0},skipAd:function(){return hi.log("player.skipAd"),this.adUnit?this.adUnit.skipAd():void 0},resizeAd:function(t,e,n){return hi.log({type:"player.resizeAd",width:t,height:e,viewMode:n}),this.adUnit?this.adUnit.resizeAd(t,e,n):void 0},setAdVolume:function(t){hi.log({type:"player.setAdVolume",volume:t}),this.adUnit?this.adUnit.setAdVolume(t):this.initialVolume=t},getAdVolume:function(){var t=this.adUnit?this.adUnit.getAdVolume():this.initialVolume;return hi.log({type:"player.getAdVolume",volume:t}),t},getAdWidth:function(){return hi.log("player.getAdWidth"),this.adUnit?this.adUnit.getAdWidth():0},getAdHeight:function(){return hi.log("player.getAdHeight"),this.adUnit?this.adUnit.getAdHeight():0},getAdRemainingTime:function(){return hi.log("player.getAdRemainingTime"),this.adUnit?this.adUnit.getAdRemainingTime():-2},getAdDuration:function(){return hi.log("player.getAdDuration"),this.adUnit?this.adUnit.getAdDuration():-2},getAdSkippableState:function(){return hi.log("player.getAdSkippableState"),!!this.adUnit&&this.adUnit.getAdSkippableState()},getAdExpanded:function(){return hi.log("player.getAdExpanded"),!!this.adUnit&&this.adUnit.getAdExpanded()},getAdIcons:function(){return hi.log("player.getAdIcons"),!!this.adUnit&&this.adUnit.getAdIcons()},getAdCompanions:function(){return hi.log("player.getAdCompanions"),this.adUnit?this.adUnit.getAdCompanions():""},getAdLinear:function(){return hi.log("player.getAdLinear"),!0},isVPAID:function(){return this.adUnit&&"VPAID"===this.adUnit.type}}),ro=2e3,oo=["AdStopped","AdError"],ao=oi.extend({options:{className:"bfm-ad-slot",children:{video:{tagName:"video",tagAttributes:{playsinline:"true","webkit-playsinline":"true"}}}}}),so=Rt.extend({autoBind:!0,init:function(t){var e=t.el,n=t.mraid,i=t.vpaid;this.mraid=n,this.vpaid=i,this.slot=ao.create(),this.slot.addClass("bfm-mraid"),e.appendChild(this.slot.el())},start:function(){"loading"===this.mraid.getState()?q(this.mraid,"ready",this._handleReady):this._handleReady()},_handleReady:function(){var t=this.mraid,e=this.vpaid,n=this.slot,i=t.getVersion()>1&&t.getMaxSize(),r=i&&i.width||n.el().clientWidth,o=i&&i.height||n.el().clientHeight,a={AdParameters:{ad_request_flash:!1,ad_request_js:!1,server_side_mediation:!0,page_url:null}},s={slot:n.el(),videoSlot:n.video.el()};e.once("AdLoaded",this._handleAdLoaded),e.once("AdStarted",this._handleAdStarted),e.once(["AdStopped","AdError"],function(){return setTimeout(function(){return t.close()},250)}),e.initAd(r,o,"normal",-1,a,s)},_handleAdLoaded:function(){var t=this.mraid,e=this.vpaid;t.getVersion()>1&&t.supports("vpaid")?t.initVpaid({subscribe:e.subscribe,unsubscribe:e.unsubscribe,startAd:e.startAd,getAdDuration:e.getAdDuration,getAdRemainingTime:e.getAdRemainingTime}):t.isViewable()?e.startAd():U(t,"viewableChange",this._handleViewable)},_handleAdStarted:function(){var t=this.mraid,e=this.slot,n=e.video.el(),i=n.videoWidth,r=n.videoHeight;t.setOrientationProperties({allowOrientationChange:!1,forceOrientation:i>r?"landscape":"portrait"})},_handleViewable:function(t){var e=this.mraid,n=this.vpaid;t&&(F(e,"viewableChange",this._handleViewable),n.startAd())}});window.Beachfront=window.Beachfront||{},window.Beachfront.Neptune={version:On,Player:kn},window.getVPAIDAd=kn,window.addEventListener("error",function(t){var e=t.error,n=e.message,i=e.stack;hi.error({type:"error",message:n,stack:i})}),window.addEventListener("unhandledrejection",function(t){var e=t.reason,n=e.message,i=e.stack;hi.error({type:"unhandledrejection",message:n,stack:i})}),window.mraid&&so.create({el:document.body,mraid:window.mraid,vpaid:kn()}).start()}()}();

//# sourceMappingURL=neptune-player.js.map